(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["FlashlightPageDesktop",23,135],{"/Tr7":function(e,t,n){function o(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}n.d(t,"a",(function(){return o}))},"0PSK":function(e,t,n){var o=n("q1tI"),i=n.n(o);t.a=i.a.createContext(null)},"0Rm8":function(e,t,n){n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var o=n("q1tI");const i=n("NwjN").a;function a({children:e}){return e(Object(o.useContext)(i))}function r(){return Object(o.useContext)(i)}},"0SCs":function(e,t,n){var o=n("q1tI");function i(e){return e.startsWith("enabled")||e.startsWith("employee")}function a(e,{activate:t=!0,activateExperiment:n,group:a,userIsEligible:r=!0}){Object(o.useEffect)(()=>{t&&r&&n(e)},[e,t,r]);const s=Object(o.useCallback)(()=>{r&&n(e)},[n,r,e]);return{group:r?a:"",anyEnabled:r&&i(a),customActivate:r&&!t?s:()=>{}}}var r=n("pLLR");function s(e,t=!0){const{experiments:n}=Object(r.d)(),{group:o,anyEnabled:i}=a(e,{activate:!0,activateExperiment:e=>{n.v2ActivateExperiment(e)},group:n.v2GetGroup(e)||"",userIsEligible:t});return{group:o,anyEnabled:i}}function l(e,t=!0){const{experiments:n}=Object(r.d)(),{group:o,anyEnabled:i}=a(e,{activate:!1,activateExperiment:()=>{},group:n.v2GetGroup(e)||"",userIsEligible:t});return{group:o,anyEnabled:i}}n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}))},"0bYG":function(e,t){e.exports={ReasonToChoose:{UNKNOWN:0,REPIN_BOARD:1,RECOMMENDED_CATEGORY:2,COOKIE_MONSTER:3,USER_ACTIVITY:4,FOLLOWED_INTEREST:5,RECENT_FOLLOWED_INTEREST:59,REALTIME_P2B:6,REALTIME_P2B_CLOSEUP:22,RECOMMENDED_INTEREST:7,VISUALLY_SIMILAR:8,CLICKTHROUGH:9,BOARD_FOLLOW:35,RECENT_FOLLOWED_BOARD:61,USER_FOLLOW:45,RECOMMENDED_COMMERCE:10,EVERYTHING_FEED:11,RECOMMENDED_LOCAL_PIN:12,LOCAL_REPIN_BOARD:13,SEARCH:46,P2P:14,PROMOTED_PIN:15,P2P_USER_COMMERCE:16,COMMERCE_EDUCATION:17,LANDING_PAGE_PINS:18,FOLLOWING_FEED:19,POPULAR_FEED:20,P2P_COMMERCE:21,P2P_DYNAMIC_GRID:23,LANDING_PAGE_INTEREST_PINS:24,FRESH_PIN_FROM_PIN:25,FRESH_PIN_FROM_INTEREST:26,FRESH_PIN_FROM_BOARD:27,SIFTER_VIDEO_FROM_INTEREST:39,SIFTER_PRODUCTS:57,SIFTER_DISTRIBUTION_A:50,SIFTER_DISTRIBUTION_B:51,SIFTER_DISTRIBUTION_C:52,SIFTER_DISTRIBUTION_D:53,SIFTER_DISTRIBUTION_E:54,SIFTER_ACTIVATION_EXPERIMENT:58,SIFTER_FRESHMAKER_PIN_FROM_INTEREST:40,P2P_CLICKTHROUGH:28,P2P_CLOSEUP:29,P2P_LIKE:30,P2P_PIN_CREATE:31,LOCAL_CLICKTHROUGH:32,LOCAL_USER_ACTIVITY:33,INSTANT_PFY:34,INSTANT_PFY_NON_MATERIALIZABLE:36,DYNAMIC_INSERTION:37,DYNAMIC_INSERTION_BOARD_FOLLOW:38,HYPERLOCAL_INTEREST_BOARD:41,NUX_BOARD_FOLLOW_P2P:42,INDIRECT_DOMAIN_PIN:43,PIXIE_PINS_FOR_BOARD:44,FRESH_REPIN_BOARD:47,FRESH_CLICKTHROUGH:48,FRESH_USER_ACTIVITY:49,SCREENSHOT_SAVE:55,TEXT_EMBEDDINGS:56,FRESH_TEXT_EMBEDDINGS:67,PREFETCH_LOAD:60,DIVERSE_TOPICS:62,QUIZ_RESULTS:63,INTENTIONAL_DISTRIBUTION_TOPICS:64,INTENTIONAL_DISTRIBUTION_TOPICS_THIRD_PARTY:90,INTENTIONAL_DISTRIBUTION_TOPICS_STORY_PINS:91,INTENTIONAL_DISTRIBUTION_TOPICS_VIDEO:98,INTENTIONAL_DISTRIBUTION_GEMINI:73,INTENTIONAL_DISTRIBUTION_GEMINI_V5:120,INTENTIONAL_DISTRIBUTION_SHOP_STYLE_STL:74,INTENTIONAL_DISTRIBUTION_GRAPHSAGE:78,INTENTIONAL_DISTRIBUTION_REPIN_BOARD:80,INTENTIONAL_DISTRIBUTION_CLICKTHROUGH:81,INTENTIONAL_DISTRIBUTION_USER_ACTIVITY:82,INTENTIONAL_DISTRIBUTION_DOMAIN:86,INTENTIONAL_DISTRIBUTION_CREATOR_BASELINE:92,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_VIDEO:95,INTENTIONAL_DISTRIBUTION_USER_TO_CREATOR_STORY_PIN:100,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS:102,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_STORY_PIN:103,INTENTIONAL_DISTRIBUTION_RECOMMENDED_TOPICS_DIVERSITY:105,RECOMMENDED_TOPICS:65,PIXIE_RECENT_ACTION:66,NATIVE_CONTENT_TOPICS:68,BUBBLE_OPEN_TOPICS:69,TOPIC_BEST_PINS:70,DARK_PROMOTED_PIN:71,POST_EXPLORE_TOPICS:72,GRAPHSAGE_EMBEDDINGS:75,DEMOGRAPHIC_PFY:76,TOPIC_BEST_PINS_V2:77,DAILY_BEST_PINS:79,SHOPPING_STL:83,UNAUTH_PIXIE_P2B:84,UNAUTH_PIXIE_P2P:85,VIDEO_EMBEDDINGS:87,VIDEO_EMBEDDINGS_GEMINI_V5:121,NAVBOOST_P2P:88,NAVBOOST_PFY:89,GEMINI_V5_EMBEDDINGS_STATIC:93,GEMINI_V5_EMBEDDINGS_FRESH:94,GEMINI_V5_EMBEDDINGS_REALTIME:106,GEMINI_V5_EMBEDDINGS_STORYPIN:107,CURATED_VIDEO_INTEREST:96,GRAPHSAGE_PRODUCT_PINS:97,GRAPHSAGE_PRODUCT_PINS_LONGER_HISTORY:112,GRAPHSAGE_SHOPPABLE_INSPIRATION:126,NUX_GRAPHSAGE:99,TOPIC_BEST_PINS_V3:101,GEMINI_INTERESTS_FRESH:104,GRAPHSAGE_USER_EMBEDDINGS_TO_PINS:108,GRAPHSAGE_USER_EMBEDDINGS_TO_ORGANIC_PINS:109,GRAPHSAGE_USER_EMBEDDINGS_TO_PRODUCT_PINS:110,LENS_CAMERA_VISUALLY_SIMILAR:111,GRAPHSAGE_VIDEO_PINS:113,RECBOOST_REPIN_BOARD:114,RECBOOST_CLICKTHROUGH:115,RECBOOST_USER_ACTIVITY:116,RECBOOST_CREATOR_BOARDS:129,RECOMMENDED_BOARDS:117,RECOMMENDED_CREATOR_BOARDS:124,ANNOTATION_REC_CREATOR_BOARDS:127,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGEED_INTERESTS_VIDEO:118,INTENTIONAL_DISTRIBUTION_MANUAL_INTERESTS_VIDEO:119,INTENTIONAL_DISTRIBUTION_MANUAL_TAGGED_INTERESTS_STORY_PIN:130,REPIN_CREATOR_BOARD:122,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS:123,GRAPHSAGE_USER_EMBEDDINGS_TO_CREATOR_PINS_REALTIME:131,FRESH_SIG_FROM_BOARD:125,RECENT_ENGAGED_CREATOR_BOARDS:128,RTC_IMPROVEMENT_TEST_1:501,RTC_IMPROVEMENT_TEST_2:502,RTC_IMPROVEMENT_TEST_3:503,RTC_IMPROVEMENT_TEST_4:504,RTC_IMPROVEMENT_TEST_5:505,RTC_IMPROVEMENT_TEST_6:506,RTC_IMPROVEMENT_TEST_7:507,RTC_IMPROVEMENT_TEST_8:508,RTC_IMPROVEMENT_TEST_9:509,RTC_IMPROVEMENT_TEST_10:510,RTC_IMPROVEMENT_TEST_11:511,RTC_IMPROVEMENT_TEST_12:512,RTC_IMPROVEMENT_TEST_13:513,RTC_IMPROVEMENT_TEST_14:514,RTC_IMPROVEMENT_TEST_15:515}}},"0rqB":function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("clxp"),r=n("n6mq");const s="#0f0",l="#00f",c="#999";function d({children:e,group:t,isEligible:n,name:o,performsActivate:a}){let d=a?s:l;return n||(d=c),i.a.createElement(r.c,{position:"relative"},e,i.a.createElement(r.c,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:{__style:{boxShadow:`0 0 2px 2px ${d}`,borderRadius:5}}}),i.a.createElement(r.c,{position:"absolute",top:!0,left:!0,color:"lightGray"},o,": ",t))}var u=n("NVsV");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return m}));class h extends o.PureComponent{constructor(...e){super(...e),p(this,"handleCustomActivate",()=>{const{activateExperiment:e,isEligible:t,name:n}=this.props;return t?e(n):""}),p(this,"attachDebugging",e=>{const{activate:t,name:n,isEligible:o,highlighted:a}=this.props,r=this.getGroup();return a?i.a.createElement(d,{group:r,isEligible:o,name:n,performsActivate:t},e):e})}componentDidMount(){const{activate:e,activateExperiment:t,isEligible:n,name:o}=this.props;e&&n&&t(o)}getGroup(){const{group:e,overrideGroup:t}=this.props;return"string"==typeof t?t:e}render(){const{activate:e,name:t,children:n,isEligible:o}=this.props,r=this.getGroup(),s=`Experiment(${t}:${r})`,l=!!o&&(r.startsWith("enabled")||r.startsWith("employee")),c={group:o?r:"",anyEnabled:l,customActivate:o&&!e?this.handleCustomActivate:null};return this.attachDebugging(i.a.createElement(a.a,{name:s},n(c)))}}function m(e){const{name:t}=e,{debuggingEnabled:n,overriddenExperiments:a,highlightedExperiment:r,setExperimentVisible:s}=Object(o.useContext)(u.c),l=n&&a&&"string"==typeof a[t]?a[t]:null,c=n&&(r===t||r===u.a);return Object(o.useEffect)(()=>{if(n)return s(t,!0),()=>s(t,!1)},[t,n]),i.a.createElement(h,{...e,overrideGroup:l,highlighted:c})}p(h,"defaultProps",{activate:!0,isEligible:!0,overrideGroup:null,highlighted:!1})},"1Vso":function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("7pfs");t.a=e=>{const{accessibilityLabel:t,children:n,className:o,dataTestId:r,onClick:s,style:l}=e;return i.a.createElement(a.a,null,({active:e,focused:a,hovered:c,onBlur:d,onFocus:u,onMouseDown:p,onMouseEnter:h,onMouseLeave:m,onMouseUp:f})=>i.a.createElement("button",{"data-test-id":r,"aria-label":t,style:l,onBlur:d,onFocus:u,onMouseDown:p,onMouseEnter:h,onMouseLeave:m,onMouseUp:f,onClick:s,className:o},n({active:e,focused:a,hovered:c})))}},"2rMq":function(e,t,n){var o,i,a;i=!("undefined"==typeof window||!window.document||!window.document.createElement),a={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen},void 0===(o=function(){return a}.call(t,n,t,e))||(e.exports=o)},"2xqg":function(e,t,n){var o=n("UNi/"),i=n("EwQA"),a=n("Sxd8"),r=9007199254740991,s=4294967295,l=Math.min;e.exports=function(e,t){if((e=a(e))<1||e>r)return[];var n=s,c=l(e,s);t=i(t),e-=s;for(var d=o(c,t);++n<e;)t(n);return d}},"2zs7":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.canUseDOM=void 0;var o,i=n("2rMq");var a=((o=i)&&o.__esModule?o:{default:o}).default,r=a.canUseDOM?window.HTMLElement:{};t.canUseDOM=a.canUseDOM;t.default=r},"3qdF":function(e,t,n){n.d(t,"a",(function(){return l}));var o=n("q1tI"),i=n.n(o),a=n("4Utz"),r=n("n6mq");const s={chip:{marginRight:1,flex:"1 1 0"},chipInner:{paddingBottom:"100%"},chipContainer:{marginRight:-1}};function l({pin:e,enableCloseupLink:t}){const{aggregated_pin_data:n}=e,{pin_tags_chips:o}=n||{},l=o&&o.length>=3?o.slice(0,3):[];return i.a.createElement(r.c,{display:"flex",dangerouslySetInlineStyle:{__style:s.chipContainer}},l.map(n=>{const o=n.images["750x"]||{},l=i.a.createElement(r.p,{alt:"",fit:"cover",naturalHeight:o.height,naturalWidth:o.width,src:o.url});return i.a.createElement(r.c,{dangerouslySetInlineStyle:{__style:s.chip},"data-test-id":"collageChip",key:n.id},i.a.createElement(r.c,{dangerouslySetInlineStyle:{__style:s.chipInner},position:"relative"},i.a.createElement(r.c,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0},i.a.createElement(r.u,{height:"100%",wash:!0,width:"100%"},t?i.a.createElement(a.a,{additionalStyles:{width:"100%",height:"100%"},collageChipId:n.id,pin:e},l):l))))}))}},"45LI":function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("/MKj"),r=n("ajUs");function s(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}var l=n("gYog"),c=n("wIXi"),d=n("17x9"),u=n.n(d),p=n("hFNL"),h=n("3gA6"),m=n("yKES"),f=n("5uyJ"),g=n("n6mq");const y={overlay:{__style:{backgroundColor:"#000",opacity:.4}}};function b(e){const{pin:{id:t,images:n,title:o,videos:a,video_status_message:r}}=e,s=r||{},l=n&&n["236x"],c=a&&a.video_list[f.a.V_HLSV4],{duration:d}=c||{};return i.a.createElement(i.a.Fragment,null,i.a.createElement(g.e,null,i.a.createElement(h.b,{to:`/pin/${t}`},i.a.createElement(g.c,{overflow:"hidden",position:"relative",shape:"rounded"},l&&i.a.createElement(g.p,{alt:o||"",color:"lightGray",naturalHeight:l.height,naturalWidth:l.width,src:l.url}),!!d&&i.a.createElement(g.c,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex"},i.a.createElement(m.a,{duration:d})),i.a.createElement(g.c,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,dangerouslySetInlineStyle:y.overlay}),i.a.createElement(g.c,{position:"absolute",top:!0,left:!0,padding:5,width:"100%"},i.a.createElement(g.K,{color:"white",overflow:"normal",size:"xl",weight:"bold"},s.title),i.a.createElement(g.c,{marginTop:4},i.a.createElement(g.K,{color:"white",size:"sm",overflow:"normal"},s.subtitle)))),i.a.createElement(g.c,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1},i.a.createElement(g.c,{flex:"grow"},o&&i.a.createElement(g.c,{paddingY:1},i.a.createElement(g.K,{inline:!0,size:"sm",weight:"bold"},o)))))))}var v=n("Y8Sn"),E=n("TxB+"),w=n("0nTG");function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class O extends o.Component{constructor(...e){super(...e),_(this,"state",{startImpressionTimer:!1}),_(this,"handleLoad",()=>{this.setState({startImpressionTimer:!0})}),_(this,"handleError",()=>{this.setState({startImpressionTimer:!1})})}render(){const{componentType:e,contextLogData:t,impressionAuxFields:n,pin:o,slotIndex:a,location:c,viewData:d,viewType:u,viewParameter:h}=this.props,m=Object(r.a)(o,c),f=s(o),g=!!(f&&f.url&&f.height&&f.width)||void 0,y=f&&o.videos?o.videos.id:void 0;return i.a.createElement(l.a,{componentType:e,contextLogData:{..."undefined"!=typeof window?{pwa_type:Object(p.b)(window)}:{},...t,...Object(w.a)(o,t)},loggingId:o.id,impressionType:"Pin",impressionAuxFields:{...n||{},isNativeVideoAndWatchable:g,videoIdStr:y,richTypes:Object(w.c)(o),imageURL:o.images&&o.images["236x"].url,clientTrackingParams:m||`${o.tracking_params}-0`},isPaused:!this.state.startImpressionTimer,slotIndex:a,viewData:d,viewType:u,viewParameter:h},Object(v.h)(o)?i.a.createElement(b,{pin:o}):i.a.createElement(E.c,{...this.props,onError:this.handleError,onLoad:this.handleLoad}))}}O.propTypes={componentType:u.a.number,contextLogData:u.a.objectOf(u.a.any),impressionAuxFields:u.a.objectOf(u.a.any),location:u.a.shape({history:u.a.arrayOf(u.a.shape({pathname:u.a.string.isRequired,search:u.a.string,previousPath:u.a.string,gridItems:u.a.arrayOf(u.a.any)})).isRequired,pathname:u.a.string.isRequired,previousPage:u.a.string}),pin:c.a.isRequired,slotIndex:u.a.number.isRequired,viewParameter:u.a.number.isRequired,viewType:u.a.number.isRequired,...E.a};var C=Object(a.connect)(({location:e})=>({location:e}))(O),S=n("ynlw");function I({inChangeTitlesExp:e,isGroupBoard:t,pin:n,surface:o}){const{buyable_product:i,carousel_data:a,grid_title:r,rich_summary:s,title:l}=n,{isOwnPin:c,isPromoted:d}=Object(S.a)(n);if(e&&!d)return r||"";if(c&&!t&&!a&&"UserProfilePinGrid"!==o)return"";if(a){const{carousel_slots:e=[],index:t}=a;if(e[t]&&e[t].title)return e[t].title.trim()}const u=s&&"mobile application"!==s.type_name&&s.display_name,p=i&&i.title;return l||u||p||r||""}const T=["BrioCloseupRelatedProducts","EngagementDetails","UserProfilePinGrid"];const x=e=>{if("undefined"==typeof window)return"";let t=0;const n=document.querySelector('[data-test-id="header"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:n}=e.getBoundingClientRect();t+=n}break;case"SearchItem":const n=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}}return`${-1*t}px 0px 0px 0px`};var R=n("mVz+"),P=n("uDSo");const k=["BrioCloseupRelatedProducts","CloseupRelatedProducts","ProductPinsFeed","RelatedProductsFeed","ShoppingPackageItem","STLProductsFeed","UpdatedCloseupRelatedProducts"];var M=n("clxp");const N={BaseBoardPinGrid:"boardPinView",UserProfilePinGrid:"profilePinView"};var A=n("1Fta"),D=n("Ye/N"),L=n("vvax");var j=n("63p3");var B=n("Zygf");function z(e){return i.a.createElement("div",{"data-test-id":"pointer-events-wrapper",style:{pointerEvents:"auto"}},e)}var F=n("rYoy"),U=n("gD/Z"),H=n("zwad");function G(e,t){const{carousel_data:n,domain:o}=e;let i=o||"";return n&&n.id&&(i=function(e,t){const n=t||e&&e.index||0,o=e&&e.carousel_slots||[],i=o[n]&&o[n].link||"";return i&&H.a.parse(i).hostname||""}(n,t)),i.replace("www.","")}var V=n("8BHY"),W=n("kVqD");const q={container:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"18px",height:"32px",maxWidth:"132px"},containerHovered:{backgroundColor:"rgba(255, 255, 255, 1.0)"},containerTruncated:{maxWidth:"87px"},text:{color:"#333333"}};function K({pin:e,sourceLinkStyle:t,url:n}){const[a,r]=Object(o.useState)(!1),{id:s}=e,l=G(e),c=Object(w.a)(e)||{},{slotIndex:d}=Object(U.b)(),u=Object(W.a)(12,{grid_index:d,objectId:s,...Object(w.a)(e)||{}}),p=Object(W.a)(101,{element:162,objectId:s,...Object(w.a)(e)||{}});return"icon-only"===t?i.a.createElement(h.b,{auxData:c,external:!0,onClick:()=>{u(),p()},pinId:s,to:n},i.a.createElement(V.a,{accessibilityLabel:D.a._("link","Website url link"),bgColor:"white",icon:"arrow-up-right",iconColor:"darkGray",iconSize:12,size:"sm"})):i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{...q.container,...a?q.containerHovered:{},..."truncated-text"===t?q.containerTruncated:{}}},"data-test-id":"pinrep-source-link",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),position:"relative"},i.a.createElement(h.b,{external:!0,onClick:()=>{u(),p()},pinId:s,to:n},i.a.createElement(g.c,{alignItems:"baseline",dangerouslySetInlineStyle:{__style:q.text},display:"flex",justifyContent:"between"},i.a.createElement(g.c,{display:"flex",flex:"none",marginTop:3,marginBottom:3,marginStart:3},i.a.createElement(g.n,{accessibilityLabel:D.a._("link","Website url link"),color:"darkGray",icon:"arrow-up-right",size:9})),i.a.createElement(g.c,{alignItems:"center",display:"flex",height:18,marginStart:2,marginEnd:3,overflow:"hidden"},i.a.createElement(g.K,{color:"darkGray",size:"sm",weight:"bold",truncate:!0},l)))))}const $=Object(o.lazy)(()=>Promise.all([n.e(15),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"jHGc"))),Y=Object(o.lazy)(()=>Promise.resolve().then(n.bind(null,"Te6n"))),X=Object(o.lazy)(()=>n.e("PinRepSendShareLinkButtonCommon").then(n.bind(null,"GUPW")));var Z=Object(o.memo)((function({actionBarEditBeforeShare:e,feedbackData:t,feedbackType:n,onToggleFlyout:o,onToggleModal:a,pin:r,pinTitle:s,setForcePrimary:l,showEditButton:c,showOverflowMenu:d,showShareButton:u,sourceLinkStyle:p,useDenseGroupBoardLayout:h}){const{viewParameter:m,viewType:f}=Object(U.b)(),{carousel_data:y,id:b,tracked_link:v,link:E}=r,w=v||E||"",_=!!w&&z(i.a.createElement(K,{pin:r,url:w,sourceLinkStyle:p})),O=u&&i.a.createElement(F.a,null,i.a.createElement(g.c,{"data-test-id":"send-share-link"},z(i.a.createElement(X,{pin:r,setForcePrimary:l})))),C=c&&i.a.createElement(F.a,null,i.a.createElement(g.c,{"data-test-id":"edit-button"},z(i.a.createElement($,{carouselSlotCurrentIndex:y&&y.index,component:0,onToggleModal:o,pinId:b,style:{size:"sm"},view:f,viewParameter:m,useLegoStyles:!0}))));return h?i.a.createElement(g.c,{display:"flex",justifyContent:"between",alignItems:"center",padding:3},i.a.createElement("div",{style:{flexBasis:32}},_),e?C:O,e?O:C):i.a.createElement(g.c,{alignItems:"center",display:"flex",padding:3},i.a.createElement(g.c,{flex:"shrink"},_),i.a.createElement(g.c,{alignItems:"center",display:"flex",flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"auto"}}},i.a.createElement(g.c,{paddingX:d||(e?u:c)?2:0},e?C:O),d&&i.a.createElement(F.a,null,i.a.createElement(g.c,{"data-test-id":"overflow-menu-button"},z(i.a.createElement(Y,{feedbackData:t,feedbackType:n,pin:r,pinTitle:s,setForcePrimary:l})))),e?O:C))})),J=n("XSD5"),Q=n("ZbwW"),ee=n("U4JR");function te({direction:e,swipeHandler:t}){const n={left:D.a._("View Previous","Button to advance carousel to the previous image"),right:D.a._("View Next","Button to advance carousel to the next image")};return i.a.createElement(g.c,{position:"absolute",bottom:!0,top:!0,[e]:!0},i.a.createElement(g.P,{fullWidth:!0,fullHeight:!0,onTouch:t},i.a.createElement(g.c,{alignItems:"center",display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%","data-test-id":`carousel-slider-${e}`},i.a.createElement(g.n,{accessibilityLabel:n[e],color:"white",icon:{left:"arrow-back",right:"arrow-forward"}[e]}))))}var ne=Object(a.connect)(null,(function(e){return{changeCarouselSlotIndex:(t,n)=>e(Object(J.a)(t,n))}}))(({pin:e,changeCarouselSlotIndex:t})=>{const{componentType:n,viewParameter:o,viewType:a}=Object(U.b)(),r=Object(Q.a)(e);if(!r)return null;const{id:s=""}=e,{carousel_slots:l,index:c,id:d}=r,u=(t,i)=>{Object(ee.a)(108,{objectId:s,component:n,view:a,viewParameter:o,eventData:{pinCarouselSlotEventData:{carouselSlotId:l[t]&&Number(l[t].id),carouselDataId:Number(d),carouselSlotIndex:t,toCarouselSlotIndex:i}},...Object(w.a)(e)||{}})};function p(e){return()=>{const n="left"===e?c-1:c+1;t(s,n),u(c,n)}}return i.a.createElement(g.c,{height:"100%",position:"relative",width:"100%"},c>0&&z(i.a.createElement(te,{direction:"left",swipeHandler:p("left")})),c<l.length-1&&z(i.a.createElement(te,{direction:"right",swipeHandler:p("right")})))});const oe=32;function ie({avatarUrl:e,attributionNameLink:t,name:n=""}){const o=i.a.createElement(g.c,{height:`${oe}px`,width:`${oe}px`},i.a.createElement(g.a,{name:n,src:e}));return t?i.a.createElement(h.b,{className:"underlineLink",to:t},o):o}function ae({attributionNameLink:e,name:t,regularWeight:n}){const o=i.a.createElement(g.K,{size:"sm",truncate:!0,weight:n?"normal":"bold"},t);return i.a.createElement(g.c,null,e?i.a.createElement(h.b,{className:"underlineLink",to:e},o):o)}function re({link:e,title:t}){if(!t)return null;const n=i.a.createElement(g.K,{leading:"short",size:"sm",truncate:!0},t);return i.a.createElement(g.c,null,e?i.a.createElement(h.b,{className:"underlineLink",to:e},n):n)}var se=n("b9Z9");function le(e){const{board:t,pinner:n={},promoter:o}=e,{isPromoted:i}=Object(S.a)(e);let a="",r="",s="",l="",c="";return i&&o?(a=o.image_medium_url||o.image_small_url,s=o.full_name,l=D.a._("Promoted by","indicating the username of the person who promoted the pin"),c=`/${o.username}/`):(a=n.image_medium_url||n.image_small_url,r=`/${n.username}/`,l=n.full_name,c=t?t.url:""),{avatarUrl:a,attributionNameLink:r,attributionTitle:s,name:l,url:c}}var ce=n("fc1g");const de=32;var ue=Object(a.connect)(null,(function(e){return{setMostRecentPin:t=>{e(Object(ce.b)(t))}}}))((function({feedbackData:e,feedbackType:t,isDarkPromoter:n,pin:o,pinTitle:a,setForcePrimary:r,setMostRecentPin:s}){const{id:l,pinner:c}=o,{isPromoted:d}=Object(S.a)(o),u=c||o.promoter,p=Object(W.a)(101,{element:d?283:27,objectId:l}),{avatarUrl:m,attributionNameLink:f,attributionTitle:y,name:b,url:v}=le(o),{viewParameter:E,viewType:w}=Object(U.b)(),_=v&&!f,O=i.a.createElement(g.c,{alignItems:"center",display:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:"-3px",marginRight:"-3px"}}},i.a.createElement(g.c,{flex:"none",dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}}},i.a.createElement(se.a,{avatarSize:de,isDarkPromoter:n,pinId:l,user:u,username:u&&u.username,viewParameter:E,viewType:w},i.a.createElement(ie,{attributionNameLink:f,avatarUrl:m,name:b}))),i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{marginLeft:"3px",marginRight:"3px"}},flex:"grow",overflow:"hidden"},i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{marginBottom:"2px"}}},i.a.createElement(ae,{attributionNameLink:f,name:b,regularWeight:!y})),i.a.createElement(re,{title:y})));return _?i.a.createElement(h.b,{className:"underlineLink",onClick:()=>{s(l),p()},to:v},O):O})),pe=n("Gx6I"),he=n("fArA"),me=n("GsvW");var fe=Object(he.compose)(Object(a.connect)((e,t)=>{return{replyActivityItem:t.replyActivityId?e.activityItems[t.replyActivityId]:null}},e=>({toggleLike:(t,n,o)=>e(Object(pe.a)(t,1,n,o))})))((function({parentActivity:e,replyActivityId:t,replyActivityItem:n,toggleLike:a}){const{content:{text:r},created_at:s,reaction_by_me:l,type:c,user:d}=n||{},[u,p]=Object(o.useState)(!1);return t&&n?i.a.createElement(g.c,{marginTop:2,display:"flex",direction:"row",width:"100%"},i.a.createElement(g.c,{marginRight:2,dangerouslySetInlineStyle:{__style:{borderLeftWidth:"2px",borderLeftStyle:"solid",borderLeftColor:"#efefef"}}}),i.a.createElement(g.c,{display:"flex",direction:"column",width:"100%"},i.a.createElement(g.P,{onTouch:({event:e})=>{a(t,c,!!l)},onMouseEnter:({event:e})=>{p(!0)},onMouseLeave:({event:e})=>{p(!1)}},i.a.createElement(g.c,{display:"flex",direction:"row"},i.a.createElement(g.c,{maxWidth:124},i.a.createElement(g.K,{size:"sm",weight:"bold"},Object(me.e)(d))),i.a.createElement(g.c,{marginLeft:1},i.a.createElement(g.K,{size:"sm",color:"gray"},Object(me.f)(s)))),i.a.createElement(g.c,{display:"flex",direction:"row"},i.a.createElement(g.c,{width:"100%"},i.a.createElement(g.c,{marginRight:5,width:"100%"},i.a.createElement(g.K,{size:"sm"},r))),i.a.createElement(g.c,{marginTop:-2,marginRight:1,marginLeft:2,minWidth:12},!!l&&i.a.createElement(g.n,{icon:"heart",accessibilityLabel:D.a._("Liked","Accessibility lable for like sent reaction icon to comments and replies under pin rep"),color:"red",size:12}),!l&&u&&i.a.createElement(g.n,{icon:"heart-outline",accessibilityLabel:D.a._("Like","Accessibility lable for send like reaction icon to comments and replies under pin rep"),color:"darkGray",size:12})))))):null})),ge=n("zLLH");const ye=160;var be=Object(he.compose)(Object(a.connect)((e,t)=>{return{commentActivityItem:e.activityItems[t.commentActivityId]}},e=>({toggleLike:(t,n,o)=>e(Object(pe.a)(t,1,n,o))})),Object(ge.b)({name:"BoardActivityCommentFeedResource",key:"replyResource",options:e=>({page_size:1,activityId:e.commentActivityItem&&e.commentActivityItem.id,parentType:e.commentActivityItem&&e.commentActivityItem.type,redux_normalize_feed:!0})},{allowStale:!1}))((function({commentActivityId:e,commentActivityItem:t,parentActivity:n,replyResource:a,showReplies:r,toggleLike:s}){const{comment_count:l,content:{text:c},created_at:d,reaction_by_me:u,type:p,user:m}=t,[f,y]=Object(o.useState)(!1),b=r&&l?l-1:0,v=!a.isLoaded,E=!!a.isLoaded&&!!a.data&&a.data.length>0&&a.data[0].id,w=i.a.createElement(g.K,{size:"xs",weight:"bold"},Object(L.b)(D.a.ngettext("{{ moreRepliesCount }} more comment","{{ moreRepliesCount }} more comments",b,"Number of more comments indicator for board comments under pin cards"),{moreRepliesCount:b}));return i.a.createElement(g.c,{display:"flex",direction:"row",marginTop:2,marginBottom:1},i.a.createElement(g.c,{minWidth:32,minHeight:32},i.a.createElement(g.a,{src:m.image_medium_url,name:m.username})),i.a.createElement(g.c,{display:"flex",direction:"column",marginLeft:2,width:"100%"},i.a.createElement(g.P,{onTouch:({event:t})=>{s(e,p,!!u)},onMouseEnter:({event:e})=>{y(!0)},onMouseLeave:({event:e})=>{y(!1)}},i.a.createElement(g.c,{display:"flex",direction:"row"},i.a.createElement(g.c,{maxWidth:130},i.a.createElement(g.K,{size:"sm",weight:"bold"},Object(me.e)(m))),i.a.createElement(g.c,{marginLeft:1},i.a.createElement(g.K,{size:"sm",color:"gray"},Object(me.f)(d)))),i.a.createElement(g.c,{display:"flex",direction:"row"},i.a.createElement(g.c,{width:"100%",maxWidth:ye},i.a.createElement(g.K,{size:"sm"},c)),i.a.createElement(g.c,{marginTop:-2,marginRight:1,marginLeft:2,minWidth:12},!!u&&i.a.createElement(g.n,{icon:"heart",accessibilityLabel:D.a._("Liked","Accessibility lable for like sent reaction icon to comments and replies under pin rep"),color:"red",size:12}),!u&&f&&i.a.createElement(g.n,{icon:"heart-outline",accessibilityLabel:D.a._("Like","Accessibility lable for send like reaction icon to comments and replies under pin rep"),color:"darkGray",size:12})))),b>0&&i.a.createElement(g.c,{marginTop:2,marginBottom:1},n&&n.pin?i.a.createElement(h.b,{to:`/pin/${n.pin.id}/`},w):w),r&&(v?i.a.createElement(g.c,{paddingX:1,marginTop:2,width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"2px solid #efefef"}}},i.a.createElement(g.c,{color:"lightGray",width:"100%",height:48})):i.a.createElement(fe,{parentActivity:t,replyActivityId:E||null}))))})),ve=n("ExRq");const Ee=2e3,we=1,_e=2,Oe=17,Ce={background:"transparent",border:"0",display:"inline-block",fontSize:"14px",lineHeight:`${Oe}px`,maxHeight:"34px",outline:"0",overflowX:"hidden",resize:"none",whiteSpace:"pre-wrap",width:"100%",wordBreak:"break-all"},Se={SET_COMMENT_VALUE:0,SET_INPUT_ROWS_VALUE:1,COMMENT_ADDED:2},Ie="",Te=!1,xe=we;function Re(e,t){switch(t.type){case Se.SET_COMMENT_VALUE:return{...e,commentValue:t.commentValue||Ie};case Se.SET_INPUT_ROWS_VALUE:return{...e,inputRowsValue:t.inputRowsValue||xe};case Se.COMMENT_ADDED:return{...e,commentValue:Ie,commentAdded:!0,inputRowsValue:xe};default:return e}}var Pe=Object(he.compose)(Object(a.connect)(({activityItems:e,groupBoardGridComments:t,viewer:n},{pin:{board_activity:o}})=>{const i=o&&o.id,a=i?e[i]:null;return{boardActivityComments:(i&&t[i]||[]).map(t=>e[t]),parentActivity:a,viewer:n}},e=>({createActivityItem:Object(he.bindActionCreators)(ve.a,e)})))((function({boardActivityComments:e,createActivityItem:t,parentActivity:n,pin:a,viewer:r}){const[s,l]=Object(o.useReducer)(Re,{commentValue:Ie,commentAdded:Te,inputRowsValue:xe,showMoreComment:!!n&&n.comment_count>3});if(!r.isAuth||!e||0===e.length)return null;const c=s.commentValue.length>0,d={color:c?"black":"#8e8e8e",...Ce},u=e.length>0?e[0].id:null,p=e.length>1?e[1].id:null,m=e.length>2?e[2].id:null,f=e[0].comment_count>0,y=p&&e[1].comment_count>0&&!f,b=m&&!f&&!y,v=b?3:2,E=e.length<3?e.length:v,w=n?n.comment_count-E:0,_=i.a.createElement(g.K,{size:"xs",weight:"bold"},Object(L.b)(D.a.ngettext("{{ moreCommentsCount }} more comment","{{ moreCommentsCount }} more comments",w,"Number of more comments indicator for board comments under pin cards"),{moreCommentsCount:w})),O=i.a.createElement(g.c,{marginStart:2},i.a.createElement(g.K,{size:"sm",weight:"bold"},D.a._("View your comment","Text after user added comments under group board pin grid"))),C=i.a.createElement(g.c,{display:"flex",direction:"column",width:"100%"},s.showMoreComment&&!!w&&i.a.createElement(g.c,{marginTop:2,marginBottom:1},n&&n.pin?i.a.createElement(h.b,{to:`/pin/${n.pin.id}/`},_):_),b&&i.a.createElement(be,{commentActivityId:m,parentActivity:n}),p&&i.a.createElement(be,{commentActivityId:p,parentActivity:n,showReplies:y}),i.a.createElement(be,{commentActivityId:u,parentActivity:n,showReplies:f}));return i.a.createElement(g.c,{display:"flex",direction:"column"},e.length>0&&C,i.a.createElement(g.c,{alignItems:"center",display:"flex",direction:"row",marginTop:2},i.a.createElement(g.c,{height:32,minWidth:32},i.a.createElement(g.a,{src:r.imageMediumUrl,name:r.username})),s.commentAdded&&(n&&n.pin?i.a.createElement(h.b,{to:`/pin/${n.pin.id}/`},O):O),!s.commentAdded&&i.a.createElement(o.Fragment,null,i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{borderRadius:"16px",backgroundColor:"#efefef"}},width:"100%",alignItems:"center",display:"flex",marginLeft:2,marginRight:2,paddingX:2,paddingY:1},i.a.createElement("textarea",{maxLength:Ee,name:"commentTextBox",placeholder:D.a._("Add comment","Placeholder for comment text field under pin rep"),style:d,rows:s.inputRowsValue,value:s.commentValue,onChange:e=>{if(l({type:Se.SET_COMMENT_VALUE,commentValue:String(e.target.value)}),e&&e.target){const t=e.target.rows;e.target.rows=we;const n=Math.floor(e.target.scrollHeight/Oe);n===t&&(e.target.rows=n),n>=_e&&(e.target.rows=_e,e.target.scrollTop=e.target.scrollHeight),l({type:Se.SET_INPUT_ROWS_VALUE,inputRowsValue:n<_e?n:_e})}}})),c&&i.a.createElement(g.c,{width:32,height:32,shape:"circle",color:"red"},i.a.createElement(g.o,{accessibilityLabel:D.a._("send","Accessibility label for send comment under pin rep"),bgColor:"transparent",icon:"send",iconColor:"white",size:"sm",onClick:()=>{if(!n)return;const e=JSON.stringify([]);t({imageSignatures:"",objectIds:[],parentId:n.id,parentType:n.type,text:s.commentValue,tags:e}),l({type:Se.COMMENT_ADDED})}})))))})),ke=n("/5zs"),Me=n("pLLR");const Ne=6,Ae=10;var De=Object(he.compose)(Object(a.connect)((function({pins:e},{pinId:t}){const n=e[t]||{};return{carouselData:Object(Q.a)(n),pin:n}}),(function(e){return{changeCarouselSlotIndex:(t,n)=>e(Object(J.a)(t,n))}})),Me.e)((function({carouselData:e,changeCarouselSlotIndex:t,pin:n,pinId:o,requestContext:a}){const{componentType:r,viewParameter:s,viewType:l}=Object(U.b)(),{carousel_slots:c=[],id:d,index:u}=e||{},p=new ke.c(a,"web_carousel_pip_improvements").enabled();a.experiments.flush();const h=p?Ae:Ne,m=e=>({event:i})=>{i.preventDefault(),i.stopPropagation(),void 0!==t&&(t(o,e),Object(ee.a)(108,{component:r,eventData:{pinCarouselSlotEventData:{carouselDataId:Number(d),carouselSlotId:c[u]&&Number(c[u].id),carouselSlotIndex:u,toCarouselSlotIndex:e}},objectId:o,view:l,viewParameter:s,...Object(w.a)(n)||{}}))};return i.a.createElement(g.c,{display:"flex",dangerouslySetInlineStyle:{__style:{marginLeft:-3,marginRight:-3}}},c.map((e,t)=>i.a.createElement(g.c,{key:o+t,dangerouslySetInlineStyle:{__style:{marginLeft:3,marginRight:3}}},i.a.createElement(g.P,{fullWidth:!1,shape:"circle",onTouch:m(t)},i.a.createElement(g.c,{"data-test-id":"ellipsis-size",height:h,width:h,dangerouslySetInlineStyle:{__style:{backgroundColor:t===u?"#555":"lightGray"}},shape:"circle"})))))})),Le=n("4Utz"),je=n("q7Wf");function Be({feedbackType:e,pin:t}){const{pinner:n,source_interest:o}=t,{full_name:a,username:r}=n||{},{name:s}=o||{},l="topic"===e,c=!l&&"followed"===e,d=`/${r}/`,u=Object(je.g)(s),p=`/search/pins/?q=${encodeURIComponent(u)}&rs=image_only_attribution`,m=l?p:d,f={topic:D.a._("From {topic}","attribution on pin rep"),followed:D.a._("From {pinnerName}","attribution on pin rep"),pfyBoard:D.a._("Picked for you","attribution on pin rep"),pfy:D.a._("Picked for you","attribution on pin rep")}[e];if(!f)return null;if(c||l){const e=0===f.indexOf("{"),t=l?s:a,n=e?f.slice(f.indexOf("}")+1):f.slice(0,f.indexOf("{"));return e?i.a.createElement(g.c,null,i.a.createElement(h.b,{to:m},i.a.createElement(g.K,{weight:"bold",inline:!0,size:"sm",truncate:!0},t)),i.a.createElement(g.K,{inline:!0,size:"sm"},n)):i.a.createElement(g.c,null,i.a.createElement(g.K,{inline:!0,size:"sm"},n),i.a.createElement(h.b,{to:m},i.a.createElement(g.K,{color:"darkGray",weight:"bold",inline:!0,size:"sm",truncate:!0},t)))}return i.a.createElement(g.c,null,i.a.createElement(Le.a,{pin:t},i.a.createElement(g.K,{color:"darkGray",overflow:"normal",size:"sm",weight:"bold"},f)))}var ze=n("Te6n"),Fe=n("US8k"),Ue=n("oRao"),He=n("0SCs");function Ge({pin:e}){const{anyEnabled:t}=Object(He.a)("px_pinstats_90_day_default_on_grid"),{isStoryPin:n,isVideo:o}=Object(S.a)(e),a=function(e){const{aggregated_pin_data:t,creator_analytics:n}=e,{creator_analytics:o}=t||{},{isStoryPin:i}=Object(S.a)(e);return!n||!i&&o?o:n}(e);if(!a)return null;const r=o?[{iconType:"play",displayText:D.a._("Video views","Label for views of a video pin on closeup page"),field:"video_views",align:"start"},{iconType:"clock",displayText:D.a._("Avg. time","Label for average time of a video pin on closeup page"),field:"video_average_time",align:"center",valueFormat:"TIME"},{iconType:"angled-pin",displayText:D.a._("Saves","Label for saves of a video pin on closeup page"),field:"save",align:"end"}]:[{iconType:"eye",displayText:D.a._("Impressions","Label for impressions of a pin on closeup page"),field:"impression",align:"start"},{iconType:"angled-pin",displayText:D.a._("Saves","Label for saves of a pin on closeup page"),field:"save",align:"center"},{iconType:"arrow-up-right",displayText:D.a._("Link clicks","Label for click-throughs of a pin on closeup page"),field:"clickthrough",iconSize:10,align:"end"}],s=t?"90d":"30d",l=(o||n)&&a.all_time?a.all_time:a[s];return l&&0!==Object.keys(l).length?i.a.createElement(g.c,{display:"flex"},r.map(({align:e,displayText:t,field:n,iconType:o,iconSize:a=12,valueFormat:r})=>i.a.createElement(g.c,{alignItems:"center",column:4,display:"flex",justifyContent:e,key:n},i.a.createElement(g.c,{display:"inlineBlock",marginRight:1},i.a.createElement(g.n,{accessibilityLabel:t,color:"darkGray",icon:o,size:a})),i.a.createElement(g.K,{inline:!0,size:"sm"},function(e,t="COUNT"){return Number.isInteger(e)?"TIME"===t?Object(Fe.a)(e):i.a.createElement(Ue.a,{value:e,shortform:!0,shortformMaximumFractionDigits:1}):"-"}(l[n],r))))):null}var Ve=n("h4v/");function We(e){if(!window||!window.prefetchCompletion||!window.prefetchCompletion[e])return"0";const{downloadedAssets:t,totalAssets:n}=window.prefetchCompletion[e];return n?(t/n*100).toFixed(3).toString():"-1"}var qe=n("4cpq"),Ke=n("PVJQ");function $e({children:e,componentType:t,contextLogData:n,elementType:o,pin:a,viewParameter:r,viewType:s}){const l=Object(U.b)(),{carousel_data:c,id:d,link:u,tracked_link:p}=a;let m,f,y="one-tap-desktop";if(c){const{carousel_slots:e=[],id:t,index:n}=c;e[n]&&e[n].link&&(m=e[n].link),f={carousel_slot_id:e[n]&&e[n].id,carousel_data_id:t,carousel_slot_index:n},y+="-carousel"}else m=p||u;return i.a.createElement(g.c,{"data-test-id":"otpp"},i.a.createElement(qe.a,{id:y},i.a.createElement(h.b,{auxData:f,deeplinkUrls:Object(Ke.m)(d),external:!0,onClick:()=>{const e=Ve.a.getInstance(),o=e.getViewFromContext();Object(ee.a)(12,{...n,view:s||l.viewType,viewParameter:r||l.viewParameter,component:t||l.componentType,objectId:d,grid_index:l.slotIndex,pin_id:d,prefetch_percentage_complete:We(u||"")}),Object(ee.a)(13,{closeup_navigation_type:"web_closeup",objectId:d,component:t||l.componentType,view:3,...l.contextLogData,...n}),e.addViewToContext(o)},pinId:d,style:{cursor:"pointer",display:"block"},to:m},e)))}function Ye(e){const{pin:t}=e,{isOneTap:n}=Object(S.a)(t),o=n?$e:Le.a;return i.a.createElement(o,e)}function Xe(e){const{isProduct:t}=Object(S.a)(e);return t&&Object(w.b)(e)||""}var Ze=n("Zxas");function Je({pin:e,singleLineMaxLength:t}){const n=Xe(e),o=Object(Ze.a)(n,t),a=i.a.createElement(g.K,{color:"darkGray",overflow:"normal",size:"sm",weight:"normal"},o);return i.a.createElement(Ye,{pin:e},a)}function Qe({numberOfLines:e=2,pin:t,singleLineMaxLength:n,pinTitle:o}){const a=e*n,r=Object(Ze.a)(o,a);return i.a.createElement(Ye,{pin:t},i.a.createElement(g.K,{color:"darkGray",overflow:"normal",size:"sm",weight:"bold"},r))}var et=n("+tKw");const tt=1.8;function nt({pin:e,showGroupBoardAvatar:t,singleLineMaxLength:n,userNote:o}){const{pinner:a}=e;if(!a)return null;const{full_name:r,image_small_url:s}=a,l=tt*n,c=Object(Ze.a)(o,l);return i.a.createElement(Ye,{pin:e},i.a.createElement(g.c,{alignItems:"center",display:"flex"},!t&&i.a.createElement(g.c,{flex:"none",marginEnd:2},i.a.createElement(g.a,{name:r,size:"sm",src:s})),i.a.createElement(g.c,{"data-test-id":"PinRep-UserNote"},i.a.createElement(g.K,{overflow:"normal",size:"sm"},i.a.createElement(et.a,{text:c,options:{hashtags:{source:"hashtag_closeup"}}})))))}var ot=n("XLg/");const it=Object(o.lazy)(()=>n.e("BoardActivityPinRepReactionsCommon").then(n.bind(null,"TbX8"))),at={container:{padding:"8px 6px 16px"},groupBoardContainer:{padding:"8px 6px 8px"},imageOnlyAttribution:{hidden:{opacity:0,transition:`opacity ${ot.a}ms ease`},visible:{opacity:1}}};var rt=Object(o.memo)((function({attributionType:e,blockClickEvents:t,feedbackData:n,feedbackType:o,hoverTransitionState:a,isDarkPromoter:r,pin:s,board:l,pinTitle:c,setForcePrimary:d,showAvatarAndNameOnLeft:u,showBoardActivityComments:p,showBoardActivityReply:h,showCarouselEllipsis:m,showGroupBoardAvatar:f,showOverflowMenu:y,showPinStats:b,showReactions:v,showSource:E,singleLineMaxLength:w,titleLines:_,useLegoPadding:O,userNote:C}){const{board_activity:S,id:I}=s,T=c||E,x=T||C,{avatarUrl:R,attributionNameLink:P,name:k}=le(s);let M=null;"default"===e?M=i.a.createElement(ue,{feedbackData:n,feedbackType:o,pin:s,pinTitle:c,setForcePrimary:d,isDarkPromoter:r}):"image-only-credit"===e&&(M=i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:at.imageOnlyAttribution["active"===a?"visible":"hidden"]}},i.a.createElement(Be,{pin:s,feedbackType:o})));const N=i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:l&&l.is_collaborative&&O?at.groupBoardContainer:at.container}},m&&i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:T||f||"none"!==e?{marginBottom:"6px"}:{}},display:"flex",justifyContent:"center"},i.a.createElement(g.c,{flex:"none"},i.a.createElement(De,{pinId:I}))),b&&i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{marginBottom:"6px"}},flex:"grow",width:"100%"},i.a.createElement(Ge,{pin:s})),i.a.createElement(g.c,{display:"flex"},i.a.createElement(g.c,{flex:"grow"},x&&i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:"none"!==e||v?{marginBottom:"6px"}:{}}},i.a.createElement(Qe,{numberOfLines:_,pin:s,pinTitle:c,singleLineMaxLength:w}),E&&i.a.createElement(Je,{pin:s,singleLineMaxLength:w}),C&&i.a.createElement(g.c,{marginTop:T?1:0},i.a.createElement(nt,{pin:s,showGroupBoardAvatar:f,singleLineMaxLength:w,userNote:C}))),i.a.createElement(g.c,{alignItems:"center",display:"flex"},i.a.createElement(g.c,{flex:"grow"},M),y&&i.a.createElement(g.c,{flex:"none"},i.a.createElement(ze.default,{feedbackData:n,feedbackType:o,pin:s,pinTitle:c,setForcePrimary:d,transparentBackground:!0}))),u&&i.a.createElement(g.c,{alignItems:"center",display:"flex",marginTop:1,marginBottom:1},i.a.createElement(ie,{attributionNameLink:P,avatarUrl:R,name:k}),i.a.createElement(g.c,{marginLeft:2,flex:"grow"},i.a.createElement(g.K,{size:"sm"},k)),i.a.createElement(g.c,null,i.a.createElement(F.a,null,i.a.createElement(it,{pinId:s.id,board:l,activityId:S&&S.id||s.id,showReply:h,canShowComments:!p})))),v&&!u&&i.a.createElement(g.c,{position:"relative","data-test-id":"board-activity-reactions",minHeight:16},i.a.createElement(F.a,null,i.a.createElement(it,{pinId:s.id,board:l,activityId:S&&S.id||s.id,showReply:h,canShowComments:!p})))),!u&&f&&i.a.createElement(g.c,{flex:"none",marginRight:1},i.a.createElement(ie,{attributionNameLink:P,avatarUrl:R,name:k}))),p&&i.a.createElement(Pe,{pin:s}));return t?i.a.createElement("div",{style:{pointerEvents:"none"}},N):z(N)})),st=n("4+TC"),lt=n("XCz/");const ct=Object(o.lazy)(()=>Promise.all([n.e(15),n.e("PinRepEditButtonCommon")]).then(n.bind(null,"jHGc"))),dt=Object(o.lazy)(()=>Promise.all([n.e(15),n.e("PinPersistentOneClickSaveCommon")]).then(n.bind(null,"f6y4"))),ut=Object(o.lazy)(()=>Promise.all([n.e(11),n.e("PinSaveButtonCommon")]).then(n.bind(null,"rO08"))),pt=Object(o.lazy)(()=>Promise.all([n.e(11),n.e(15),n.e("PinBetterSaveCommon")]).then(n.bind(null,"fEA9"))),ht=Object(o.lazy)(()=>n.e("BoardActivityPinRepLikeButtonCommon").then(n.bind(null,"nGh2"))),mt=Object(o.lazy)(()=>n.e("PinPromoteButtonCommon").then(n.bind(null,"ewYc")));function ft({derivedSaveButtonOptions:e,onToggleFlyout:t,onToggleModal:n,pin:a,board:r,showEditButton:s,showLikeButton:l,supportsReactionBar:c}){const[d,u]=Object(o.useState)(!1),{carousel_data:p,id:h,savedInfo:m}=a,f=Object(o.useRef)(!!m),{viewParameter:y,viewType:b}=Object(U.b)(),v=Object(W.a)(101,{element:0,objectId:h});let E=null;const w={onToggleModal:t,view:b,viewParameter:y,useLegoStyles:!0};if(!d)if("classic"===e.type||"controlled"===e.type){const{renderPinSaveTooltip:t}=e;E=i.a.createElement(g.c,{display:"flex",justifyContent:"end"},i.a.createElement(F.a,null,i.a.createElement(g.c,{"data-test-id":"pin-save-button"},z(i.a.createElement(ut,{icon:!1,onClickCallback:v,onToggleModal:n,oneTapSave:"controlled"===e.type&&e,pin:a,renderPinSaveTooltip:t,variant:"lego"})))))}else if("inline"===e.type){const o=a,{initialSelection:r,onSave:s,renderPinSaveTooltip:l}=e;E=i.a.createElement(F.a,null,i.a.createElement(g.c,{"data-test-id":"better-save"},z(i.a.createElement(pt,{initialSelection:r,onSave:s,onToggleFlyout:t,onToggleModal:n,pin:o,renderPinSaveTooltip:l,renderSavedStatus:({savedInfo:e})=>e&&z(i.a.createElement(st.a,{isNewlySaved:!f.current,name:e.title,url:e.url})),useMasonryFlyout:!0,variant:"lego-pin",viewParameter:y}))))}else"persistentOneClickSave"===e.type?E=i.a.createElement(F.a,null,i.a.createElement(g.c,{"data-test-id":"persistent-one-click-save"},z(i.a.createElement(dt,{...w,saveOptions:e,pin:a})))):"promote"===e.type&&(E=i.a.createElement(g.c,{display:"flex",justifyContent:"end"},i.a.createElement(F.a,null,i.a.createElement(g.c,{"data-test-id":"pin-promote-button"},z(i.a.createElement(mt,{pin:a}))))));let _=null;return s?_=i.a.createElement(F.a,null,z(i.a.createElement(g.c,{"data-test-id":"edit-button",display:"inlineBlock"},i.a.createElement(ct,{...w,carouselSlotCurrentIndex:p&&p.index,component:0,pinId:h,style:{size:"sm"}})))):l&&(_=i.a.createElement(F.a,null,i.a.createElement(g.c,{"data-test-id":"like-button"},i.a.createElement(lt.a,{name:"group_boards_reactions",activate:!1},({anyEnabled:e,customActivate:t})=>z(i.a.createElement(ht,{pin:a,board:r,activateReactionsExperiment:t,inReactionsExperiment:e,onShowReactionsBar:()=>u(!0),onHideReactionsBar:()=>u(!1),supportsReactionBar:c,useLegoStyles:!0})))))),i.a.createElement(g.c,{display:"flex",margin:3},_&&i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{marginRight:"auto"}},flex:"grow"},_),E&&i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{marginLeft:"auto"}},flex:"grow",overflow:"hidden"},E))}var gt=n("7wXf"),yt=n("VJm5"),bt=n("3qdF"),vt=n("qhFy"),Et=n("HOY+");const wt=55;function _t({allowImageCropping:e,blockClickEvents:t,cropHeight:n,cropWidth:a,isHovering:r,isSocialSeasonalBoard:s=!1,onError:l,onLoad:c,pin:d,resolution:u="default",rootMargin:p,showCarousel:h,showPromotedVideos:m}){const{slotIndex:f,viewParameter:y,viewType:b}=Object(U.b)(),{id:v="",aggregated_pin_data:E,image_signature:w}=d,{pin_tags_chips:_}=E||{},{isVideo:O,isPromoted:C,isGif:I}=Object(S.a)(d);let T=null;if(!O||!m&&C)if(h)T=i.a.createElement(g.c,{"data-test-id":"pinrep-carousel"},i.a.createElement(yt.a,{cropHeight:n,cropWidth:a,onError:l,onLoad:c,highResOnly:"high-res"===u,lowResOnly:"low-res"===u,pinId:v,showCarouselBadge:!1}));else{const t=e?function({images:e,image_crop:t}){const n=e&&e["236x"].height;if(t&&(0!==t.min_y||1!==t.max_y)){const{min_y:e,max_y:o}=t;return{marginTop:`${e>0?-1*e*n:0}px`,marginBottom:`${o<1?Math.round(-1*(1-o)*n):0}px`}}return{}}(d):{};T=i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:t},"data-test-id":"pinrep-image",minHeight:wt},i.a.createElement(vt.a,{pin:d,highResOnly:"high-res"===u,lowResOnly:"low-res"===u,onLoad:c,onError:l,cropHeight:n,cropWidth:a,animateGif:I&&s}))}else T=i.a.createElement(g.c,{"data-test-id":"pinrep-video"},i.a.createElement(Et.a,{rootMargin:p,inAdsDesktopVideoExperiment:O&&m,pin:d,onLoad:c,viewType:b,viewParameter:y,highResOnly:"high-res"===u,lowResOnly:"low-res"===u,onError:l,isExperimentalPinRep:!0}));const x=i.a.createElement(g.u,{wash:!0},T);return t?i.a.createElement(o.Fragment,null,x,_&&i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{marginTop:1}}},i.a.createElement(bt.a,{pin:d,enableCloseupLink:!0}))):i.a.createElement(Ye,{pin:d,contextLogData:{grid_index:f,image_signature:w},elementType:35},x,_&&i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{marginTop:1}}},i.a.createElement(bt.a,{pin:d,enableCloseupLink:!1})))}var Ot=n("tXBB");const Ct=60,St=40,It=60;function Tt(e){return e<Ct+St+It?"header-only":"none"}function xt(e){const[t,n]=Object(o.useState)(e.current?Tt(e.current.clientHeight||0):"none");return function(e,t){const n=Object(o.useRef)();Object(o.useEffect)(()=>{const o=e.current;if(!o)return;const i=n.current;i&&i.width===o.offsetWidth&&i.height===o.offsetHeight||(n.current={width:o.offsetWidth||0,height:o.offsetHeight||0},t&&t(n.current))}),n.current}(e,({height:e})=>{const o=Tt(e);o!==t&&n(o)}),t}const Rt=4e3;const Pt={impressed:{backgroundColor:"#adebad",opacity:.5}},kt=()=>void 0!==H.a.getQueryStringParams().debug_impression_log;function Mt({debugImpressionState:e="paused",slotIndex:t}){return"paused"===e?null:i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:Pt.impressed},"data-test-id":"debug-pin-impressions",position:"absolute",top:!0,left:!0,right:!0,bottom:!0},i.a.createElement(g.c,{position:"absolute",top:!0,left:!0,padding:2,color:"darkGray"},i.a.createElement(g.K,{size:"xl",color:"white"},t)))}var Nt=n("I7CA"),At=n("eqXv"),Dt=n("tMjw");const Lt={background:{base:{transition:"all 250ms",opacity:0},blurred:{backgroundPosition:"50% 50%",backgroundSize:"cover",borderRadius:Dt.a,filter:"blur(20px)",opacity:1}},backdrop:{base:{transition:"all 250ms"},blurred:{backgroundColor:"rgba(0,0,0,0.4)"}},feedbackOverlayContainer:{base:{opacity:0,transition:"all 250ms"},visible:{opacity:1}},navigateLinkStyle:{color:"white",textDecorationColor:"white",cursor:"pointer"}},jt=["followed","related","search"],Bt=["pfy","pfyBoard"];function zt({feedbackType:e,isHomefeedControlPanelExp:t,pin:n}){const[a,r]=Object(o.useState)(!1),[s,l]=Object(o.useState)(!1);Object(o.useEffect)(()=>r(!0),[]);const c=()=>l(!0),{feedbackText:d,images:u,showFeedbackOverlay:p,undoAction:m,undoText:f}=n,y=u&&u["236x"].url,{image:b,subTitle:v,title:E,unfollow:w}=d,_=t&&!jt.includes(e),O=Bt.includes(e);return i.a.createElement(g.c,{color:"transparent",dangerouslySetInlineStyle:{__style:{borderRadius:Dt.a}},"data-test-id":"obscured-overlay",overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0},i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{borderRadius:Dt.a}},margin:-4,overflow:"hidden",position:"absolute",top:!0,left:!0,bottom:!0,right:!0},y&&i.a.createElement(Nt.a,{additionalStyles:{...Lt.background.base,...a?Lt.background.blurred:{},backgroundImage:`url("${y}")`}}),y&&i.a.createElement(Nt.a,{additionalStyles:{...Lt.background.base,...a?Lt.background.blurred:{},backgroundImage:`url("${y}")`}}),i.a.createElement(Nt.a,{additionalStyles:{...Lt.backdrop.base,...a?Lt.backdrop.blurred:{}}})),i.a.createElement(g.c,{dangerouslySetInlineStyle:{__style:{...Lt.feedbackOverlayContainer.base,...!p&&a?Lt.feedbackOverlayContainer.visible:{}}},height:"100%",padding:4,position:"relative",width:"100%"},i.a.createElement(g.c,{display:"flex",direction:"column",height:"100%",justifyContent:"between"},i.a.createElement(g.c,{className:"ObscuredOverlay","data-test-id":"PinFeedbackConfirmation",maxWidth:216},i.a.createElement(g.c,{marginBottom:2},i.a.createElement(g.K,{color:"white",size:"xl",weight:"bold"},E)),i.a.createElement(g.c,{display:"flex"},b&&i.a.createElement(g.c,{marginRight:3},i.a.createElement(g.u,{width:b.width,height:b.height,shape:"rounded",wash:!0},i.a.createElement(g.p,{alt:v||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:b.url||""}))),i.a.createElement(g.K,{color:"white",overflow:"normal"},v,_&&i.a.createElement(h.b,{className:"underlineLink",to:"/edit",onClick:()=>{Object(ee.a)(101,{view:1,viewParameter:92,element:11347})},style:Lt.navigateLinkStyle},D.a._(" Tune your home feed","Text on the button to navigate to homefeed control"))))),!m&&!s&&w&&!O&&i.a.createElement(g.d,{color:"white",onClick:()=>Object(At.a)(w.action,w.actionOptions,c),text:D.a._("Unfollow","Text on the button to unfollow a specific board / user")}),m&&i.a.createElement(g.d,{color:"white",onClick:m,text:f||D.a._("Undo","Text on the button to unfollow hiding a pin")}))))}function Ft(e){return"active"===e?"visible":"inactive"===e?"none":"hidden"}function Ut(...e){return e.includes("visible")?"visible":e.includes("hidden")?"hidden":"none"}const Ht=228;var Gt=Object(o.memo)((function({actionBarProps:e,blockClickEvents:t,currentlyPlayingVideo:n,disableHover:a=!1,footerProps:r,forcePrimaryContentVisibility:s,impressionsDebuggerProps:l,onError:c,onLoad:d,obscuredPinOverlayProps:u,pin:p,pinVisualProps:h,presentationProps:m,primaryContentProps:f,selectionState:y,secondaryContentProps:b,showAccessoryContent:v,showActionBar:E,showFooter:w,showImpressionsDebugger:_,showSignalDebugger:O,showObscuredPinOverlay:C,showPrimaryAndSecondaryContent:S,viewType:I}){const{savedInfo:T}=p,[x,R]=Object(o.useState)(!1),P=Object(ot.b)(x);let{isHovering:k,hoverTransitionState:M,handleMouseOver:N,handleMouseLeave:A}=function(){const[e,t]=Object(o.useState)(!1);return{isHovering:e,hoverTransitionState:Object(ot.b)(e,0,ot.a),handleMouseOver:Object(o.useCallback)(()=>t(!0),[t]),handleMouseLeave:Object(o.useCallback)(()=>t(!1),[t])}}();a&&(k=!1,M="inactive");const D=Object(ot.b)(!!T),L=Ft(D),j=Ft(M),B=Ft(M),z=Ft(P),F=Ft(D),U={primaryContentVisibility:Ut(B,z,F),secondaryContentVisibility:(H=Ut(B,z,F),"none"===H?"visible":"visible"===H?"none":"hidden"),actionBarVisibility:Ut(B,z),accessoryContentVisibility:"none"};var H;const G=e=>R(e),V=e=>{R(e),e||A()};let W=null;s&&(U.primaryContentVisibility="visible"),"none"!==U.primaryContentVisibility&&S&&(W=i.a.createElement(ft,{pin:p,onToggleFlyout:G,onToggleModal:V,...f}));let q=null;const K=Object(o.useRef)(!0),$=K.current;K.current=!1;const Y=function(e,t){const{carousel_data:n}=e,{index:i}=n||{},[a,r]=Object(o.useState)(!n||t),s=Object(o.useRef)(i),l=Object(o.useRef)(null);if(n){const e=s.current;s.current=i,(i!==e||t)&&(l.current&&clearTimeout(l.current),r(!0),l.current=setTimeout(()=>{r(!1),l.current=null},Rt))}return Object(o.useEffect)(()=>()=>{l.current&&clearTimeout(l.current)},[]),a}(p,$),X=Ft(Object(ot.b)(Y));U.secondaryContentVisibility=function(...e){return e.includes("none")?"none":e.includes("hidden")?"hidden":"visible"}(U.secondaryContentVisibility,X),q=(b.allowShoppingPriceIndicator||"none"!==U.secondaryContentVisibility)&&S&&!n&&i.a.createElement(g.c,{margin:2},i.a.createElement(gt.a,{pin:p,...b}));let J=null;v&&(J=i.a.createElement(ne,{pin:p}),U.accessoryContentVisibility=Ft(M)),h.isSocialSeasonalBoard&&(e.showShareButton=!1);const Q=E?i.a.createElement(Z,{onToggleFlyout:G,onToggleModal:V,pin:p,setForcePrimary:R,...e}):null;let ee=null;w&&(ee=i.a.createElement(rt,{blockClickEvents:t,hoverTransitionState:"image-only-credit"===r.attributionType?M:null,pin:p,setForcePrimary:R,...r})),h.isSocialSeasonalBoard&&(ee=i.a.createElement(g.c,{"data-test-id":"social-seasonal-footer",marginTop:2,marginBottom:3,width:"100%"},i.a.createElement(g.c,{margin:"auto",width:Ht},i.a.createElement(Ot.a,{isFlyoutOpen:x,onFlyoutDismiss:()=>G(!x),onToggleFlyout:()=>G(!x),pinId:p.id,sendType:"pin",shownWithinMasonry:!0,viewType:I}))));const te=_&&i.a.createElement(Mt,l),oe=O&&p.debug_info_html&&i.a.createElement(g.c,{paddingY:1},i.a.createElement("pre",null,p.debug_info_html)),ie=Object(o.useRef)();"header-only"===xt(ie)&&(U.actionBarVisibility="none",U.accessoryContentVisibility="none");const ae=C?i.a.createElement(zt,{pin:p,...u}):null;return i.a.createElement("div",{onMouseOver:N,onMouseLeave:A,"data-test-id":"pin","data-test-pin-id":p.id},i.a.createElement(Dt.b,{visualOverlayVisibility:j,savedOverlayVisibility:L,primaryContent:W,primaryContentVisibility:U.primaryContentVisibility,secondaryContent:q,secondaryContentVisibility:U.secondaryContentVisibility,accessoryContent:J,accessoryContentVisibility:U.accessoryContentVisibility,actionBar:Q,actionBarVisibility:U.actionBarVisibility,footer:ee,selectionState:y,debugContent:te,signalDebuggerContent:oe,obscuredPinOverlay:ae,...m},i.a.createElement(g.c,{ref:ie},i.a.createElement(_t,{blockClickEvents:t,isHovering:k,onError:c,onLoad:d,pin:p,...h}))))})),Vt=n("gC5q");const Wt=["BrioCloseupRelatedProducts","CloseupRelatedProducts","UserProfilePinGrid"];function qt({attributionOption:e,board:t,boardActivityOptions:n,feedbackData:o,feedbackType:i,hasCarouselData:a,inChangeTitlesExp:r,isGroupBoard:s,isLegoGroupBoardsEnabled:l,isOwnBoard:c,pin:d,showAvatarAndNameOnLeft:u,showBoardActivityComments:p,showImageOnly:h,surface:m,viewerIsPartner:f}){const{isPromoted:g}=Object(S.a)(d),{promoter:y,unified_user_note:b}=d,v=function({attributionOption:e,feedbackType:t,isGroupBoard:n,pin:o,showImageOnly:i,surface:a}){const{is_downstream_promotion:r,promoter:s}=o;if("promoted"===t||s&&!r)return"default";if(Wt.includes(a))return"none";if(n)return"none";let l="default";return e&&("image-only"===e?l="image-only-credit":"hide"===e&&(l="none")),"followed"!==t||i?"none":l}({attributionOption:e,feedbackType:i,isGroupBoard:s,pin:d,showImageOnly:h,surface:m}),E=h?"":I({inChangeTitlesExp:r,isGroupBoard:s,pin:d,surface:m}),w=!g&&!h&&Boolean(Xe(d)),_=r&&"BaseBoardPinGrid"===m&&!g&&b?b.trim():null,O=g;let C=2;g?C=3:(w||"none"!==v)&&(C=1);let T=s?25:30;["BrioCloseupRelatedProducts","CloseupRelatedProducts"].includes(m)&&(T=23);let x=!1;return"BaseBoardPinGrid"===m?x=c&&f:"UserProfilePinGrid"===m&&(x=f),{attributionType:v,feedbackData:o,feedbackType:i,isDarkPromoter:!g&&!!y,pinTitle:E,showAvatarAndNameOnLeft:u,showBoardActivityComments:p,showBoardActivityReply:"no-reply"!==n,showCarouselEllipsis:a,showGroupBoardAvatar:s,showOverflowMenu:O,showPinStats:x,showReactions:(Boolean(t&&t.should_show_board_activity)||s)&&$t.includes(m),showSource:w,singleLineMaxLength:T,titleLines:C,useLegoPadding:l||p,userNote:_,board:t}}var Kt=n("0S8y");const $t=["BaseBoardPinGrid"];var Yt=Object(a.connect)((function({boards:{isSocialSeasonalBoard:e=!1,content:t={}},groupBoardGridComments:n,pins:o,ui:i,viewer:a},{pin:r,pinId:s}){const l=o[s]||r,c=l.board&&l.board.id,d=(c?t[`${c}`]:void 0)||l.board,u=i.app?i.app.videosAutoplaying:{organicVideosAutoplaying:{},promotedVideosAutoplaying:{}},p=Object(v.j)(s,u),{board_activity:h}=l;return{board:d,currentlyPlayingVideo:p,hasComments:!!(h&&h.id&&n&&n[h.id]&&n[h.id].length),isSocialSeasonalBoard:e,reduxPin:l,viewConfig:i.views,viewer:a}}),()=>({}))((function({allowImageCropping:e,blockClickEvents:t,attributionOption:n,board:a,boardActivityOptions:r,currentlyPlayingVideo:s,debugImpressionState:l,feedbackOptions:c,hasComments:d,imageOnlyOption:u,isSocialSeasonalBoard:p,reduxPin:h,resolution:m,saveButtonOptions:f,surface:g,trackingParameters:y,viewConfig:b,viewer:v,...E}){const{collaborated_by_me:w,collaborator_count:_,is_collaborative:O}=a||{},{pinner:C,showFeedback:z,is_quick_promotable:F}=h,H=Object(B.a)(h),{slotIndex:G,viewParameter:V}=y,W=Object(Me.d)(),q=new ke.c(W,"web_unified_description_both").enabled()||new ke.c(W,"web_unified_description_both_perf").enabledWithNoActivation(),K=function(e){const t=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0]&&e.product_pin_data.items[0].additional_images;return!!(t&&t.length>0)}(h),$=Object(j.a)(h)||K,{anyEnabled:Y}=Object(He.a)("gb_web_lego_grid_change",a&&a.is_collaborative),X=!!a&&a.is_collaborative&&Y&&"FollowingFeedGrid"!==g,Z=!!a&&a.is_collaborative&&Y,J=v.isAuth&&v.isEmployee,Q=v.isAuth&&(Object(Kt.c)({user:v})||Object(Kt.d)({user:v}))&&!v.isPartner;let ee=Q;"default"!==u&&(ee="image-only"===u);let te=n;Q&&(te="image-only");const ne=function({feedbackOptions:e,pin:t,viewParameter:n}){const{board:o,pinner:i}=t,{getFeedbackType:a}=Object(A.a)({i18n:D.a,interpolateNamedTemplate:L.b});return a({board:o,feedback:e,pin:t,pinner:i,viewParameter:n})}({feedbackOptions:c,pin:h,viewParameter:V}),{data:oe}=c||{},ie=_>0||O,ae=function(e,t){const n=N[t];return!!n&&"dense"===e[n]}(b,g),re=ie&&"BaseBoardPinGrid"===g,se=function(e,t){const n=e&&e.owner&&e.owner.id;return t.isAuth&&n===t.id}(a,v),le=Boolean(v.isAuth&&C&&C.id===v.id),ce=w||ie&&se,de=v.isAuth&&v.isPartner,ue=!["EngagementDetails","BoardCreateUpsell"].includes(g),pe=Object(o.useMemo)(()=>(function({isDenseView:e,isGroupBoard:t,isOwnBoard:n,isOwnPin:o,isQuickPromotable:i,isRemovable:a,saveButtonOptions:r,surface:s,viewer:l,viewerIsCollaborator:c,board:d}){const u=l.isAuth?l.boardCount:void 0;let p=r||function(e=0){return e<2?{type:"classic"}:{type:"inline"}}(u);return i?p={type:"promote"}:n&&"HomefeedMoreIdeasTabs"===s?p={type:"persistentOneClickSave"}:(c||n||["BrioCloseupRelatedProducts","UserProfilePinGrid"].includes(s))&&(p={type:"classic"}),a&&(p={type:"none"}),{derivedSaveButtonOptions:p,showEditButton:n&&!t||o&&"UserProfilePinGrid"===s,showLikeButton:c&&t&&$t.includes(s),supportsReactionBar:!e,board:d}})({isDenseView:ae,isGroupBoard:re,isOwnBoard:se,isOwnPin:le,isQuickPromotable:F,isRemovable:H,saveButtonOptions:f,surface:g,viewer:v,viewerIsCollaborator:ce,board:a}),[re,se,le,F,H,f,g,v,a]),he=new ke.a(W,"web_board_price_pill"),me=he.getGroup();let fe=!1;"BaseBoardPinGrid"===g&&(["employees","enabled","control"].includes(me)?(he.getGroup(!0),fe=["employees","enabled"].includes(me)):(se||w)&&(he.getGroup(!0),fe="enabled_own"===me));const ge=Object(o.useMemo)(()=>(function({allowPricePillOnBoard:e=!1,allowProductCarousel:t=!1,surface:n}){return{allowProductCarousel:t,allowShoppingPriceIndicator:k.includes(n)||e&&"BaseBoardPinGrid"===n}})({allowPricePillOnBoard:fe,allowProductCarousel:K,surface:g}),[K,g]),ye=$,be=!["EngagementDetails","BoardCreateUpsell"].includes(g),ve=Object(o.useMemo)(()=>(function({actionBarEditBeforeShare:e,feedbackData:t,feedbackType:n,inChangeTitlesExp:o,isDenseView:i,isGroupBoard:a,isOwnBoard:r,pin:s,surface:l}){const{isOwnPin:c,isPromoted:d}=Object(S.a)(s);let u="default";return i&&(u=a?"icon-only":"truncated-text"),{actionBarEditBeforeShare:e,feedbackData:t,feedbackType:n,pinTitle:I({inChangeTitlesExp:o,isGroupBoard:a,pin:s,surface:l}),showEditButton:a&&c,showOverflowMenu:!(d||r||a||T.includes(l)),showShareButton:!["BrioCloseupRelatedProducts","CloseupRelatedProducts"].includes(l),sourceLinkStyle:u,useDenseGroupBoardLayout:a&&i}})({actionBarEditBeforeShare:Z,feedbackData:oe,feedbackType:ne,inChangeTitlesExp:q,isDenseView:ae,isGroupBoard:re,isOwnBoard:se,pin:h,surface:g}),[oe,ne,ae,re,se,h,g]),{anyEnabled:Ee}=Object(He.a)("gb_web_exposed_comment",!!(a&&a.is_collaborative&&"BaseBoardPinGrid"===g&&d)),we=Object(o.useMemo)(()=>qt({attributionOption:te,board:a,boardActivityOptions:r,feedbackData:oe,feedbackType:ne,hasCarouselData:$,inChangeTitlesExp:q,isGroupBoard:re,isLegoGroupBoardsEnabled:Y,isOwnBoard:se,pin:h,showAvatarAndNameOnLeft:X,showBoardActivityComments:Ee,showImageOnly:ee,surface:g,viewerIsPartner:de}),[te,a,r,oe,ne,$,q,re,Y,se,h,X,Ee,ee,g,de]);let _e=Boolean(we.pinTitle)||we.userNote||we.showSource||"none"!==we.attributionType||re;"BaseBoardPinGrid"===g&&se&&de?_e=!0:"EngagementDetails"===g?_e=!1:ae?_e=!1:p&&(_e=!1);const Oe=Boolean(z),{isPromoted:Ce}=Object(S.a)(h),Se=new ke.c(W,"web_others_board_feed_ads_border"),Ie={showNoPinBorderRadius:"TopicBestPinNarrow"===g||"TopicBestPinWide"===g,showPromotedPinBorderTreatment:"BaseBoardPinGrid"===g&&Ce&&Se.enabled()},Te=new ke.c(W,"web_homefeed_control_panel_nag").enabledWithNoActivation(),xe=new ke.c(W,"web_homefeed_control_panel_pin_feedback"),Re=Oe?{feedbackType:ne,isHomefeedControlPanelExp:Te||xe.enabled()}:void 0,Pe=new ke.c(W,"ads_desktop_video_ads").enabledWithNoActivation(),Ne=Object(o.useMemo)(()=>(function({allowImageCropping:e=!0,hasCarouselData:t,isSocialSeasonalBoard:n,resolution:o="default",showPromotedVideos:i,surface:a}){let r,s;return"CloseupRelatedProducts"===a?(r=R.d,s=R.c):"BrioCloseupRelatedProducts"===a?(r=R.b,s=R.a):"UpdatedCloseupRelatedProducts"===a?(r=R.s,s=R.r):"TopicBestPinWide"===a?(r=P.h,s=P.g):"TopicBestPinNarrow"===a&&(r=P.d,s=P.c),{allowImageCropping:e,cropHeight:s,cropWidth:r,isSocialSeasonalBoard:n,resolution:o,rootMargin:x(a),showCarousel:t,showPromotedVideos:i}})({allowImageCropping:e,hasCarouselData:$,isSocialSeasonalBoard:p,resolution:m,showPromotedVideos:Pe,surface:g}),[e,$,p,m,Pe,g]),Ae=J&&kt(),De=Object(o.useMemo)(()=>({debugImpressionState:l,slotIndex:G}),[l,G]);return i.a.createElement(M.a,{name:"PinRepConfiguration"},i.a.createElement(U.a,{value:y},i.a.createElement(Gt,{actionBarProps:ve,blockClickEvents:t,currentlyPlayingVideo:s,footerProps:we,forcePrimaryContentVisibility:["ExplorePossibilitiesPersistent","HomefeedMoreIdeasTabs","SearchItemPersistentOneClickSave"].includes(g),impressionsDebuggerProps:De,obscuredPinOverlayProps:Re,pin:h,pinVisualProps:Ne,presentationProps:Ie,primaryContentProps:pe,secondaryContentProps:ge,showPrimaryAndSecondaryContent:ue,showAccessoryContent:ye,showActionBar:be,showFooter:_e,showImpressionsDebugger:Ae,showSignalDebugger:J,showObscuredPinOverlay:Oe,...Object(Vt.b)(E,["pinId"]),viewType:y.viewType})))}));var Xt=Object(a.connect)((function({pins:e,location:t},{pin:n,pinId:o}){return{location:t,reduxPin:e[o]||n}}),()=>({}))((function({blockClickEvents:e,location:t,reduxPin:n,trackingParameters:a,...c}){const d=Object(r.a)(n,t),u=s(n),h=!!(u&&u.url&&u.height&&u.width)||void 0,m=u&&n.videos?n.videos.id:void 0,[f,g]=Object(o.useState)(!1),y=Object(o.useCallback)(()=>g(!0),[]),E=Object(o.useCallback)(()=>g(!1),[]),{componentType:_,contextLogData:O,impressionAuxFields:C,slotIndex:S,viewData:I,viewParameter:T,viewType:x}=a;return i.a.createElement(l.a,{componentType:_,contextLogData:{..."undefined"!=typeof window?{pwa_type:Object(p.b)(window)}:{},...O,...Object(w.a)(n,O)},loggingId:n.id,impressionAuxFields:{...C||{},isNativeVideoAndWatchable:h,videoIdStr:m,clientTrackingParams:d||`${n.tracking_params||""}-0`,imageURL:n.images&&n.images["236x"].url,richTypes:Object(w.c)(n)},impressionType:"Pin",isPaused:!f,slotIndex:S,viewData:I,viewParameter:T,viewType:x},Object(v.h)(n)?i.a.createElement(b,{pin:n}):i.a.createElement(Yt,{...c,blockClickEvents:e,debugImpressionState:f?"started":"paused",onError:E,onLoad:y,pin:n,trackingParameters:{componentType:_,contextLogData:O,slotIndex:S,viewParameter:T,viewType:x}}))}));t.a=function({forceOldPinRep:e,...t}){return e?i.a.createElement(C,t):i.a.createElement(Xt,function(e){const t={};if(t.allowImageCropping=e.truncatePinHeight,t.disableHover=e.hideHover,t.feedbackOptions=e.feedback,t.saveButtonOptions=e.saveOptions,t.blockClickEvents=e.blockClickEvents,t.pin=e.pin,t.pinId=e.pin.id,t.imageOnlyOption="default","boolean"==typeof e.showImageOnly&&(t.imageOnlyOption=e.showImageOnly?"image-only":"not-image-only"),t.boardActivityOptions="default",!1===e.showPinReactionsReply&&(t.boardActivityOptions="no-reply"),t.onError=e.onError,t.onLoad=e.onLoad,t.trackingParameters={componentType:e.componentType,contextLogData:e.contextLogData,impressionAuxFields:e.impressionAuxFields,slotIndex:e.slotIndex,viewData:e.viewData,viewParameter:e.viewParameter,viewType:e.viewType},t.resolution="default",e.highResOnly?t.resolution="high-res":e.lowResOnly&&(t.resolution="low-res"),void 0!==e.selection){const n={NO_SELECTION:"no-selection",SELECTED:"selected",UNSELECTED:"deselected"};t.selectionState=n[e.selection]}return t.attributionOption=null,e.showCredits||!1===e.hideAttribution?t.attributionOption="show":(e.hideAttribution||!1===e.showCredits)&&(t.attributionOption="hide"),t.surface=e.surface,t}(t))}},"4Utz":function(e,t,n){n.d(t,"a",(function(){return u}));var o=n("q1tI"),i=n.n(o),a=n("3gA6"),r=n("PVJQ"),s=n("0nTG"),l=n("NtFK"),c=n("U4JR"),d=n("gD/Z");function u({additionalStyles:e={},children:t,collageChipId:n,componentType:o,contextLogData:u,elementType:p,pin:h,viewParameter:m,viewType:f}){const g=Object(d.b)(),{carousel_data:y,id:b}=h;let v,E=`/pin/${n||b}/`;if(y){const{carousel_slots:e=[],id:t,index:n}=y;E=`/pin/${b}/`,v={carousel_slot_id:e[n]&&e[n].id,carousel_data_id:t,carousel_slot_index:n}}v={...v||{},...Object(s.a)(h,u)||{}};return i.a.createElement(a.b,{auxData:v,deeplinkUrls:Object(r.m)(b),forceRefresh:1,onClick:()=>{Object(l.g)(13),Object(c.a)(101,{...u,component:o||g.componentType,element:p,objectId:b,view:f||g.viewType,viewParameter:m||g.viewParameter,...Object(s.a)(h,u)||{}})},pinId:b,style:{cursor:"zoom-in",display:"block",...e},to:E},t)}},5871:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("/MKj"),r=n("E/VT"),s=n("R6wO"),l=n("1Fta"),c=n("Ye/N"),d=n("3gA6"),u=n("hFNL"),p=n("fArA"),h=n("XCz/"),m=n("pSsd"),f=n("vvax"),g=n("0bYG"),y=n("U4JR"),b=n("dtw8"),v=n("DJoW"),E=n("pLLR"),w=n("n6mq"),_=n("eqXv");function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C={color:"white",textDecorationColor:"white"};t.a=Object(p.compose)(Object(a.connect)(),E.e,b.withRouter)(class extends i.a.Component{constructor(e){super(e),O(this,"getRecommendationDescription",()=>{const{ad_match_reason:e,board:t,feedbackType:n,pinner:o,promoter:i,recommendationReason:a,sourceInterest:r}=this.props;return this.feedbackHelpers.getRecommendationDescription({ad_match_reason:e,board:t,feedbackType:n,makeNavigateLink:this.makeNavigateLink,pinner:o,promoter:i,recommendationReason:a,sourceInterest:r})}),O(this,"getRecommendationDescriptionImage",()=>{const{board:e,feedbackType:t,pinner:n,recommendationReason:o}=this.props;if("followed"!==t&&"pfyBoard"!==t)return null;let a,r,s;return n&&n.explicitly_followed_by_me?(a=n.image_small_url,r="50%",s=`/${n.username}`):e&&e.image_thumbnail_url&&(a=e.image_thumbnail_url,r="4px",s=o&&o.board&&o.board.url||e.url),a?i.a.createElement(w.c,{marginStart:3,flex:"none",dangerouslySetInlineStyle:{__style:{borderRadius:r}},overflow:"hidden"},i.a.createElement(w.P,{onTouch:()=>this.props.router.push(s)},i.a.createElement(w.u,{width:40,height:40,wash:!0},i.a.createElement(w.p,{src:a,naturalHeight:1,naturalWidth:1,alt:"",fit:"cover"})))):null}),O(this,"getUnfollowAction",()=>{const{board:e,feedbackType:t,pinner:n,sourceInterest:o}=this.props;return this.feedbackHelpers.getUnfollowAction({board:e,feedbackType:t,makeNavigateLink:this.makeNavigateLink,pinner:n,sourceInterest:o})}),O(this,"getUndoText",e=>"unfollowPinner"===e||"unfollowBoard"===e?c.a._("Follow again","Caption for button to undo a unfollowing of a topic"):""),O(this,"generateUndoHideCallback",(e,t)=>()=>{const{dispatch:n,pinId:o,viewType:i,viewParameter:a}=this.props,r={...e,undo:!0};let s=t;"unfollowPinner"===t?s="followPinner":"unfollowBoard"===t?s="followBoard":"unfollowTopic"===t&&(s="followTopic"),Object(_.a)(s,r),n(Object(v.b)(o)),Object(y.a)(101,{component:0,element:11181,view:i,viewParameter:a})}),O(this,"feedbackHelpers",Object(l.a)({i18n:c.a,interpolateNamedTemplate:f.b})),O(this,"makeNavigateLink",(e,t,n,o)=>{const a={display:"inline",...o?C:{}};return i.a.createElement(d.b,{className:"underlineLink",key:e,to:t,onClick:this.props.onLinkClick},i.a.createElement(w.c,{dangerouslySetInlineStyle:{__style:a}},n))}),O(this,"reportPinOption",()=>({action:"reportPin",elementType:974,text:c.a._("Report Pin","Report a pin in the dropdown"),description:c.a._("This goes against Pinterest's community guidelines","Description for the report pin option"),callback:this.props.reportPin})),O(this,"hidePinOption",e=>{const{feedbackData:t,feedbackType:n,pinId:o,recommendationReason:i}=this.props,a="search"===n?973:982,{action:r,actionOptions:s}=this.feedbackHelpers.getHidePinAction({feedbackData:t,feedbackType:n,pinId:o,recommendationReasonId:i&&i.reason&&g.ReasonToChoose[i.reason],pinFeedbackType:"pfy"===n?4:10,throughId:i&&this.getThroughId()}),l=c.a._("Hide Pin","message displayed in pin feedback list");return{action:r,actionOptions:s,feedbackText:this.pinHiddenFeedbackText(e),text:l,description:c.a._("See fewer Pins like this","Description for the hide pin option"),elementType:a}}),O(this,"stopRecommendationOption",()=>{const{feedbackData:e,feedbackType:t,pinId:n,recommendationReason:o}=this.props,{board:i,reason:a}=o,r=a&&g.ReasonToChoose[a],s=o&&this.getThroughId(),l="pfyBoard"===t,{action:d,actionOptions:u}=this.feedbackHelpers.getHidePinAction({feedbackData:e,feedbackType:t,pinId:n,recommendationReasonId:r,pinFeedbackType:l?2:4,throughId:s}),p=!!i&&this.makeNavigateLink("boardUrl",i.url,i.name,!0);return{action:d,actionOptions:u,feedbackText:{subTitle:l&&i?Object(f.b)(c.a._("We won't show you Pins inspired by your board {{ formattedBoard }} anymore.","Primary caption displayed in pin feedback list to unfollow a board"),{formattedBoard:p}):c.a._("Got it! We won't show you Pins like this in the future.","message displayed after stopping recommendations from a pin")},text:l&&i?Object(f.b)(c.a._("Stop seeing Pins inspired by {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:i.name}):c.a._("See fewer Pins like this","Feedback option to stop recommendations inspired by this Pin"),elementType:284}}),O(this,"unfollowBoardOption",()=>{const{board:e}=this.props,t=this.makeNavigateLink("boardUrl",e.url,e.name,!0),n=Object(f.b)(c.a._("Unfollow {{ boardName }}","Primary caption displayed in pin feedback list to unfollow a board"),{boardName:e.name}),o=Object(f.b)(c.a._("Got it! You unfollowed {{ formattedBoard }} and won't see Pins saved to it in the future.","Confirmation text after unfollowing a board"),{formattedBoard:t});return{action:"unfollowBoard",actionOptions:{board_id:e.id},feedbackText:{title:"",subTitle:o},text:n,description:Object(f.b)(c.a._('Stop seeing Pins from the board "{{ boardName }}"',"Secondary caption displayed in pin feedback list to unfollow a board"),{boardName:e.name}),elementType:10614}}),O(this,"unfollowTopicOption",()=>{const{sourceInterest:e}=this.props;if(e){const{id:t,name:n,url_name:o}=e,i=`/topics/${o}`,a=this.makeNavigateLink("topicUrl",i,n,!0),r=Object(f.b)(c.a._("See fewer Pins from {{ topicName }}","Primary caption displayed in pin feedback list to unfollow a topic"),{topicName:n}),s=Object(f.b)(c.a._("We'll show you fewer Pins from {{ formattedTopic }} in the future.","Confirmation text after unfollowing a topic"),{formattedTopic:a});return{action:"unfollowTopic",actionOptions:{interest_id:t,interest_list:m.a},feedbackText:{title:"",subTitle:s},text:r,description:Object(f.b)(c.a._('Stop seeing Pins from the topic "{{ topicName }}"',"Secondary caption displayed in pin feedback list to unfollow a topic"),{topicName:e.name}),elementType:976}}return null}),O(this,"unfollowUserOption",()=>{const{pinner:e}=this.props,{id:t,username:n,full_name:o}=e,i=`/${n}`,a=this.makeNavigateLink("pinnerUrl",i,o,!0);return{action:"unfollowPinner",actionOptions:{user_id:t},feedbackText:{title:"",subTitle:Object(f.b)(c.a._("Got it! You unfollowed {{ formattedUser }} and won't see Pins they save in the future.","Confirmation text after unfollowing a user"),{formattedUser:a})},text:Object(f.b)(c.a._("Unfollow {{ fullName }}","Primary caption displayed in pin feedback list to unfollow a user"),{fullName:o}),description:c.a._("Stop seeing all their Pins","Secondary caption displayed in pin feedback list to unfollow a user"),elementType:10640}}),O(this,"downloadPinOption",()=>({action:"downloadPin",text:c.a._("Download image","Button to download Pin image"),elementType:10836})),O(this,"_pinFeedbackText",()=>{const{location:e,feedbackType:t,hideDownload:n,pinner:o}=this.props,i="followed"===this.props.feedbackType,a=e.pathname.includes("following"),r=(i||"topic"===t)&&!a,s=this.hidePinOption(r),l=this.reportPinOption(),d="promoted"!==t&&!n;switch(t){case"followed":const e=a,n=!e&&this.getRecommendationDescription(),i=o.explicitly_followed_by_me?this.unfollowUserOption():this.unfollowBoardOption();return{...n?{description:n}:{},options:[s,...r||e?[i]:[],..."promoted"!==t?[this.downloadPinOption()]:[],l]};case"promoted":const{ad_match_reason:u}=this.props,p=[s,{link:this.feedbackHelpers.getLearnMoreUrl(u),text:c.a._("Why am I seeing this ad?","Link to promoted pins explanation page")},l];return{description:this.getRecommendationDescription(),options:p};case"topic":const h=this.unfollowTopicOption(),m=[s,...r&&h?[h]:[],...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:m};case"pfy":case"pfyBoard":const f=[s,..."pfyBoard"===t?[this.stopRecommendationOption()]:[],...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:f};default:const g=[s,...d?[this.downloadPinOption()]:[],l];return{description:this.getRecommendationDescription(),options:g}}}),O(this,"handleSecondaryFeedbackItemClick",(e,t)=>{const{feedbackData:n,feedbackType:o,pinId:i,onHide:a,recommendationReason:r}=this.props,s=r&&r.reason&&g.ReasonToChoose[r.reason],l=r&&this.getThroughId(),{action:c,actionOptions:d}=this.feedbackHelpers.getHidePinAction({feedbackData:n,feedbackType:o,pinId:i,recommendationReasonId:s,throughId:l,complaintReason:e});this.handleClickLogging(t),Object(_.a)(c,d),a()}),O(this,"pinHiddenFeedbackText",e=>{const t=e?null:this.getUnfollowAction();return t?{title:"",subTitle:this.getRecommendationDescription(),unfollow:t}:{title:"",subTitle:c.a._("Got it! We won't show you this Pin in the future.","message displayed after hiding a pin")}}),O(this,"renderSecondaryFeedbackItem",({text:e,reason:t,elementType:n})=>i.a.createElement(w.P,{onTouch:()=>this.handleSecondaryFeedbackItemClick(t,n),fullWidth:!1,key:e},i.a.createElement(s.a,{text:e,compact:!0}))),O(this,"renderSecondaryFeedback",()=>{const{feedbackType:e}=this.props,t="promoted"===e?[{text:c.a._("Not relevant to me","Feedback option for Pin"),reason:10,elementType:1296},{text:c.a._("Seen Pin too many times",""),reason:3,elementType:11172},{text:c.a._("Blurry or pixelated image","low quality picture"),reason:13,elementType:10898}]:[{text:c.a._("Not relevant to me","Feedback option for Pin"),reason:10,elementType:1296},{text:c.a._("Not in a language I understand",""),reason:15,elementType:11178},{text:c.a._("Seen Pin too many times",""),reason:3,elementType:295},{text:c.a._("Blurry or pixelated image","low quality picture"),reason:13,elementType:10898},{text:c.a._("Other",""),reason:8,elementType:11179}];return i.a.createElement(w.c,{overflow:"hidden",width:"100%",shape:"rounded"},i.a.createElement(w.c,{paddingX:4,paddingY:4},i.a.createElement(w.K,{color:"darkGray",size:"sm"},c.a._("Got a moment? Tell us why.","Title of follow up question after negative Pin feedback"))),i.a.createElement(w.j,null),i.a.createElement(w.c,{paddingY:2},t.map(this.renderSecondaryFeedbackItem)))});const t=this._pinFeedbackText();this.state={pinFeedbackConfig:t,showSecondary:!1}}onPinFeedbackActionButtonClick(e,t,n){e.stopPropagation(),t.auxData?this.handleClickLogging(t.elementType,t.auxData):this.handleClickLogging(t.elementType),Object(_.a)(t.action,t.actionOptions,n)}onPinHide(e,t,n,o){const{dispatch:i,onHide:a,pinId:r}=this.props;i(t&&n&&o?Object(v.e)(r,e,this.generateUndoHideCallback(n,o),this.getUndoText(o)):Object(v.a)(r,e)),!n||n.promoted||10!==n.feedback_type&&4!==n.feedback_type?a():(this.setState({showSecondary:!0}),i(Object(v.d)(r)))}getThroughId(){const{recommendationReason:e}=this.props;return e.reason_id?e.reason_id:e.board?e.board.id:e.pin?e.pin.id:e.interest?e.interest.id:""}getComponentType(){const{feedbackType:e}=this.props;switch(e){case"promoted":return 60;case"followed":case"topic":return 100;case"pfyBoard":case"pfy":return 58}}makeStrongText(e,t){return i.a.createElement("strong",{key:e},t)}handleClickLogging(e,t={}){const{viewParameter:n,viewType:o}=this.props;Object(y.a)(101,{...t,view:o,viewParameter:n,element:e,component:this.getComponentType()})}renderButtons(){const{hideDownload:e,onDownloadHideFlyout:t}=this.props,{pinFeedbackConfig:n}=this.state,{options:o}=n,a=[],l=o.length;for(let p=0;p<l;p+=1){const n=o[p],l=_.b.includes(n.action),m=n.callback?n.callback:()=>this.onPinHide(n.feedbackText,l,n.actionOptions,n.action);if("downloadPin"!==n.action)a.push(i.a.createElement(w.c,{key:p},n.link?i.a.createElement(d.b,{external:!0,to:n.link},i.a.createElement(s.a,{text:n.text,compact:!0})):i.a.createElement(w.P,{onTouch:({event:e})=>this.onPinFeedbackActionButtonClick(e,n,m),fullWidth:!1},i.a.createElement(s.a,{text:n.text,compact:!0}))));else if(!e&&"undefined"!=typeof window&&"windows"!==Object(u.b)(window)){const{bestPinImgSrc:e,pinTitle:n,pinDescription:o,pinCategory:l}=this.props;a.push(i.a.createElement(w.c,{key:p},i.a.createElement(h.a,{name:"web_hide_overflow_menu_on_download",activate:!1},({customActivate:a})=>i.a.createElement(r.a,{imgSrc:e,filename:n||o,category:l,imageDownloadSuccessCallback:()=>{!!a&&a().includes("enabled")&&t&&t()}},e=>i.a.createElement(w.P,{onTouch:e,fullWidth:!1},i.a.createElement(s.a,{text:c.a._("Download image","Button to download Pin image"),compact:!0}))))))}}return a}render(){const{pinFeedbackConfig:e,showSecondary:t}=this.state,{description:n}=e,o=this.getRecommendationDescriptionImage();return i.a.createElement(w.c,{overflow:"hidden",width:"100%"},t?this.renderSecondaryFeedback():i.a.createElement(w.c,null,n&&i.a.createElement(w.c,null,i.a.createElement(w.c,{padding:4,display:"flex",alignItems:"center"},i.a.createElement(w.c,{maxHeight:56,overflow:"hidden"},i.a.createElement(w.K,{color:"darkGray",size:"sm",overflow:"normal"},n)),o),i.a.createElement(w.j,null)),i.a.createElement(w.c,{marginTop:2,marginBottom:3},this.renderButtons())))}})},"5uyJ":function(e,t,n){n.d(t,"a",(function(){return o}));const o={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},"63p3":function(e,t,n){function o(e){return!!(e&&e.carousel_data&&e.carousel_data.id)}n.d(t,"a",(function(){return o}))},"7pfs":function(e,t,n){n.d(t,"a",(function(){return i}));var o=n("q1tI");function i({children:e}){const[t,n]=Object(o.useState)(!1),[i,a]=Object(o.useState)(!1),[r,s]=Object(o.useState)(!1);return e({active:t,focused:i,hovered:r,onBlur:()=>a(!1),onFocus:()=>a(!0),onMouseDown:()=>n(!0),onMouseEnter:()=>s(!0),onMouseLeave:()=>{s(!1),n(!1)},onMouseUp:()=>n(!1)})}},"7wXf":function(e,t,n){n.d(t,"a",(function(){return d}));var o=n("q1tI"),i=n.n(o),a=n("ynlw"),r=n("EDqd"),s=n("US8k"),l=n("n6mq");function c(e){return i.a.createElement(l.c,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"}},"data-test-id":"PinTypeIdentifier"},e)}function d({pin:e,allowProductCarousel:t,allowShoppingPriceIndicator:n}){const o=Object(a.a)(e);if(o.isGif)return c("GIF");if(o.isStoryPin)return c("Story");if(o.isVideo){const t=e.videos,{duration:n=0}=t&&t.video_list&&t.video_list[Object.keys(t.video_list)[0]]||{};return c(Object(s.a)(n))}if(o.isProduct&&n){const t=e.rich_summary&&e.rich_summary.products&&e.rich_summary.products[0]&&e.rich_summary.products[0].offer_summary,n=t&&(t.price||t.max_price);return n?c(n):null}if(t){const t=e.product_pin_data&&e.product_pin_data.items&&e.product_pin_data.items[0],n=t&&Object(r.a)(e.images,t,e.carousel_data&&e.carousel_data.index)||{},{carousel_slots:o=[],index:i=0}=n;return c(`${i+1}/${o.length}`)}if(o.isCarousel){const t=e.carousel_data||{},{carousel_slots:n=[],index:o=0}=t;return c(`${o+1}/${n.length}`)}return null}},"8BHY":function(e,t,n){var o=n("q1tI"),i=n.n(o);const a={backgroundColor:"rgba(0, 0, 0, .06)"},r={backgroundColor:"rgba(51, 51, 51, 1.0)"},s={backgroundColor:"rgba(255, 255, 255, 1.0)"},l={backgroundColor:"rgba(239, 239, 239, 1.0)"},c={backgroundColor:"rgba(142 ,142, 142, 1.0)"},d={backgroundColor:"rgba(230, 0, 35, 1.0)"};var u={transparent:{backgroundColor:"transparent"},transparentDarkGray:{backgroundColor:"rgba(51, 51, 51, .8)"},transparentHovered:a,transparentFocused:a,transparentActive:{backgroundColor:"rgba(0, 0, 0, .1)"},transparentDarkGrayHovered:r,transparentDarkGrayFocused:r,transparentDarkGrayActive:{backgroundColor:"rgba(51, 51, 51, 1.0)"},white:{backgroundColor:"rgba(255, 255, 255, .9)"},whiteHovered:s,whiteFocused:s,whiteActive:{backgroundColor:"rgba(255, 255, 255, 1.0)"},lightGray:{backgroundColor:"rgba(239, 239, 239, .9)"},lightGrayHovered:l,lightGrayFocused:l,lightGrayActive:{backgroundColor:"rgba(239, 239, 239, 1.0)"},gray:{color:"rgba(142 ,142, 142, .9)"},grayHovered:c,grayFocused:c,grayActive:{backgroundColor:"rgba(142 ,142, 142, 1.0)"},red:{backgroundColor:"rgba(230, 0, 35, .9)"},redActive:d,redFocused:d,redHovered:d},p=n("n6mq");const h={xs:24,sm:32,md:40,lg:48,xl:56},m={alignItems:"center",borderRadius:"50%",display:"flex",justifyContent:"center"},f={boxShadow:"0 0 0 4px rgba(0, 132, 255, .5)",outline:0},g={transparent:"gray",gray:"white",lightGray:"gray",white:"gray",transparentDarkGray:"white",red:"white"};function y(e){const{active:t=!1,bgColor:n="transparent",focused:o=!1,hovered:a=!1,icon:r,iconColor:s=g[n],size:l="md",title:c=""}=e,d=e.iconSize||h[l]/2,y={height:h[l],width:h[l]},b={...m,...u[n],...t?u[`${n}Active`]:{},...o?f:{},...o?u[`${n}Focused`]:{},...!a||o||t?{}:u[`${n}Active`]};return i.a.createElement("div",{style:{...y,...b}},i.a.createElement(p.c,{shape:"circle"},i.a.createElement(p.n,{accessibilityLabel:"",color:s,icon:r,size:d,title:c})))}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return v}));class v extends i.a.Component{constructor(...e){super(...e),b(this,"state",{active:!1,focused:!1,hovered:!1}),b(this,"handleBlur",()=>this.setState({focused:!1})),b(this,"handleFocus",()=>{this.setState({focused:!0})}),b(this,"handleMouseDown",()=>{this.setState({active:!0})}),b(this,"handleMouseEnter",()=>{this.setState({hovered:!0})}),b(this,"handleMouseLeave",()=>{this.setState({active:!1,hovered:!1})}),b(this,"handleMouseUp",()=>{this.setState({active:!1})})}render(){const{accessibilityExpanded:e,accessibilityHaspopup:t,accessibilityLabel:n,bgColor:o,disabled:a,icon:r,iconColor:s,iconSize:l,onClick:c,size:d,wrappingPogStyle:u}=this.props,{active:p,focused:h,hovered:m}=this.state;return i.a.createElement("button",{"aria-expanded":e,"aria-haspopup":t,"aria-label":n,className:"LegoGestalt_IconButton",disabled:a,onBlur:this.handleBlur,onClick:e=>c&&c({event:e}),onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,title:n,type:"button"},i.a.createElement("div",{style:{...u||{}}},i.a.createElement(y,{active:p,bgColor:o,focused:h,hovered:m,icon:r,iconColor:s,iconSize:l,size:d,title:n})))}}},"9rZX":function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o,i=n("qFS3"),a=(o=i)&&o.__esModule?o:{default:o};t.default=a.default,e.exports=t.default},AyyZ:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("I7CA"),r=n("vcEN"),s=n("3gA6"),l=n("mwIZ"),c=n.n(l),d=n("n6mq");const u={priceIndentifier:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",height:"24px",lineHeight:"24px",padding:"0 6px"}};function p({productPin:e,isTopRow:t}){const{title:n,description:o,images:{"474x":{height:a,width:r,url:s}},rich_summary:l={}}=e,p=c()(l,["products","0","offer_summary","price"]);return i.a.createElement(d.u,{wash:!0,height:t?217:168,width:t?236:117},i.a.createElement(d.p,{alt:n||o,fit:"cover",naturalHeight:a,naturalWidth:r,src:s}),p&&i.a.createElement(d.c,{margin:1,paddingY:1,paddingX:2,bottom:!0,left:!0,position:"absolute"},i.a.createElement(d.c,{display:"inlineBlock",dangerouslySetInlineStyle:{__style:u.priceIndentifier}},p)))}var h=n("NtFK"),m=n("tMjw"),f=n("U4JR");n.d(t,"a",(function(){return y}));const g={container:{borderRadius:m.a,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}};function y({dangerouslySetActionUrl:e,story:t}){const{action:n,objects:l,story_type:c,subtitle:u}=t,{text:m,url:y}=n,[b,v]=Object(o.useState)(!1),E=Object(o.useCallback)(()=>v(!0),[v]),w=Object(o.useCallback)(()=>v(!1),[v]),_=["related_domain_collage","related_products_collage"].includes(c)?1:0,O=l[0].domain;let C,S,I;["search_product_collage_story","shop_article_story"].includes(c)?(C=2,S=43):"shop_brand_story"===c?(C=1,S=92,I=O&&{commerce_data:JSON.stringify({domain:O})}):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(c)?(C=72,S=3050):"related_domain_collage"===c?(C=1,S=3166):"related_products_collage"===c&&(C=1,S=3177),Object(o.useEffect)(()=>{["search_product_collage_story","shop_article_story"].includes(c)&&Object(h.d)({name:"ShoppingSearchPivot"}),Object(f.a)(170,{element:372,component:200,view:C,viewParameter:S,story_type:c,...I||{}})},[]);const T=u?5:3;let x,R;if(["related_domain_collage","shop_brand_story"].includes(c)){const e=n.user;x=e&&(e.image_medium_url||e.image_large_url),R=e&&e.full_name}return i.a.createElement(s.b,{to:e||y,onClick:()=>Object(f.a)(101,{element:372,component:200,view:C,viewParameter:S,story_type:c,...I||{}})},i.a.createElement(d.c,{overflow:"hidden",position:"relative",onMouseEnter:E,onMouseLeave:w,dangerouslySetInlineStyle:{__style:g.container}},i.a.createElement(d.c,{overflow:"hidden"},i.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:g.content}},i.a.createElement(p,{productPin:l[_],isTopRow:!0})),i.a.createElement(d.c,{display:"flex",justifyContent:"between",dangerouslySetInlineStyle:{__style:g.content}},i.a.createElement(p,{productPin:l[_+1]}),i.a.createElement(p,{productPin:l[_+2]}))),i.a.createElement(d.c,{color:"lightGray",display:"flex",paddingX:3,alignItems:"center",justifyContent:"center",paddingY:T},i.a.createElement(d.c,{justifyContent:"center",alignContent:"start",display:"flex",direction:"column",margin:2},u?i.a.createElement(d.c,{marginBottom:1},i.a.createElement(d.K,{align:"justify",color:"gray",size:"md"},u.format)):null,i.a.createElement(d.K,{align:"justify",size:"xl",weight:"bold"},m))),R&&x&&i.a.createElement(d.c,{position:"absolute",left:!0,top:!0,margin:3},i.a.createElement(d.a,{name:R,size:"lg",src:x,outline:!0})),i.a.createElement(r.a,{visibility:b?"visible":"none"},i.a.createElement(a.a,{additionalStyles:g.visualOverlay}))))}},DJoW:function(e,t,n){function o(e,t,n,o){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:t,undoAction:n,undoText:o}}}function i(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function a(e,t){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}function r(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function s(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return s}))},Dcl4:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("c0rk"),r=n("/MKj"),s=n("HbTO"),l=n("Ye/N"),c=n("dtw8"),d=n("n6mq"),u=n("fArA");const p="M24 12a2 2 0 0 1-2 2H7.676l4.631 4.586a2 2 0 1 1-2.829 2.828L0 12l9.478-9.414a2 2 0 0 1 2.829 2.828L7.676 10H22a2 2 0 0 1 2 2";var h=Object(u.compose)(Object(r.connect)(({history:e})=>({hasHistory:e.previous.length>=1})),c.withRouter)((function({hasHistory:e,pinId:t,router:n}){return i.a.createElement(s.a,{accessibilityLabel:l.a._("Go back","Accessible icon for close button"),bgColor:"transparent",hoverBgColor:"lightGray",onClick:()=>{e?n.goBack():n.replace(`/pin/${t}/`)}},i.a.createElement(d.c,{display:"flex",alignItems:"center",justifyContent:"center"},i.a.createElement(d.c,{padding:1},i.a.createElement(d.n,{dangerouslySetSvgPath:{__path:p},color:"darkGray",inline:!0,accessibilityLabel:l.a._("Go back","Accessible icon for close button"),size:20}))))})),m=n("OBA1"),f=n("R0ru"),g=n("45LI"),y=n("yjg8"),b=n("zLLH");const v=({data:e,itemIdx:t})=>i.a.createElement(g.a,{pin:e,slotIndex:t,surface:"RelatedProductsFeed",viewParameter:3334,viewType:72});var E=Object(u.compose)(Object(b.b)({name:"VisualLiveSearchProductFeedResource",key:"feedResource",options:({resourceOptions:e})=>e}),c.withRouter)((function({feedResource:e,resourceOptions:{pin_id:t},router:n}){const{data:a,isAtEnd:r,isLoaded:s,isFetching:c,fetchMore:u}=e,p=Object(o.useRef)(null);return s?i.a.createElement(d.c,{display:"flex",maxWidth:"100%",ref:p},a&&i.a.createElement(f.default,{columnWidth:y.e,comp:v,isFetching:c,items:a,loadItems:()=>{c||r||u()},paddingStyle:"simplified",viewParameterType:144,scrollContainer:()=>p.current||window})):i.a.createElement(d.c,{display:"flex",alignSelf:"center",justifyContent:"center"},i.a.createElement(d.G,{accessibilityLabel:l.a._("Loading related products","Label for loading spinner"),show:!0}))})),w=n("AyyZ");var _=Object(u.compose)(Object(b.b)({name:"VisualLiveSearchResource",options:({resourceOptions:e})=>e,key:"visualLiveSearchResource"}))(class extends o.PureComponent{constructor(...e){var t,n,o;super(...e),o=({data:e,itemIdx:t})=>{const{resourceOptions:{image_signature:n},visualLiveSearchResource:o}=this.props,a=o&&o.data&&o.data.search_identifier,r=`${window.location.pathname}products/${window.location.search}`;return"story"===e.type?i.a.createElement(w.a,{story:e,dangerouslySetActionUrl:r}):i.a.createElement(g.a,{contextLogData:{viewData:{search_identifier:a},search_identifier:a,image_signature:n},pin:e,slotIndex:t,surface:"FlashlightResultGrid",viewParameter:3050,viewType:72})},(n="renderItem")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){const{visualLiveSearchResource:e,onSearchIdChange:t}=this.props,n=e&&e.data&&e.data.search_identifier;n&&t(n)}componentDidUpdate({visualLiveSearchResource:{data:e}}){const{visualLiveSearchResource:{data:t}}=this.props,n=t&&t.search_identifier,o=e&&e.search_identifier;n&&n!==o&&this.props.onSearchIdChange(n)}render(){const{visualLiveSearchResource:e}=this.props,{data:t,isFetching:n,fetchMore:o}=e,a=t&&t.results,r=t&&t.search_identifier;return i.a.createElement(d.c,null,a&&r&&i.a.createElement(d.c,null,i.a.createElement(d.v,{columnWidth:y.e,comp:this.renderItem,gutterWidth:y.d,items:a,loadItems:o,minCols:1,scrollContainer:()=>window})),i.a.createElement(d.G,{accessibilityLabel:l.a._("Loading search results...","Accessibility label for loading visual search results"),show:n||!r}))}}),O=n("Y+p1"),C=n.n(O),S=n("q8wg"),I=n("0Rm8"),T=n("U4JR"),x=n("uhAL");function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"b",(function(){return M}));const P=20,k=60,M=e=>{const{images:t,image_signature:n}=e,o=t["564x"]&&t.orig,{url:i}=o;let{width:a,height:r}=o;return a>564&&(r*=564/a,a=564),{width:a,height:r,url:i,imageSignature:n}},N=({initialCropArea:e,pin:t})=>{let n;if(e)n={...e};else{const{visual_objects:e}=t,{width:o,height:i}=M(t);if(e&&e.length){const{x:t,y:a,w:r,h:s}=e[0];n=Object(x.e)({cropArea:{x:t,y:a,w:r,h:s},scaledWidth:o,scaledHeight:i})}else{const[e,t]=[o/6,i/6],[a,r]=[o-2*e,i-2*t];n={x:e,y:t,w:a,h:r}}}return{x:Math.floor(n.x),y:Math.floor(n.y),w:Math.floor(n.w),h:Math.floor(n.h)}};let A=0,D="";t.a=Object(u.compose)(c.withRouter,Object(b.b)({name:"PinResource",key:"pinResource",options:({pinId:e})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})}))(class extends o.Component{constructor(...e){super(...e),R(this,"state",{searchId:""}),R(this,"getResourceOptions",({pin:e,cropArea:t,width:n,height:o,cropSource:i})=>{const{id:a,image_signature:r}=e;return{pin_id:a,image_signature:r,crop:Object(x.d)({cropArea:t,scaledWidth:n,scaledHeight:o}),crop_source:i}}),R(this,"saveFlashlightImageContainerRef",e=>{this.flashlightImageContainerRef=e}),R(this,"handleCropperChange",({origCrop:e,cropSource:t})=>{const{pinId:n,router:o}=this.props;Object(x.g)({cropArea:e,pinId:n,cropSource:t})!==window.location.pathname+window.location.search&&o.replace({pathname:`/pin/${n}/visual-search/`,query:{...e,cropSource:t},search:Object(x.f)({cropArea:e,cropSource:t}),state:{internalNavigation:!0}})}),R(this,"handleSearchIdChange",e=>{this.setState({searchId:e})})}componentDidMount(){const{initialCropArea:e,pinResource:{data:t},pinId:n,router:o}=this.props;if(!e&&t){const i=N({initialCropArea:e,pin:t}),a=Object(x.g)({cropArea:i,pinId:n});o.replace(a)}this.flashlightImageContainerRef&&D===n&&(this.flashlightImageContainerRef.scrollTop=A),Object(T.a)(13,{view:72,viewParameter:3050,viewData:{pin_id:n}})}UNSAFE_componentWillReceiveProps(e){C()(e.initialCropArea,this.props.initialCropArea)||this.setState({searchId:""})}componentWillUnmount(){const{pinId:e}=this.props;this.flashlightImageContainerRef&&(A=this.flashlightImageContainerRef.scrollTop,D=e)}renderSpinner(){return i.a.createElement(d.G,{accessibilityLabel:l.a._("Loading visual search...","Accessibility label for loading visual search page"),show:!0})}renderFlashlight(){const{pinResource:{data:e},initialCropArea:t,initialCropSource:n,router:r,view:s}=this.props;if(!e)return null;const{width:c,height:u,url:p}=M(e),f=N({initialCropArea:t,pin:e}),g=n||5,y=this.getResourceOptions({pin:e,cropArea:f,width:c,height:u,cropSource:g}),b=c+P,v=!(r.location&&r.location.state&&r.location.state.internalNavigation),w=!!e.visual_objects&&Object(x.b)(e.visual_objects)||[];return i.a.createElement(o.Fragment,null,i.a.createElement(a.a,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"}},i.a.createElement(d.c,{width:"100%",paddingY:3,paddingX:9,display:"flex",alignItems:"center"},i.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{position:"absolute"}}},i.a.createElement(h,{pinId:e.id})),i.a.createElement(d.c,{flex:"grow"},i.a.createElement(d.K,{align:"center",size:"xl",weight:"bold"},"products"===s?l.a._("Shop similar items","Header explaining results of flashlight products search"):l.a._("More Ideas","Header explaining results of flashlight search"))))),i.a.createElement(I.a,null,t=>"products"===s?i.a.createElement(d.c,{dangerouslySetInlineStyle:{__style:{marginTop:k}}},i.a.createElement(E,{resourceOptions:y})):i.a.createElement(d.c,{display:"flex",paddingX:12},i.a.createElement("div",{style:{position:"fixed",width:b,height:"inherit",overflow:"auto",top:t+k,bottom:0,marginBottom:10},ref:this.saveFlashlightImageContainerRef},i.a.createElement("div",{"data-test-id":"flashlight-enabled-image",style:{width:c,height:u}},i.a.createElement(d.u,{height:u,shape:"rounded",width:c},i.a.createElement(d.p,{alt:e.description,naturalHeight:u,naturalWidth:c,src:p}),i.a.createElement(m.a,{showAnimation:v,imageSignature:e.image_signature,imageSize:{h:u,w:c},initialCropArea:f,onChange:this.handleCropperChange,pinId:e.id,spotlightAreas:w})))),i.a.createElement("div",{style:{marginLeft:b+16,width:"100%",position:"relative",top:k}},i.a.createElement(_,{resourceOptions:y,onSearchIdChange:this.handleSearchIdChange})))))}render(){const{pinResource:{isLoaded:e}}=this.props,{searchId:t}=this.state;return i.a.createElement(S.a,{view:72,objectId:t},i.a.createElement("div",null,e?this.renderFlashlight():this.renderSpinner()))}})},"E/VT":function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),i=n("BlMG"),a=n("n6mq");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s extends o.Component{constructor(...e){super(...e),r(this,"state",{href:void 0}),r(this,"onEvent",()=>{if("undefined"==typeof window)return;const{imgSrc:e,isUnauth:t,category:n,imageDownloadSuccessCallback:o}=this.props,{href:a}=this.state;null==a&&fetch(e,{headers:new Headers({Origin:location.origin}),mode:"cors"}).then(e=>e.blob()).then(e=>{this.setState({href:window.URL.createObjectURL(e)},()=>{this.imageDownload&&this.imageDownload.click()})}).then(()=>o&&o()).catch(()=>this.setState({href:this.DOWNLOAD_ERROR})),Object(i.a)(`web.${t?"unauth":"auth"}.download.click.${n||"no_category"}`)}),r(this,"DOWNLOAD_ERROR","error")}render(){const{children:e}=this.props,{filename:t}=this.props,{href:n}=this.state,i=null!=n&&n!==this.DOWNLOAD_ERROR;return o.createElement(o.Fragment,null,e(this.onEvent),i&&o.createElement(a.c,{display:"none"},o.createElement("a",{ref:e=>this.imageDownload=e,tabIndex:-1,download:t&&t.replace(".","_"),href:n})))}}},ExRq:function(e,t,n){n.d(t,"a",(function(){return c}));var o=n("uVIr"),i=n("eOdZ"),a=n("qUSw"),r=n("i9se");const s={[r.a.BOARD]:"BoardActivityResource",[r.a.BOARD_ACTIVITY]:"BoardActivityCommentResource",[r.a.BOARD_ACTIVITY_COMMENT]:"BoardActivityNestedCommentResource"},l={[r.a.BOARD]:"boardId",[r.a.BOARD_ACTIVITY]:"activityId",[r.a.BOARD_ACTIVITY_COMMENT]:"activityId"};function c({contentMarkdown:e,imageSignatures:t,objectIds:n,parentId:c,parentType:d,text:u,tags:p,replyToCommentId:h}){return m=>{const f=s[d],g={[l[d]]:c,contentMarkdown:e,imageSignatures:t,objectIds:n,tags:p,text:u,replyToCommentId:h},y=r.b[d],b=d!==r.a.BOARD_ACTIVITY_COMMENT;return i.a.create(f,g).callCreate({showError:!0}).then(e=>{const t=e.resource_response.data;return m(function(e,t){return{type:"ACTIVITY_ITEM_CREATED",payload:{parentId:e,activityItem:t}}}(c,t)),m(Object(o.a)({feedId:c,feedType:y,itemIds:[t.id],itemType:t.type,prepend:b})),m(Object(a.b)(c)),e})}}},FF6m:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("+NLT"),r=n("m2Wt"),s=n("h4v/");function l(e){const{children:t,log:n}=e;return Object(o.useEffect)(()=>{if(n){const e=r.a.fromPlainObject(n);e.setEventType(13),e.setRequestIdentifier(a.a.initialPageContext.PAGE_LOAD_REQUEST_IDENTIFIER),s.a.getInstance().addEvent(e)}},[]),t||null}n("KGCn");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){const{name:t,upwtActionName:n,resourceDependencies:a=(()=>[]),routeContextLog:r=((e,t,n)=>null),redirect:s=(()=>null)}=e;return function(e){var d,u;return u=d=class extends o.Component{render(){const{params:t,location:n={}}=this.props,{legacy_server_context:o}=this.props.route||{};return i.a.createElement(l,{log:r(o||{},t||{},n||{})},i.a.createElement(e,this.props))}},c(d,"WrappedComponent",e),c(d,"routeName",t),c(d,"upwtActionName",n),c(d,"displayName","StaticRouteData"),c(d,"getResourceDependencies",a),c(d,"getRedirect",s),u}}n.d(t,"a",(function(){return d}))},GsvW:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return c}));var o=n("Ye/N");const i=656,a=464,r=60,s=170,l=e=>{const t=new Date(e),n=(new Date).getTime()-t.getTime();return Math.floor(n/1e3)<60?o.a._("now","timestamp for a comment or post that was created within the last minute"):o.a.getHumanizedTimesince(e,{isAbbreviated:!0})},c=e=>{const t=e.first_name||e.full_name||e.username;return t&&t.length>r?t.substring(0,r).trim().concat("..."):t}},HbTO:function(e,t,n){n.d(t,"a",(function(){return l}));var o=n("q1tI"),i=n.n(o),a=n("1Vso"),r=n("uXiN"),s=n("n6mq");function l({accessibilityLabel:e,bgColor:t,hoverBgColor:n,children:o,onClick:l}){return i.a.createElement(a.a,{accessibilityLabel:e,onClick:l,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none"}},({active:e,focused:a,hovered:l})=>i.a.createElement(r.a,{active:e,bgColor:t,focused:a,hovered:l,hoverBgColor:n,shape:"pill"},i.a.createElement(s.c,{display:"flex",alignItems:"center",justifyContent:"center",padding:1},o)))}},I7CA:function(e,t,n){n.d(t,"a",(function(){return r}));var o=n("q1tI"),i=n.n(o),a=n("n6mq");function r({children:e,additionalStyles:t={}}){return i.a.createElement(a.c,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}}},e)}},KNE1:function(e,t,n){var o=n("q1tI");class i{static factory(e){return e instanceof i?e:new i(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}n("QLaP");var a=n("17x9"),r=n.n(a);function s(e){const{css:t,unsafeCSS:n,...a}=e,r=String(t||"")||n||"";return!!r?o.createElement("style",{...a,dangerouslySetInnerHTML:{__html:String(i.factory(r))}}):null}n.d(t,"a",(function(){return s})),s.propTypes={"amp-boilerplate":r.a.string,"amp-custom":r.a.string,css:r.a.instanceOf(i),unsafeCSS:r.a.string}},MUNL:function(e,t,n){n.r(t);var o=n("q1tI"),i=n.n(o),a=n("Dcl4"),r=n("FF6m");const s=(...e)=>e.every(e=>!isNaN(e));t.default=Object(r.a)({name:"Flashlight",resourceDependencies:(e,t)=>[{name:"PinResource",options:{id:t.id,field_set_key:"detailed",fetch_visual_search_objects:!0}}]})((function({params:e,location:t,route:{props:{showProductsFeed:n}}}){const{id:o}=e,{query:r}=t,l=parseInt(r.x,10),c=parseInt(r.y,10),d=parseInt(r.w,10),u=parseInt(r.h,10),p=parseInt(r.cropSource,10)||void 0;return i.a.createElement(a.a,{pinId:o,initialCropArea:s(l,c,d,u)?{x:l,y:c,w:d,h:u}:void 0,initialCropSource:p,view:n?"products":"flashlight"})}))},NPsS:function(e,t,n){var o=function(){};e.exports=o},NwjN:function(e,t,n){var o=n("q1tI");t.a=Object(o.createContext)(0)},OBA1:function(e,t,n){var o=n("q1tI"),i=n.n(o);const a=6,r={nw:0,ne:90,se:180,sw:270},s={ne:[6,-6],se:[6,6],sw:[-6,6],nw:[-6,-6]},l={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},c=(e,t,n,o)=>{if("rounded"===o){const[o,i]=s[e];return`translate(${t+o}, ${n+i}), rotate(${r[e]})`}return`translate(${t}, ${n}), rotate(${r[e]})`};function d({corner:e,x:t,y:n,size:o,style:r}){return i.a.createElement("g",{transform:c(e,t,n,r),style:{cursor:l[e]}},i.a.createElement("rect",{fill:"rgba(0,0,0,0)",stroke:"none",x:0,y:0,width:o,height:o,className:`v2cropperHandle ${e}`}),"rounded"===r?i.a.createElement("path",{d:"M5,0C2.2,0,0,2.2,0,5v15h6V6h14V0H5z",fill:"#fff",className:`v2cropperHandle ${e}`}):i.a.createElement("path",{d:`M ${o} 0 L 0 0 L 0 ${o}`,fill:"none",stroke:"#fff",strokeWidth:a,className:`v2cropperHandle ${e}`}))}const u={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function p({edge:e,x:t,y:n,w:o,h:a}){return i.a.createElement("rect",{fill:"rgba(0,0,0,0)",stroke:"none",x:t,y:n,width:o,height:a,className:`v2cropperHandle ${e}`,style:{cursor:u[e]}})}const h=20;function m({x:e,y:t,w:n,h:a,inCropperImprovementExperiment:r}){const s=r?"rounded":"default";return i.a.createElement(o.Fragment,null,i.a.createElement(d,{corner:"nw",x:e,y:t,size:h,style:s}),i.a.createElement(d,{corner:"ne",x:e+n,y:t,size:h,style:s}),i.a.createElement(d,{corner:"sw",x:e,y:t+a,size:h,style:s}),i.a.createElement(d,{corner:"se",x:e+n,y:t+a,size:h,style:s}),r&&i.a.createElement(o.Fragment,null,i.a.createElement(p,{edge:"n",x:e+h,y:t-h/2,w:n-2*h,h:1.5*h}),i.a.createElement(p,{edge:"e",x:e+n-h,y:t+h,w:1.5*h,h:a-2*h}),i.a.createElement(p,{edge:"s",x:e+h,y:t+a-h/2,w:n-2*h,h:1.5*h}),i.a.createElement(p,{edge:"w",x:e-h,y:t+h,w:1.5*h,h:a-2*h})))}var f=n("n6mq"),g=n("pQ8y"),y=n("XCz/"),b=n("U4JR");function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=10,w=48;class _ extends i.a.Component{constructor(...e){super(...e),v(this,"state",{cropArea:this.props.initialCropArea||{h:0,w:0,x:0,y:0},cropChangeType:null}),v(this,"cropResizeDirection",null),v(this,"_cropperOverlay",Object(o.createRef)()),v(this,"_checkCropHandleValid",(e,t)=>{const{cropArea:{h:n,w:o,x:i,y:a}}=this.state;switch(this.cropResizeDirection){case"ne":e<i&&t>a+n?this.cropResizeDirection="sw":e<i?this.cropResizeDirection="nw":t>a+n&&(this.cropResizeDirection="se");break;case"nw":e>i+o&&t>a+n?this.cropResizeDirection="se":e>i+o?this.cropResizeDirection="ne":t>a+n&&(this.cropResizeDirection="sw");break;case"se":e<i&&t<a?this.cropResizeDirection="nw":e<i?this.cropResizeDirection="sw":t<a&&(this.cropResizeDirection="ne");break;case"sw":e>i+o&&t<a?this.cropResizeDirection="ne":e>i+o?this.cropResizeDirection="se":t<a&&(this.cropResizeDirection="nw");break;case"n":t>a+n&&(this.cropResizeDirection="s");break;case"s":t<a&&(this.cropResizeDirection="n");break;case"e":e<i&&(this.cropResizeDirection="w");break;case"w":e>i+o&&(this.cropResizeDirection="e")}}),v(this,"handleOnMouseDown",e=>{e.preventDefault(),e.stopPropagation();const{clientX:t,clientY:n}=e,o=e.target,i=t-this._cropperOverlayCoor.x,a=n-this._cropperOverlayCoor.y,r=Array.from(o.classList);r.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),r.includes("ne")&&(this.cropResizeDirection="ne"),r.includes("nw")&&(this.cropResizeDirection="nw"),r.includes("se")&&(this.cropResizeDirection="se"),r.includes("sw")&&(this.cropResizeDirection="sw"),r.includes("n")&&(this.cropResizeDirection="n"),r.includes("s")&&(this.cropResizeDirection="s"),r.includes("e")&&(this.cropResizeDirection="e"),r.includes("w")&&(this.cropResizeDirection="w")):r.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:i,y:a}):r.includes("v2shadowMask")&&(this.cropChangeStartCoor={x:i,y:a},this.setState({cropArea:{h:0,w:0,x:i,y:a},cropChangeType:"select"}))}),v(this,"handleOnMouseMove",e=>{const{cropArea:{h:t,w:n,x:o,y:i},cropChangeType:a}=this.state,{imageSize:r}=this.props,{clientX:s,clientY:l}=e,c=s-this._cropperOverlayCoor.x,d=l-this._cropperOverlayCoor.y;if("resize"===a){const e=Math.max(Math.min(c,r.w-E),E),a=Math.max(Math.min(d,r.h-E),E);switch(this._checkCropHandleValid(e,a),this.cropResizeDirection){case"ne":{const n=Math.max(t+(i-a),w),r=Math.max(e-o,w);this.setState({cropArea:{h:n,w:r,x:o,y:n<=w?i:a}});break}case"nw":{const r=Math.max(n+(o-e),w),s=Math.max(t+(i-a),w);this.setState({cropArea:{h:s,w:r,x:r===w?o:e,y:s===w?i:a}});break}case"se":{const t=Math.max(a-i,w),n=Math.max(e-o,w);this.setState({cropArea:{h:t,w:n,x:o,y:i}});break}case"sw":{const t=Math.max(a-i,w),r=Math.max(n+(o-e),w);this.setState({cropArea:{h:t,w:r,x:r===w?o:e,y:i}});break}case"n":{const e=Math.max(i-a+t,w);this.setState({cropArea:{h:e,w:n,x:o,y:e===w?i:a}});break}case"s":{const e=Math.max(a-i,w);this.setState({cropArea:{h:e,w:n,x:o,y:i}});break}case"e":{const n=Math.max(e-o,w);this.setState({cropArea:{h:t,w:n,x:o,y:i}});break}case"w":{const a=Math.max(n-e+o,w);this.setState({cropArea:{h:t,w:a,x:a===w?o:e,y:i}});break}}}else if("move"===a){const e=c-this.cropChangeStartCoor.x,a=d-this.cropChangeStartCoor.y,s=Math.max(Math.min(o+e,r.w-n-E),E),l=Math.max(Math.min(i+a,r.h-t-E),E);this.cropChangeStartCoor={x:c,y:d},this.setState({cropArea:{h:t,w:n,x:s,y:l}})}else if("select"===a){const e=Math.max(Math.min(c,r.w),0),t=Math.max(Math.min(d,r.h),0),n=e-this.cropChangeStartCoor.x,o=t-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(o),w:Math.abs(n),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,t)}})}}),v(this,"handleOnMouseUp",e=>{const{cropChangeType:t}=this.state;"resize"!==t&&"move"!==t&&"select"!==t||this.handleCrop(),this.cropResizeDirection=null})}componentDidMount(){const e=document.body,t=this._cropperOverlay.current;if(t&&e&&(window.addEventListener("mouseup",this.handleOnMouseUp),e.addEventListener("mousemove",this.handleOnMouseMove),t.addEventListener("mousedown",this.handleOnMouseDown),t)){const e=t.getBoundingClientRect();this._cropperOverlayCoor={x:e.left,y:e.top}}}componentWillUnmount(){const e=document.body,t=this._cropperOverlay.current;t&&e&&(window.removeEventListener("mouseup",this.handleOnMouseUp),e.removeEventListener("mousemove",this.handleOnMouseMove),t.removeEventListener("mousedown",this.handleOnMouseDown))}handleCrop(){const{imageSize:e,onChange:t}=this.props,{cropChangeType:n,cropArea:o}=this.state;if(0===o.w&&0===o.h)this.setState({cropChangeType:null}),t({origCrop:{h:e.h-2*E,w:e.w-2*E,x:E,y:E}});else{this.setState({cropChangeType:null});const i=Math.max(Math.min(o.x,e.w-w-E),E),a=Math.max(Math.min(o.y,e.h-w-E),E);let r,s;switch(r=o.h<w?w:a+o.h>e.h-E?e.h-a-E:o.h,s=o.w<w?w:i+o.w>e.w-E?e.w-i-E:o.w,n){case"move":Object(b.a)(7603,{view:72});break;case"resize":Object(b.a)(7604,{view:72})}t({origCrop:{h:r,w:s,x:i,y:a}})}}render(){const{children:e,previewCropArea:t,showPreviewArea:n}=this.props,{cropArea:{h:o,w:a,x:r,y:s},cropChangeType:l}=this.state;return i.a.createElement(y.a,{name:"web_flashlight_update_cropper_v2"},({anyEnabled:c})=>i.a.createElement(f.c,{ref:this._cropperOverlay,position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}}},i.a.createElement("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},i.a.createElement("defs",null,i.a.createElement("mask",{id:"Mask"},i.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",rx:"0",ry:"0",fill:"#fff"}),i.a.createElement("rect",{key:`${r}${s}`,x:r,y:s,width:a,height:o,id:"hole",rx:c?0:4,ry:c?0:4}),i.a.createElement(g.a,{in:n&&!l,timeout:300,classNames:"preview-crop-area",mountOnEnter:!0,unmountOnExit:!0},i.a.createElement("rect",{key:`${t.x}${t.y}`,x:t.x,y:t.y,width:t.w,height:t.h,id:"preview",rx:4,ry:4})))),i.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",style:{fill:"rgba(0,0,0,0.5)"},mask:"url(#Mask)",className:"v2shadowMask"}),i.a.createElement("use",{href:"#hole",fill:"rgba(0,0,0,0)",stroke:c?"#fff":"none",strokeWidth:"2",className:"v2cropSection",style:{cursor:"move"}}),"select"!==l&&i.a.createElement(m,{x:r,y:s,w:a,h:o,inCropperImprovementExperiment:c})),e))}}var O=n("hLcf"),C=n("TSYQ"),S=n.n(C);function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const T=10,x=48,R=4;class P extends i.a.Component{constructor(...e){super(...e),I(this,"state",{cropArea:this.props.initialCropArea||{h:0,w:0,x:0,y:0},cropChangeType:null,showShadowOverlay:!0}),I(this,"cropResizeDirection",null),I(this,"_checkCropHandleValid",(e,t)=>{const{cropArea:{h:n,w:o,x:i,y:a}}=this.state;switch(this.cropResizeDirection){case"ne":e<i&&t>a+n?this.cropResizeDirection="sw":e<i?this.cropResizeDirection="nw":t>a+n&&(this.cropResizeDirection="se");break;case"nw":e>i+o&&t>a+n?this.cropResizeDirection="se":e>i+o?this.cropResizeDirection="ne":t>a+n&&(this.cropResizeDirection="sw");break;case"se":e<i&&t<a?this.cropResizeDirection="nw":e<i?this.cropResizeDirection="sw":t<a&&(this.cropResizeDirection="ne");break;case"sw":e>i+o&&t<a?this.cropResizeDirection="ne":e>i+o?this.cropResizeDirection="se":t<a&&(this.cropResizeDirection="nw")}}),I(this,"handleOnTouchStart",e=>{if(e.preventDefault(),e.stopPropagation(),e.target){const{clientX:t,clientY:n}=e.touches[0];this.handleOnPointerDown(e,t,n)}}),I(this,"handleOnMouseDown",e=>{if(e.preventDefault(),e.stopPropagation(),e.target){const{clientX:t,clientY:n}=e;this.handleOnPointerDown(e,t,n)}}),I(this,"handleOnPointerDown",(e,t,n)=>{const o=e.target,{showShadowOverlay:i}=this.state,a=this._cropperOverlay.getBoundingClientRect();this._cropperOverlayCoor={x:a.left,y:a.top};const r=t-this._cropperOverlayCoor.x,s=n-this._cropperOverlayCoor.y,l=Array.from(o.classList);l.includes("cropperHandle")||l.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),l.includes("ne")&&(this.cropResizeDirection="ne"),l.includes("nw")&&(this.cropResizeDirection="nw"),l.includes("se")&&(this.cropResizeDirection="se"),l.includes("sw")&&(this.cropResizeDirection="sw"),l.includes("n")&&(this.cropResizeDirection="n"),l.includes("s")&&(this.cropResizeDirection="s"),l.includes("e")&&(this.cropResizeDirection="e"),l.includes("w")&&(this.cropResizeDirection="w")):l.includes("cropSection")||l.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:r,y:s}):!l.includes("shadowMask")&&i||(this.cropChangeStartCoor={x:r,y:s},this.setState({cropArea:{h:0,w:0,x:r,y:s},cropChangeType:"select",showShadowOverlay:!0}))}),I(this,"handleOnTouchMove",e=>this._cropperOverlayCoor&&this.handleOnPointerMove(e.touches[0].clientX,e.touches[0].clientY)),I(this,"handleOnMouseMove",e=>this._cropperOverlayCoor&&this.handleOnPointerMove(e.clientX,e.clientY)),I(this,"handleOnPointerMove",(e,t)=>{const{cropArea:{h:n,w:o,x:i,y:a},cropChangeType:r}=this.state,{imageSize:s}=this.props,l=e-this._cropperOverlayCoor.x,c=t-this._cropperOverlayCoor.y;if("resize"===r){const e=Math.max(Math.min(l,s.w-T),T),t=Math.max(Math.min(c,s.h-T),T);switch(this._checkCropHandleValid(e,t),this.cropResizeDirection){case"ne":{const o=Math.max(n+(a-t),x),r=Math.max(Math.abs(e-i),x);this.setState({cropArea:{h:o,w:r,x:i,y:o<=x?a:t}});break}case"nw":{const r=Math.max(o+(i-e),x),s=Math.max(n+(a-t),x);this.setState({cropArea:{h:s,w:r,x:r===x?i:e,y:s===x?a:t}});break}case"se":{const n=Math.max(Math.abs(t-a),x),o=Math.max(Math.abs(e-i),x);this.setState({cropArea:{h:n,w:o,x:i,y:a}});break}case"sw":{const n=Math.max(Math.abs(t-a),x),r=Math.max(o+(i-e),x);this.setState({cropArea:{h:n,w:r,x:r===x?i:e,y:a}});break}case"n":{const e=Math.max(a-t+n,x);this.setState({cropArea:{h:e,w:o,x:i,y:e===x?a:t}});break}case"s":{const e=Math.max(t-a,x);this.setState({cropArea:{h:e,w:o,x:i,y:a}});break}case"e":{const t=Math.max(e-i,x);this.setState({cropArea:{h:n,w:t,x:i,y:a}});break}case"w":{const t=Math.max(o-e+i,x);this.setState({cropArea:{h:n,w:t,x:t===x?i:e,y:a}});break}}}else if("move"===r){const e=l-this.cropChangeStartCoor.x,t=c-this.cropChangeStartCoor.y,r=Math.max(Math.min(i+e,s.w-o-T),T),d=Math.max(Math.min(a+t,s.h-n-T),T);this.cropChangeStartCoor={x:l,y:c},this.setState({cropArea:{h:n,w:o,x:r,y:d}})}else if("select"===r){const e=Math.max(Math.min(l,s.w),0),t=Math.max(Math.min(c,s.h),0),n=e-this.cropChangeStartCoor.x,o=t-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(o),w:Math.abs(n),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,t)}})}}),I(this,"handleOnMouseUp",e=>this.handleOnPointerUp()),I(this,"handleOnTouchEnd",e=>this.handleOnPointerUp()),I(this,"handleOnPointerUp",()=>{const{cropChangeType:e}=this.state;"resize"!==e&&"move"!==e&&"select"!==e||this.handleCrop(),this.cropResizeDirection=null})}componentDidMount(){this._cropperOverlay&&document.body&&(window.addEventListener("mouseup",this.handleOnMouseUp),document.body.addEventListener("mousemove",this.handleOnMouseMove),this._cropperOverlay.addEventListener("mousedown",this.handleOnMouseDown))}UNSAFE_componentWillReceiveProps(e){e.initialCropArea&&(this.props.initialCropArea&&e.initialCropArea.h===this.props.initialCropArea.h&&e.initialCropArea.w===this.props.initialCropArea.w&&e.initialCropArea.x===this.props.initialCropArea.x&&e.initialCropArea.y===this.props.initialCropArea.y||this.setState({cropArea:e.initialCropArea}))}componentWillUnmount(){this._cropperOverlay&&document.body&&(window.removeEventListener("mouseup",this.handleOnMouseUp),document.body.removeEventListener("mousemove",this.handleOnMouseMove),this._cropperOverlay.removeEventListener("mousedown",this.handleOnMouseDown))}handleCrop(){const{imageSize:e,onChange:t}=this.props,{cropChangeType:n,cropArea:o}=this.state;if(0===o.w&&0===o.h)this.setState({showShadowOverlay:!1,cropChangeType:null}),t({origCrop:{h:e.h-2*T,w:e.w-2*T,x:T,y:T}});else{this.setState({showShadowOverlay:!0,cropChangeType:null});const i=Math.max(Math.min(o.x,e.w-x-T),T),a=Math.max(Math.min(o.y,e.h-x-T),T);let r,s;switch(r=o.h<x?x:a+o.h>e.h-T?e.h-a-T:o.h,s=o.w<x?x:i+o.w>e.w-T?e.w-i-T:o.w,n){case"move":Object(b.a)(7603,{view:72});break;case"resize":Object(b.a)(7604,{view:72})}t({origCrop:{h:r,w:s,x:i,y:a}})}}render(){const{imageSize:{h:e,w:t},children:n}=this.props,{cropArea:{h:o,w:a,x:r,y:s},cropChangeType:l,showShadowOverlay:c}=this.state,d=S()("shadowOverlay","absolute",{shadowOverlayHide:!c});return i.a.createElement(y.a,{name:"web_flashlight_update_cropper_v2"},({anyEnabled:u})=>i.a.createElement("div",{className:"cropperWrapper",onTouchMove:this.handleOnTouchMove,onTouchEnd:this.handleOnTouchEnd},i.a.createElement("div",{className:"relative",ref:e=>{this._cropperOverlay=e},onTouchStart:this.handleOnTouchStart},i.a.createElement("div",{className:`cropSection absolute ${u?"fancy":""}`,style:{height:o,left:r,top:s,width:a}},"select"!==l&&c&&i.a.createElement("svg",{className:"v2cropSection",style:{height:u?o-R:o,width:u?a-R:a,overflow:"visible"}},i.a.createElement(m,{x:0,y:0,w:u?a-R:a,h:u?o-R:o,inCropperImprovementExperiment:u}))),i.a.createElement("div",{className:d},i.a.createElement("div",{className:"shadowMask absolute",style:{height:s,left:0,top:0,width:"100%"}}),i.a.createElement("div",{className:"shadowMask absolute",style:{height:o,left:0,top:s,width:r}}),i.a.createElement("div",{className:"shadowMask absolute",style:{height:e-s-o,left:0,top:s+o,width:"100%"}}),i.a.createElement("div",{className:"shadowMask absolute",style:{height:o,left:r+a,top:s,width:t-r-a}})),i.a.createElement("div",{className:"absolute cropperAdditional"},n))))}}var k=n("BlMG"),M=n("uhAL");function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return D}));const A=4;class D extends o.Component{constructor(e){super(e),N(this,"handleChange",({origCrop:e})=>{const{onChange:t}=this.props;t({origCrop:e,cropSource:6})}),N(this,"handleSpotlightClick",e=>{const{imageSize:t,onChange:n,spotlightAreas:o}=this.props,i=o[e];n({origCrop:Object(M.e)({cropArea:i,scaledWidth:t.w,scaledHeight:t.h}),cropSource:i.is_stela?4:1})}),N(this,"handleSpotlightHover",e=>{const{currentSpotlightIdx:t}=this.state,{imageSize:n,spotlightAreas:o}=this.props;e!==t&&this.setState({showPreviewArea:!0,previewSpotlightArea:Object(M.e)({cropArea:o[e],scaledWidth:n.w,scaledHeight:n.h})})}),N(this,"handleSpotlightUnHover",()=>{this.setState({showPreviewArea:!1})}),N(this,"renderSpotlightDots",()=>{const{showAnimation:e,imageSize:t,spotlightAreas:n,imageSignature:o,pinId:a}=this.props,{currentSpotlightIdx:r}=this.state;return i.a.createElement(O.a,{showAnimation:e,pinId:a,handleSpotlightHover:this.handleSpotlightHover,handleSpotlightUnhover:this.handleSpotlightUnHover,imageSignature:o,imageSize:t,currentSpotlightIdx:r,spotlightAreas:n,handleSpotlightClick:this.handleSpotlightClick})});const{imageSize:t,initialCropArea:n,spotlightAreas:o}=this.props,a=o.findIndex(e=>Object(M.a)(n,Object(M.e)({cropArea:e,scaledWidth:t.w,scaledHeight:t.h}),A));this.state={currentSpotlightIdx:a,showPreviewArea:!1,previewSpotlightArea:{w:0,h:0,x:0,y:0}}}UNSAFE_componentWillReceiveProps(e){const{imageSize:t,initialCropArea:n,spotlightAreas:o}=e,i=o.findIndex(e=>Object(M.a)(n,Object(M.e)({cropArea:e,scaledWidth:t.w,scaledHeight:t.h}),A));this.setState({currentSpotlightIdx:i})}render(){const{imageSize:e,initialCropArea:t,spotlightAreas:n}=this.props,{previewSpotlightArea:o,showPreviewArea:a}=this.state,r=n&&!!n.length;return i.a.createElement(y.a,{name:"web_flashlight_update_cropper"},({anyEnabled:n})=>n?i.a.createElement(_,{imageSize:e,initialCropArea:t,onChange:this.handleChange,onContextMenu:e=>{e.stopPropagation(),Object(k.a)("auth.context_menu_open.pin_visual_search")},previewCropArea:o,showPreviewArea:!1},r&&this.renderSpotlightDots()):i.a.createElement(P,{imageSize:e,initialCropArea:t,onChange:this.handleChange,onContextMenu:e=>{e.stopPropagation(),Object(k.a)("auth.context_menu_open.pin_visual_search")}},r&&this.renderSpotlightDots()))}}N(D,"defaultProps",{spotlightAreas:[]})},QEso:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n("q1tI"),s=f(r),l=f(n("17x9")),c=m(n("VKEO")),d=f(n("S1to")),u=m(n("Ye7m")),p=m(n("fbhf")),h=f(n("2zs7"));function m(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var g={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},y=9,b=27,v=0,E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setOverlayRef=function(e){n.overlay=e,n.props.overlayRef&&n.props.overlayRef(e)},n.setContentRef=function(e){n.content=e,n.props.contentRef&&n.props.contentRef(e)},n.afterClose=function(){var e=n.props,t=e.appElement,o=e.ariaHideApp,i=e.htmlOpenClassName,a=e.bodyOpenClassName;a&&p.remove(document.body,a),i&&p.remove(document.getElementsByTagName("html")[0],i),o&&v>0&&0===(v-=1)&&u.show(t),n.props.shouldFocusAfterRender&&(n.props.shouldReturnFocusAfterClose?(c.returnFocus(),c.teardownScopedFocus()):c.popWithoutFocus()),n.props.onAfterClose&&n.props.onAfterClose()},n.open=function(){n.beforeOpen(),n.state.afterOpen&&n.state.beforeClose?(clearTimeout(n.closeTimer),n.setState({beforeClose:!1})):(n.props.shouldFocusAfterRender&&(c.setupScopedFocus(n.node),c.markForFocusLater()),n.setState({isOpen:!0},(function(){n.setState({afterOpen:!0}),n.props.isOpen&&n.props.onAfterOpen&&n.props.onAfterOpen()})))},n.close=function(){n.props.closeTimeoutMS>0?n.closeWithTimeout():n.closeWithoutTimeout()},n.focusContent=function(){return n.content&&!n.contentHasFocus()&&n.content.focus()},n.closeWithTimeout=function(){var e=Date.now()+n.props.closeTimeoutMS;n.setState({beforeClose:!0,closesAt:e},(function(){n.closeTimer=setTimeout(n.closeWithoutTimeout,n.state.closesAt-Date.now())}))},n.closeWithoutTimeout=function(){n.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},n.afterClose)},n.handleKeyDown=function(e){e.keyCode===y&&(0,d.default)(n.content,e),n.props.shouldCloseOnEsc&&e.keyCode===b&&(e.stopPropagation(),n.requestClose(e))},n.handleOverlayOnClick=function(e){null===n.shouldClose&&(n.shouldClose=!0),n.shouldClose&&n.props.shouldCloseOnOverlayClick&&(n.ownerHandlesClose()?n.requestClose(e):n.focusContent()),n.shouldClose=null},n.handleContentOnMouseUp=function(){n.shouldClose=!1},n.handleOverlayOnMouseDown=function(e){n.props.shouldCloseOnOverlayClick||e.target!=n.overlay||e.preventDefault()},n.handleContentOnClick=function(){n.shouldClose=!1},n.handleContentOnMouseDown=function(){n.shouldClose=!1},n.requestClose=function(e){return n.ownerHandlesClose()&&n.props.onRequestClose(e)},n.ownerHandlesClose=function(){return n.props.onRequestClose},n.shouldBeClosed=function(){return!n.state.isOpen&&!n.state.beforeClose},n.contentHasFocus=function(){return document.activeElement===n.content||n.content.contains(document.activeElement)},n.buildClassName=function(e,t){var o="object"===(void 0===t?"undefined":i(t))?t:{base:g[e],afterOpen:g[e]+"--after-open",beforeClose:g[e]+"--before-close"},a=o.base;return n.state.afterOpen&&(a=a+" "+o.afterOpen),n.state.beforeClose&&(a=a+" "+o.beforeClose),"string"==typeof t&&t?a+" "+t:a},n.attributesFromObject=function(e,t){return Object.keys(t).reduce((function(n,o){return n[e+"-"+o]=t[o],n}),{})},n.state={afterOpen:!1,beforeClose:!1},n.shouldClose=null,n.moveFromContentToOverlay=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(e,t){this.props.isOpen&&!e.isOpen?this.open():!this.props.isOpen&&e.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!t.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer)}},{key:"beforeOpen",value:function(){var e=this.props,t=e.appElement,n=e.ariaHideApp,o=e.htmlOpenClassName,i=e.bodyOpenClassName;i&&p.add(document.body,i),o&&p.add(document.getElementsByTagName("html")[0],o),n&&(v+=1,u.hide(t))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.className,i=e.overlayClassName,a=e.defaultStyles,r=n?{}:a.content,l=i?{}:a.overlay;return this.shouldBeClosed()?null:s.default.createElement("div",{ref:this.setOverlayRef,className:this.buildClassName("overlay",i),style:o({},l,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},s.default.createElement("div",o({id:t,ref:this.setContentRef,style:o({},r,this.props.style.content),className:this.buildClassName("content",n),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",this.props.aria||{}),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),this.props.children))}}]),t}(r.Component);E.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},E.propTypes={isOpen:l.default.bool.isRequired,defaultStyles:l.default.shape({content:l.default.object,overlay:l.default.object}),style:l.default.shape({content:l.default.object,overlay:l.default.object}),className:l.default.oneOfType([l.default.string,l.default.object]),overlayClassName:l.default.oneOfType([l.default.string,l.default.object]),bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,ariaHideApp:l.default.bool,appElement:l.default.instanceOf(h.default),onAfterOpen:l.default.func,onAfterClose:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,role:l.default.string,contentLabel:l.default.string,aria:l.default.object,data:l.default.object,children:l.default.node,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func,id:l.default.string,testId:l.default.string},t.default=E,e.exports=t.default},R0ru:function(e,t,n){n.r(t);var o=n("q1tI"),i=n.n(o),a=n("i8i4"),r=n.n(a),s=n("/MKj"),l=n("clxp");class c{constructor(e=[],t=(()=>null)){var n,o,i;i=[],(o="items")in(n=this)?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,this.items=e,this.getItemLayoutInfo=t}}var d=n("QWsV"),u=n.n(d),p=n("TSYQ"),h=n.n(p),m=n("/qfL"),f=n.n(m),g=n("Y+p1"),y=n.n(g);const b=200;var v=function({layout:e,overscan:t=b,scrollContainerSize:n,scrollPosition:o,children:i}){const a=Math.max(0,o.top),r=Math.max(0,o.left),s=Math.min(Math.max(0,n.width+o.left),n.width),l=Math.min(Math.max(0,n.height+o.top),n.height),d=a-t,u=a+l+t,p=r-t,h=r+s+t,m=e.items.filter(t=>{const n=e.getItemLayoutInfo(t);if(!n)return!1;const{size:o,position:i}=n;return!o||!i||i.top+o.height>=d&&i.top<=u&&i.left+o.width>=p&&i.left<=h}),f=new c(m,e.getItemLayoutInfo);return f.size=e.size,f.contentFilledSize=e.contentFilledSize,f.isMeasuring=e.isMeasuring,i(f,e.size?e.size:void 0)};class E extends o.Component{constructor(...e){var t,n,o;super(...e),t=this,n="itemSizeCache",o=new WeakMap,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}componentDidMount(){this.componentDidRender()}shouldComponentUpdate(e){const{customSize:t,layout:n}=e,{customSize:o,layout:i}=this.props;if(!y()(o,t))return!0;if(n.items.length!==i.items.length)return!0;if(n.items.some((e,t)=>e!==i.items[t]))return!0;const a=n.items.map(n.getItemLayoutInfo),r=i.items.map(i.getItemLayoutInfo);return!(!a.some((e,t)=>e!==r[t])||!a.some((e,t)=>!y()(e,r[t])))}componentDidUpdate(){this.componentDidRender()}componentDidRender(){const{onRenderedItems:e}=this.props;e&&e(this.itemSizeCache),this.itemSizeCache=new WeakMap}measureItem(e,t){t&&this.itemSizeCache.set(e,{width:t.clientWidth||0,height:t.clientHeight||0})}render(){const{renderItem:e,layout:t,customSize:n,itemsToMeasureLimit:i}=this.props,a=[],r=[];t.items.forEach((n,s)=>{const l=t.getItemLayoutInfo(n);if(!l)return;const c="number"==typeof l.customIndex?l.customIndex:s,d=`item-${c}`;if(!l.size&&a.length<(i||1/0)){const t=e({item:n,index:c,isMeasuring:!0,constraints:l.constraints});a.push(o.createElement("div",{className:"Collection-Item Collection-Item-Measuring",style:{pointerEvents:"none",position:"absolute",visibility:"hidden",top:-9999,left:-9999,...l.constraints},key:d,ref:e=>this.measureItem(n,e)},t))}if(l.position){const t=e({item:n,index:c,isMeasuring:!1,constraints:l.constraints});if(!l.position)return;r.push(o.createElement("div",{className:"Collection-Item",style:{position:"absolute",top:0,left:0,transform:`translate(${l.position.left}px, ${l.position.top}px)`,...l.size},key:d},t))}});const s=n||t.size;return o.createElement("div",{style:{position:"relative",...s},className:"Collection"},a,r)}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _=e=>e.filter(e=>!!e),O=(e,t)=>e!==t&&(e.length!==t.length||!e.every((e,n)=>e===t[n])),C=(e,t)=>{const n=new WeakMap;let o=!1;return e.items.forEach(i=>{const a=e.getItemLayoutInfo(i),r=t.get(i);a&&r&&!y()(a.size,r)&&(n.set(i,{...a,size:r}),o=!0)}),o?new c(e.items,t=>n.get(t)||e.getItemLayoutInfo(t)):e};class S extends o.Component{constructor(...e){super(...e),w(this,"state",{items:[],scrollContainerSize:this.props.scrollContainerSize,scrollPosition:this.props.scrollPosition,contentContainerSize:this.props.contentContainerSize,layout:this.props.initialLayout||new c}),w(this,"contentContainerRef",o.createRef()),w(this,"handleItemsRendered",e=>{this.handleItemsRenderedAnimationFrame||(this.handleItemsRenderedAnimationFrame=requestAnimationFrame(()=>{this.handleItemsRenderedAnimationFrame=null;const{getItemLayoutOptions:t,layoutEngine:n,onLayoutUpdated:o}=this.props,{layout:i,items:a,contentContainerSize:r}=this.state,s=C(i,e);if(i===s)o&&o(i);else{const e=n.buildLayout({containerSize:r,items:_(a),getItemLayoutOptions:t,previousLayout:s});this.setState({layout:e})}}))}),w(this,"renderCollection",(e,t)=>{const{renderItem:n,itemsToMeasureLimit:i,scrollContainerSize:a,contentContainerSize:r}=this.props,s="function"==typeof i?i({layout:e,scrollContainerSize:a,contentContainerSize:r}):i||1/0;return o.createElement(E,{renderItem:n,layout:e,onRenderedItems:this.handleItemsRendered,customSize:t,itemsToMeasureLimit:s})})}shouldComponentUpdate(e,t){const{virtualize:n}=e,{layout:o,scrollPosition:i,scrollContainerSize:a,contentContainerSize:r}=this.state,{layout:s,scrollPosition:l,scrollContainerSize:c,contentContainerSize:d}=t;return s!==o||(!y()(d,r)||(!y()(c,a)||!(!n||y()(l,i))))}static getDerivedStateFromProps(e,t){const{items:n,getItemLayoutOptions:o,layoutEngine:i,scrollContainerSize:a,scrollPosition:r,contentContainerSize:s}=e,{items:l,contentContainerSize:c,layout:d}=t,u={scrollContainerSize:a,scrollPosition:r,items:n};if(O(l,n)||!y()(s,c)){return{layout:i.buildLayout({containerSize:s,items:_(n),getItemLayoutOptions:o,previousLayout:d}),contentContainerSize:s,...u}}return u}componentWillUnmount(){this.handleItemsRenderedAnimationFrame&&cancelAnimationFrame(this.handleItemsRenderedAnimationFrame)}getLayout(){return this.state.layout}render(){const{virtualize:e,virtualOverscan:t}=this.props,{layout:n,scrollPosition:i,scrollContainerSize:a,contentContainerSize:r}=this.state;let s=null;if(e&&a&&i){const e="function"==typeof t?t({layout:n,scrollContainerSize:a,contentContainerSize:r}):t||0;s=o.createElement(v,{layout:n,scrollContainerSize:a,scrollPosition:i,overscan:e},this.renderCollection)}else s=this.renderCollection(n);return o.createElement("div",{className:"LayoutRenderer"},s)}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}w(S,"defaultProps",{virtualOverscan:({scrollContainerSize:e})=>2*Math.max(e.width,e.height)});const T={Masonry:{overflowAnchor:"none"}};class x extends o.Component{constructor(...e){super(...e),I(this,"layoutRendererRef",o.createRef()),I(this,"handleLayoutUpdated",e=>{const{onLayoutUpdated:t,scrollTracker:n}=this.props;t&&t(e),n&&n.handleLayoutUpdated(e)})}componentDidMount(){const{scrollTracker:e,scrollContainerSize:t,scrollPosition:n}=this.props;if(e){t&&e.handleContainerResized(t),n&&e.handleContainerScrolled(n);const o=this.layoutRendererRef.current?this.layoutRendererRef.current.getLayout():null;o&&e.handleLayoutUpdated(o)}}render(){const{items:e,renderItem:t,getItemLayoutOptions:n,layoutEngine:i,initialLayout:a,virtualize:r,scrollContainerSize:s,scrollPosition:l,virtualOverscan:c,itemsToMeasureLimit:d}=this.props;return o.createElement(u.a,{disableHeight:!0,className:"AutoSizer"},u=>{const p={width:u.width||0,height:u.height||0};return o.createElement(S,{ref:this.layoutRendererRef,items:e,renderItem:t,getItemLayoutOptions:n,layoutEngine:i,onLayoutUpdated:this.handleLayoutUpdated,initialLayout:a,scrollContainerSize:s,scrollPosition:l,contentContainerSize:p,virtualize:r,virtualOverscan:c,itemsToMeasureLimit:d})})}}class R extends o.Component{constructor(...e){super(...e),I(this,"windowScrollerRef",o.createRef()),I(this,"handleWindowScrollerResized",e=>{const{scrollTracker:t}=this.props;t&&t.handleContainerResized(e)}),I(this,"handleWindowScrollerScrolled",({scrollTop:e,scrollLeft:t})=>{const{scrollTracker:n}=this.props;n&&n.handleContainerScrolled({left:t,top:e})})}updatePosition(){this.windowScrollerRef.current&&this.windowScrollerRef.current.updatePosition()}render(){const{scrollContainer:e}=this.props;return o.createElement(f.a,{scrollElement:e,ref:this.windowScrollerRef,onResize:this.handleWindowScrollerResized,onScroll:this.handleWindowScrollerScrolled},({height:e,width:t,scrollTop:n,scrollLeft:i})=>{const a={...this.props,scrollContainerSize:{height:e,width:t},scrollPosition:{left:i,top:n}};return o.createElement(x,a)})}}class P extends o.PureComponent{constructor(...e){super(...e),I(this,"state",{mounted:!1}),I(this,"masonryWindowScrollerRef",o.createRef())}componentDidMount(){this.setState({mounted:!0})}updatePosition(){this.masonryWindowScrollerRef.current&&this.masonryWindowScrollerRef.current.updatePosition()}render(){const{scrollContainer:e}=this.props,{mounted:t}=this.state;return o.createElement("div",{className:h()("Masonry",{"Masonry-Premount":!t}),style:T.Masonry},e?o.createElement(R,{ref:this.masonryWindowScrollerRef,...this.props}):o.createElement(x,this.props))}}I(P,"defaultProps",{virtualize:!1});const k=2,M=250,N=20,A=!1;class D{constructor(e){this.minCols=e&&"number"==typeof e.minCols?e.minCols:k,this.colWidth=e&&"number"==typeof e.colWidth?e.colWidth:M,this.gutter=e&&"number"==typeof e.gutter?e.gutter:N,this.flexible=e&&"boolean"==typeof e.flexible?e.flexible:A}static getColumnIndex(e){let t=0;for(let n=0;n<e.length;n+=1)e[n]<e[t]&&(t=n);return t}getColumnInfo(e){const{gutter:t,minCols:n}=this;let o,{colWidth:i}=this;if(!e||0===i)return{width:0,count:0};if(this.flexible){const a=Math.floor(e.width/i);o=Math.max(Math.floor((e.width-a*t)/i),n),e.width&&(i=Math.floor((e.width-(o+1)*t)/o))}else{const a=Math.floor((e.width+t)/(i+t));o=Math.max(a,n)}return{width:i,count:o}}buildLayout(e){throw new Error("Subclasses must implement")}}class L extends D{buildLayout({containerSize:e,items:t,previousLayout:n}){const{width:o,count:i}=this.getColumnInfo(e),a=new Array(i).fill(0),r=new WeakMap;let s=!1;const l={width:0,height:0};t.forEach((e,t)=>{const c=n?n.getItemLayoutInfo(e):void 0;if(i>0&&c&&c.size){const n=c.size;if(!n.width||!n.height)throw new Error("Items that have been measured should always have a width and height.");const i=L.getColumnIndex(a),s=a[i],d=s+(0===s?0:this.gutter),u=i*(o+this.gutter);r.set(e,{...c,size:{...c.size,width:o},position:{left:u,top:d},customIndex:t}),a[i]=d+n.height,l.width<u+n.width&&(l.width=u+n.width),l.height<d+n.height&&(l.height=d+n.height)}else r.set(e,{constraints:{width:o}}),s=!0});const d=new c(t,e=>r.get(e));return d.size=l,d.contentFilledSize={width:l.width,height:Math.min(...a)},d.isMeasuring=s,d}}class j extends D{buildLayout({containerSize:e,items:t,previousLayout:n}){const{width:o,count:i}=this.getColumnInfo(e),a=new WeakMap;let r=0,s=[],l=0,d=0,u=!1;const p={width:0,height:0};let h=0;for(let c=0;c<t.length;c+=1){const e=t[c],p=n?n.getItemLayoutInfo(e):void 0;if(i>0&&p&&p.size){const n=p.size;if(!n.width||!n.height)throw new Error("Items that have been measured should always have a width and height.");if(s[l%i]={item:e,itemLayoutInfo:p},n.height>d&&(d=n.height),s.length===i||c===t.length-1){for(let e=0;e<s.length;e+=1){const t=s[e],{size:n,constraints:i}=t.itemLayoutInfo;if(!n||!i)throw new Error("Row entries must already have sizes and constraints.");a.set(t.item,{size:{width:o,height:n.height},position:{left:e*(o+this.gutter),top:r},constraints:i,customIndex:c})}s.length===i&&(h=r+d),r+=d+this.gutter,s=[],d=0}l+=1}else a.set(e,{constraints:{width:o}}),u=!0}const m=new c(t,e=>a.get(e));return m.size=p,m.contentFilledSize={width:p.width,height:h},m.isMeasuring=u,m}}var B=n("DzJC"),z=n.n(B);function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const U=({containerSize:e})=>2*e.height,H=100;class G{constructor(e,t=U){F(this,"isMeasuring",!1),F(this,"isFetching",!1),F(this,"fetchMoreIfReady",z()(()=>{if(this.isMeasuring||this.isFetching)return;if(!this.scrollPosition||!this.containerSize||!this.layoutSize)return;this.scrollPosition.top+this.containerSize.height+("function"==typeof this.fetchOverscan?this.fetchOverscan({layoutSize:this.layoutSize,scrollPosition:this.scrollPosition,containerSize:this.containerSize}):this.fetchOverscan)<this.layoutSize.height||(this.isFetching=!0,this.fetchMore())},H)),this.fetchMore=e,this.fetchOverscan=t}handleLayoutUpdated(e){(!this.items||this.items&&this.items.length!==e.items.length)&&(this.isFetching=!1),this.layoutSize=e.size,this.isMeasuring=!!e.isMeasuring,this.items=e.items,this.fetchMoreIfReady()}handleContainerResized(e){this.containerSize=e,this.fetchMoreIfReady()}handleContainerScrolled(e){this.scrollPosition=e,this.fetchMoreIfReady()}}var V=n("dKiF");function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const q=Object(V.c)(e=>({containerSize:t})=>Math.max(0,2*t.height+e)),K=({scrollContainerSize:e})=>.7*e.height,$=e=>e?"function"==typeof e?e():e:"undefined"!=typeof window?window:null;class Y extends o.PureComponent{static getDerivedStateFromProps({layout:e,minCols:t,columnWidth:n,gutterWidth:o,flexible:i}){return{layoutEngine:Y.layoutOptionsToLayoutEngine({layout:e,minCols:t,columnWidth:n,gutterWidth:o,flexible:i})}}constructor(e){super(e),W(this,"getScrollTracker",Object(V.d)((e,t)=>{const n=q(t);return"function"==typeof e?new G(this.fetchMore,n):void 0})),W(this,"getItemsToMeasureLimit",({contentContainerSize:e})=>{const{items:t}=this.props,{layoutEngine:n,initialItemCount:o}=this.state;return t.length===o?1/0:n.getColumnInfo(e).count}),W(this,"masonryRef",o.createRef()),W(this,"fetchMore",()=>{return new Promise(e=>{const{items:t,loadItems:n}=this.props;"function"==typeof n?setTimeout(()=>{n({from:t.length}),e(!0)}):e(!1)})}),W(this,"handleLayoutUpdated",e=>{const{measurementStore:t}=this.state;t.layout=e}),W(this,"renderItem",({item:e,index:t,isMeasuring:n,constraints:i})=>{const{comp:a}=this.props;return o.createElement(a,{data:e,itemIdx:t,isMeasuring:n,constraints:i})});const{minCols:t,columnWidth:n,gutterWidth:i,flexible:a,layout:r,measurementStore:s,items:l}=e,d=s||Y.createMeasurementStore(),u=Y.layoutOptionsToLayoutEngine({layout:r,minCols:t,columnWidth:n,gutterWidth:i,flexible:a});d.layout=new c(l,d.layout.getItemLayoutInfo),this.state={nonce:0,layoutEngine:u,measurementStore:d,initialItemCount:l.length}}updatePosition(){this.masonryRef.current&&this.masonryRef.current.updatePosition()}reflow(){const{measurementStore:e}=this.state;e.layout=new c,this.setState(({nonce:e})=>({nonce:e+1}))}render(){const{fetchBoundsOffset:e,getItemLayoutOptions:t,items:n,loadItems:i,scrollContainer:a,virtualize:r}=this.props,{layoutEngine:s,measurementStore:l,nonce:c}=this.state,d=this.getScrollTracker(i,e);return o.createElement(P,{key:`Masonry-${c}`,ref:this.masonryRef,items:n,renderItem:this.renderItem,getItemLayoutOptions:t,layoutEngine:s,scrollContainer:$(a),scrollTracker:d,onLayoutUpdated:this.handleLayoutUpdated,initialLayout:l.layout,virtualize:r,virtualOverscan:K,itemsToMeasureLimit:this.getItemsToMeasureLimit})}}W(Y,"createMeasurementStore",()=>({layout:new c})),W(Y,"defaultProps",{columnWidth:236,fetchBoundsOffset:0,layout:"default",minCols:3,virtualize:!1}),W(Y,"layoutOptionsToLayoutEngine",Object(V.c)(({layout:e,minCols:t,columnWidth:n,gutterWidth:o,flexible:i})=>{return new("uniformRow"===e?j:L)({minCols:t,colWidth:n,gutter:o,flexible:i})}));var X=n("n6mq"),Z=n("/5zs"),J=n("pLLR"),Q=n("KNE1"),ee=n("yjg8");function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne=(e,t,n)=>{const o=Object(ee.k)(t),i=ee.e+e;let a="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute;\n  visibility: hidden;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n";for(let r=n;r<o+1;r+=1){a+=`\n@media (min-width: ${r===n?0:r*i}px) and (max-width: ${(r+1)*i-1}px) {\n  .gridCentered {\n    width: ${r*i}px;\n  }\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${r}),\n  .gridCentered .static:nth-child(-n+${r}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n}\n`}return a};class oe extends o.Component{constructor(...e){super(...e),te(this,"masonryRef",Object(o.createRef)()),te(this,"renderItem",e=>{const{comp:t}=this.props,{gutterWidth:n,paddingBottom:o}=this.getGutters();return i.a.createElement("div",{style:{paddingBottom:o,paddingLeft:n/2,paddingRight:n/2}},i.a.createElement(t,e))})}componentDidUpdate(e){const{masonryRef:t}=this;this.props.widthOffset!==e.widthOffset&&!this.props.useMasonry9&&t.current&&t.current.handleResize&&t.current.handleResize()}getGutters(){const{gutterWidth:e,paddingStyle:t}=this.props,n="simplified"===t;return{gutterWidth:n?16:e,paddingBottom:n?16:6}}render(){const{columnWidth:e,fetchBoundsOffset:t,flexible:n,items:o,loadItems:a,masonryRef:r,measurementStore:s,scrollContainer:l,serverRender:c,useMasonry9:d,virtualize:u,isGridCentered:p,minCols:h}=this.props,{gutterWidth:m}=this.getGutters();let f,g=null;return g=d?i.a.createElement(Y,{columnWidth:e+m,gutterWidth:0,comp:this.renderItem,minCols:h,ref:e=>{this.masonryRef.current=e,r&&(r.current=e)},items:o,flexible:n,loadItems:a,measurementStore:s,scrollContainer:l,virtualize:u,fetchBoundsOffset:t}):i.a.createElement(X.v,{columnWidth:e+m,gutterWidth:0,comp:this.renderItem,minCols:h,ref:e=>{this.masonryRef.current=e,r&&(r.current=e)},items:o,flexible:n,loadItems:a,measurementStore:s,scrollContainer:l,virtualize:u}),p&&(f="gridCentered"),i.a.createElement("div",{className:f},c&&i.a.createElement(Q.a,{unsafeCSS:ne(m,o.length,h||ee.g)}),i.a.createElement("div",null,g))}}te(oe,"defaultProps",{gutterWidth:14,isGridCentered:!0,minCols:ee.g,paddingStyle:"simplified",useMasonry9:!1});const ie=e=>e&&"pin"===e.type,ae=e=>e.filter(ie).map(e=>e.id),re=(e,t)=>({type:"SET_ROUTE_PINS",payload:{location:t,routePins:e}});var se=n("NtFK");function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ce={},de=(e,t)=>{if(null!=e)return ce[e]&&ce[e].screenWidth===window.innerWidth||(ce[e]={screenWidth:window.innerWidth,cache:t?Y.createMeasurementStore():X.v.createMeasurementStore()}),ce[e].cache},ue="undefined"!=typeof window?()=>window:void 0;class pe extends o.Component{constructor(e){super(e),le(this,"isRecordingLoadItemMetrics",!1),le(this,"loadItems",()=>{this.props.isFetching||(Object(se.g)(12),Object(se.d)({name:"GridBottomSpinnerStartedTraceEvent"}),this.isRecordingLoadItemMetrics=!0,this.props.loadItems())}),le(this,"renderItem",e=>{const{comp:t}=this.props;return i.a.createElement(l.a,{name:"MasonryPerfTimingItem"},i.a.createElement(t,e))}),Object(se.d)({name:"MasonryConstructor"})}componentDidMount(){const{isFetching:e,saveRoutePins:t}=this.props,n=window.innerHeight,o=document.querySelector("img[srcset]");if(o){const e=o.getBoundingClientRect()&&o.getBoundingClientRect().top;this.gridVisibleHeight=n&&n-e}Object(se.d)({name:"MasonryDidMount"}),Object(se.d)({name:"PageLoadRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this)}),e||(Object(se.d)({name:"UserNavRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this)}),Object(se.d)({name:"UserNavRegisterGridItemsPositionedTraceEvent"}),Object(se.h)(3),Object(se.h)(2),Object(se.h)(102)),t&&this.updateRoutePins()}componentDidUpdate(e){const{saveRoutePins:t,items:n,viewParameterType:o}=this.props;this.isRecordingLoadItemMetrics&&!this.props.isFetching&&(this.isRecordingLoadItemMetrics=!1,Object(se.h)(12,{viewParameter:o}),Object(se.d)({name:"GridBottomSpinnerStoppedTraceEvent"})),this.props.isFetching||(Object(se.d)({name:"UserNavRegisterGridImagesTraceEvent",viewportFilled:this.checkViewportFilled(),gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this)}),Object(se.d)({name:"UserNavRegisterGridItemsPositionedTraceEvent"}),Object(se.h)(3),Object(se.h)(2),Object(se.h)(102)),this.checkViewportFilled()&&Object(se.d)({name:"PageLoadRegisterGridImagesTraceEvent",gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this),viewportFilled:!0}),t&&n!==e.items&&this.updateRoutePins()}updateRoutePins(){const{currentHistoryEntry:e,setRoutePins:t,items:n}=this.props;if(e&&n){t(ae(n),e.location)}}checkViewportFilled(){const{cacheKey:e,useMasonry9:t}=this.props,n=de(e,t);if(n&&this.gridVisibleHeight)if(t){if(n.layout&&n.layout.contentFilledSize){return n.layout.contentFilledSize.height>this.gridVisibleHeight}}else if(n.columnHeights)return Math.min(...n.columnHeights)>this.gridVisibleHeight;return!1}render(){const{cacheKey:e,columnWidth:t,fetchBoundsOffset:n,flexible:o,gutterWidth:a,isGridCentered:r,items:s,masonryRef:l,minCols:c,paddingStyle:d,scrollContainer:u,serverRender:p,useMasonry9:h,virtualize:m,widthOffset:f}=this.props;return i.a.createElement(oe,{columnWidth:t,comp:this.renderItem,fetchBoundsOffset:n,flexible:o,gutterWidth:a,items:s,loadItems:this.loadItems,masonryRef:l,measurementStore:de(e,h),paddingStyle:d,scrollContainer:u||ue,serverRender:p,useMasonry9:h,virtualize:m,widthOffset:f,isGridCentered:r,minCols:c})}}le(pe,"defaultProps",{saveRoutePins:!1,serverRender:!0,useMasonry9:!1,isGridCentered:!0});var he=Object(s.connect)(({pins:e,history:t},{mapPinUrlsToItems:n,items:o})=>({currentHistoryEntry:t.current,itemsNormalizedTracing:n?n(e,o):null}),e=>({setRoutePins:(t,n)=>e(re(t,n))}))((function(e){const t=Object(J.d)(),n=void 0===e.useMasonry9?new Z.c(t,"web_masonry9").enabled():e.useMasonry9,o=e.fetchBoundsOffset||(n?100:0);return i.a.createElement(pe,{...e,useMasonry9:n,fetchBoundsOffset:o})})),me=n("0SCs");const fe=({items:e,currentHistoryEntry:t,setRoutePins:n})=>{Object(o.useEffect)(()=>{e&&n&&t&&n(ae(e),t.location)},[e])};var ge=Object(s.connect)(({history:e})=>({currentHistoryEntry:e.current}),e=>({setRoutePins:(t,n)=>e(re(t,n))}))((function(e){return fe(e),null}));var ye=({isFetching:e,viewParameterType:t})=>{const[n,i]=Object(o.useState)(!1);Object(o.useEffect)(()=>{n&&!e&&(i(!1),Object(se.h)(12,{viewParameter:t}),Object(se.d)({name:"GridBottomSpinnerStoppedTraceEvent"}))},[n,e]);return()=>{e||(i(!0),Object(se.g)(12),Object(se.d)({name:"GridBottomSpinnerStartedTraceEvent"}))}};const be={},ve=(e,t)=>{if(null!=e)return be[e]&&be[e].screenWidth===window.innerWidth||(be[e]={screenWidth:window.innerWidth,cache:t?Y.createMeasurementStore():X.v.createMeasurementStore()}),be[e].cache},Ee=({cacheKey:e,useMasonry9:t})=>{const n=ve(e,t);if(!n)return 0;if(t){if(n.layout&&n.layout.contentFilledSize){return n.layout.contentFilledSize.height}}else if(n.columnHeights)return Math.min(...n.columnHeights);return 0};function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=Object(s.connect)(({pins:e},{mapPinUrlsToItems:t,items:n})=>({itemsNormalizedTracing:t?t(e,n):null}),()=>({}))(class extends o.Component{constructor(e){super(e),we(this,"gridVisibleHeight",null),we(this,"handleChanges",e=>{const t=this.checkViewportFilled();this.props.isFetching||(Object(se.d)({name:"UserNavRegisterGridImagesTraceEvent",viewportFilled:t,gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this)}),Object(se.d)({name:"UserNavRegisterGridItemsPositionedTraceEvent"}),Object(se.h)(3),Object(se.h)(2),Object(se.h)(102)),("componentDidMount"===e||t)&&Object(se.d)({name:"PageLoadRegisterGridImagesTraceEvent",viewportFilled:t,gridData:this.props.itemsNormalizedTracing||this.props.items,el:r.a.findDOMNode(this)})}),Object(se.d)({name:"MasonryConstructor"})}componentDidMount(){Object(se.d)({name:"MasonryDidMount"});const e=window.innerHeight,t=document.querySelector("img[srcset]");if(t){const n=t.getBoundingClientRect()&&t.getBoundingClientRect().top;this.gridVisibleHeight=e&&e-n}this.handleChanges("componentDidMount")}componentDidUpdate(){this.handleChanges("componentDidUpdate")}checkViewportFilled(){const{gridVisibleHeight:e}=this,{cacheKey:t,useMasonry9:n}=this.props;return!!e&&Ee({cacheKey:t,useMasonry9:n})>e}render(){const{children:e,cacheKey:t,useMasonry9:n}=this.props;return e(ve(t,n))}});const Oe="undefined"!=typeof window?()=>window:void 0;function Ce({cacheKey:e,comp:t,error:n,fetchBoundsOffset:a,isFetching:r,isGridCentered:s=!0,items:c,loadItems:d,mapPinUrlsToItems:u,paddingStyle:p,saveRoutePins:h,scrollContainer:m,serverRender:f=!0,useMasonry9:g,viewParameterType:y,...b}){const v=void 0===g,{anyEnabled:E}=Object(me.a)("web_masonry9",v),w=v?E:!!g,_=Object(o.useMemo)(()=>e=>i.a.createElement(l.a,{name:"MasonryPerfTimingItem"},i.a.createElement(t,e)),[t]),O=ye({isFetching:r,viewParameterType:y}),C=()=>{d(),O()};return i.a.createElement(o.Fragment,null,!!h&&i.a.createElement(ge,{items:c}),i.a.createElement(_e,{cacheKey:e,isFetching:r,items:c,mapPinUrlsToItems:u,useMasonry9:w},e=>i.a.createElement(oe,{...b,comp:_,fetchBoundsOffset:a||(w?100:0),isGridCentered:s,items:c,loadItems:C,measurementStore:e,paddingStyle:p,scrollContainer:m||Oe,serverRender:f,useMasonry9:w})))}function Se(e){const{anyEnabled:t}=Object(me.a)("web_masonry_perf_timing_refactor"),n=t?Ce:he;return i.a.createElement(n,e)}n.d(t,"default",(function(){return Se}))},R6wO:function(e,t,n){n.d(t,"a",(function(){return l}));var o=n("q1tI"),i=n.n(o),a=n("n6mq");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s={__path:"M8.134 8.116a1.25 1.25 0 0 0-1.768 0L4.25 10.232 2.134 8.116A1.25 1.25 0 0 0 .366 9.884L2.483 12 .366 14.116a1.25 1.25 0 0 0 1.768 1.768l2.116-2.117 2.116 2.117a1.248 1.248 0 0 0 1.768 0 1.25 1.25 0 0 0 0-1.768L6.018 12l2.116-2.116a1.25 1.25 0 0 0 0-1.768M24 8v8a2.5 2.5 0 0 1-2.5 2.5h-8A2.5 2.5 0 0 1 11 16V8a2.5 2.5 0 0 1 2.5-2.5h8A2.5 2.5 0 0 1 24 8"};class l extends o.PureComponent{constructor(...e){super(...e),r(this,"state",{hovered:!1}),r(this,"handleMouseEnter",e=>this.setState({hovered:!0})),r(this,"handleMouseLeave",e=>this.setState({hovered:!1}))}render(){const{bold:e,icon:t,text:n,description:o,compact:r}=this.props,l=Array.isArray(n)?n.join(""):n;return i.a.createElement("div",{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i.a.createElement(a.c,{alignItems:"start",color:this.state.hovered?"lightGray":"transparent",display:"flex",direction:"row",overflow:"hidden",paddingX:4,paddingY:2,marginStart:-1,marginEnd:-1,title:l},!r&&t&&i.a.createElement(a.c,{flex:"none",padding:1},"unfollow"===t?i.a.createElement(a.n,{accessibilityLabel:"",color:"darkGray",dangerouslySetSvgPath:s,size:16}):i.a.createElement(a.n,{accessibilityLabel:"",color:"darkGray",icon:t,size:16})),i.a.createElement(a.c,{flex:"grow",display:"flex",direction:r?"row":"column",padding:1,width:"100%",alignItems:r?"center":"start"},i.a.createElement(a.K,{color:"darkGray",size:r?"sm":"md",weight:e?"bold":"normal"},n),i.a.createElement(a.c,{display:"flex",alignItems:"center"},!r&&o&&i.a.createElement(a.c,{marginTop:1},i.a.createElement(a.K,{color:"darkGray",overflow:"normal"},o))))))}}r(l,"defaultProps",{bold:!0})},S1to:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.default)(e);if(!n.length)return void t.preventDefault();var o,i=t.shiftKey,r=n[0],s=n[n.length-1];if(e===document.activeElement){if(!i)return;o=s}s!==document.activeElement||i||(o=r);r===document.activeElement&&i&&(o=s);if(o)return t.preventDefault(),void o.focus();var l=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent);if(null==l||"Chrome"==l[1]||null!=/\biPod\b|\biPad\b/g.exec(navigator.userAgent))return;var c=n.indexOf(document.activeElement);c>-1&&(c+=i?-1:1);if(void 0===n[c])return t.preventDefault(),void(o=i?s:r).focus();t.preventDefault(),n[c].focus()};var o,i=n("ZDLa"),a=(o=i)&&o.__esModule?o:{default:o};e.exports=t.default},"Se/U":function(e,t,n){n.d(t,"a",(function(){return i}));var o=n("/Tr7");function i(e){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");var t=Object(o.a)(e);return!isNaN(t)}},Te6n:function(e,t,n){n.r(t),n.d(t,"OverflowMenu",(function(){return E}));var o=n("q1tI"),i=n.n(o),a=n("/MKj"),r=n("ENn1"),s=n("jCsw"),l=n("Ye/N"),c=n("8BHY"),d=n("5871"),u=n("Zxas"),p=n("kVqD"),h=n("YxyV"),m=n("DJoW"),f=n("Y8Sn"),g=n("gD/Z"),y=n("n6mq");const b=50,v=60;function E({feedbackData:e,feedbackType:t,hidePinFeedbackOverlay:n,isHomefeedContextualMenuTooltipExperience:a,pin:m,pinTitle:E,setForcePrimary:w,transparentBackground:_}){const{slotIndex:O,viewParameter:C,viewType:S}=Object(g.b)(),[I,T]=Object(o.useState)(!1),[x,R]=Object(o.useState)(),{ad_match_reason:P,board:k,category:M,description:N,id:A="",images:D,is_promoted:L,pinner:j,promoter:B,recommendation_reason:z,source_interest:F,videos:U}=m;var H;const G=(H=L?v:b,function(e=""){return Object(u.a)(e.trim(),H)})(N),V=Object(s.a)(D,"236x"),W=Object(f.i)(U),q=Object(p.a)(101,{component:0,element:981,feedback_type:t,objectId:A}),K=()=>{w(!1),n(),T(!1)},$=1===O&&a;return i.a.createElement(o.Fragment,null,i.a.createElement(y.c,{"data-test-id":"feedback-button",ref:R},i.a.createElement(c.a,{accessibilityLabel:l.a._("More information","accessibility label for overflow menu button"),bgColor:_?"transparent":"white",icon:"ellipsis",iconColor:"darkGray",iconSize:12,onClick:({event:e})=>{I?K():(w(!0),T(!0)),q()},size:"sm"})),I&&i.a.createElement(y.r,null,i.a.createElement(y.k,{anchor:x,idealDirection:"right",onDismiss:K,positionRelativeToAnchor:!1,size:"md"},i.a.createElement(d.a,{ad_match_reason:P,bestPinImgSrc:Object(h.h)(m),board:k,feedbackData:e,feedbackType:t,hideDownload:W,isHomefeedContextualMenuTooltip:$,onLinkClick:()=>{I&&K()},onHide:K,onDownloadHideFlyout:()=>{w(!1),T(!1)},pinCategory:M,pinDescription:G,pinId:A,pinImgSrc:V,pinner:j,pinTitle:E,promoter:B,recommendationReason:z,reportPin:Object(r.a)({pin:m,viewParameter:C,viewType:S}),sourceInterest:F,viewParameter:C,viewType:S}))))}t.default=Object(a.connect)((function({experiences:e}){return{isHomefeedContextualMenuTooltipExperience:e&&e.eligibleExperiences&&e.eligibleExperiences[1000116]&&501093===e.eligibleExperiences[1000116].experience_id}}),(function(e,{pin:t}){return{hidePinFeedbackOverlay:()=>{e(Object(m.c)(t.id))}}}))(E)},VCL8:function(e,t,n){function o(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function i(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function a(e,t){try{var n=this.props,o=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,o)}finally{this.props=n,this.state=o}}function r(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,r=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==s){var l=e.displayName||e.name,c="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=o,t.componentWillReceiveProps=i),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=a;var d=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var o=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;d.call(this,e,t,o)}}return e}n.r(t),n.d(t,"polyfill",(function(){return r})),o.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0},VKEO:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.handleBlur=c,t.handleFocus=d,t.markForFocusLater=function(){r.push(document.activeElement)},t.returnFocus=function(){var e=null;try{return void(0!==r.length&&(e=r.pop()).focus())}catch(t){console.warn(["You tried to return focus to",e,"but it is not in the DOM anymore"].join(" "))}},t.popWithoutFocus=function(){r.length>0&&r.pop()},t.setupScopedFocus=function(e){s=e,window.addEventListener?(window.addEventListener("blur",c,!1),document.addEventListener("focus",d,!0)):(window.attachEvent("onBlur",c),document.attachEvent("onFocus",d))},t.teardownScopedFocus=function(){s=null,window.addEventListener?(window.removeEventListener("blur",c),document.removeEventListener("focus",d)):(window.detachEvent("onBlur",c),document.detachEvent("onFocus",d))};var o,i=n("ZDLa"),a=(o=i)&&o.__esModule?o:{default:o};var r=[],s=null,l=!1;function c(){l=!0}function d(){if(l){if(l=!1,!s)return;setTimeout((function(){s.contains(document.activeElement)||((0,a.default)(s)[0]||s).focus()}),0)}}},"XCz/":function(e,t,n){var o=n("lUXN");n("q1tI"),n("0rqB"),n("pLLR");n.d(t,"a",(function(){return o.a}))},"XLg/":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n("q1tI");const i=120;function a(e,t,n){e.current&&clearTimeout(e.current),e.current=null,n&&(t?e.current=setTimeout(n,t):n())}function r(e,t=0,n=i){const r=Object(o.useRef)(),s=Object(o.useRef)(e),[l,c]=Object(o.useState)(e?"active":"inactive");return e!==s.current&&(e?"inactive"===l?(c("starting"),a(r,t,()=>{c("active")})):"ending"===l&&(c("active"),a(r)):"active"===l?(c("ending"),a(r,n,()=>{c("inactive")})):"starting"===l&&(c("inactive"),a(r))),Object(o.useEffect)(()=>()=>a(r),[]),s.current=e,l}},Ye7m:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.assertNodeList=l,t.setElement=function(e){var t=e;if("string"==typeof t&&r.canUseDOM){var n=document.querySelectorAll(t);l(n,t),t="length"in n?n[0]:n}return s=t||s},t.validateElement=c,t.hide=function(e){c(e)&&(e||s).setAttribute("aria-hidden","true")},t.show=function(e){c(e)&&(e||s).removeAttribute("aria-hidden")},t.documentNotReadyOrSSRTesting=function(){s=null},t.resetForTesting=function(){s=null};var o,i=n("NPsS"),a=(o=i)&&o.__esModule?o:{default:o},r=n("2zs7");var s=null;function l(e,t){if(!e||!e.length)throw new Error("react-modal: No elements were found for selector "+t+".")}function c(e){return!(!e&&!s)||((0,a.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),!1)}},ZDLa:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return[].slice.call(e.querySelectorAll("*"),0).filter(r)};var o=/input|select|textarea|button|object/;function i(e){var t=e.offsetWidth<=0&&e.offsetHeight<=0;if(t&&!e.innerHTML)return!0;var n=window.getComputedStyle(e);return t?"visible"!==n.getPropertyValue("overflow"):"none"==n.getPropertyValue("display")}function a(e,t){var n=e.nodeName.toLowerCase();return(o.test(n)&&!e.disabled||"a"===n&&e.href||t)&&function(e){for(var t=e;t&&t!==document.body;){if(i(t))return!1;t=t.parentNode}return!0}(e)}function r(e){var t=e.getAttribute("tabindex");null===t&&(t=void 0);var n=isNaN(t);return(n||t>=0)&&a(e,!n)}e.exports=t.default},Zygf:function(e,t,n){function o(e){return Boolean(e.promoted_is_removable)}n.d(t,"a",(function(){return o}))},c0rk:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("qYux"),r=n("0Rm8");t.a=({children:e,className:t,forwardRef:n,position:s,style:l={}})=>{const{setIsContentHeaderPresent:c}=Object(a.c)();Object(o.useEffect)(()=>(c(!0),function(){c(!1)}),[]);const d=Object(r.b)();return i.a.createElement("div",{className:t,ref:n,style:{top:d,...s?{position:s}:{},...l}},e)}},dI71:function(e,t,n){function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return o}))},dKiF:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return s}));const o=(e,t)=>e.length===t.length&&e.every((e,n)=>(function(e,t){if("object"==typeof e&&"object"==typeof t){const n=Object.keys(e),o=Object.keys(t);return n.length===o.length&&n.every(n=>e[n]===t[n])}return e===t})(e,t[n])),i=(e,t)=>e.length===t.length&&e.every((e,n)=>e===t[n]),a=(e,t=i)=>n=>{const o=[];return function(...i){const a=this,r=o.find(e=>e.context===a&&t(e.args,i));if(r)return r.result;const s={context:a,args:i,result:n.apply(this,i)};return o.push(s),e&&o.length>e&&o.shift(),s.result}},r=a(1),s=a()},eqXv:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));var o=n("eOdZ");const i=()=>{};const a={complaint:function(e,t){o.a.create("PinFeedbackResource",e).callUpdate().then(()=>t())},enablePFY:function(e,t){o.a.create("PFYPreferenceResource",e).callCreate().then(()=>t())},followBoard:function(e,t){o.a.create("BoardFollowResource",e).callCreate().then(()=>t())},followPinner:function(e,t){o.a.create("UserFollowResource",e).callCreate().then(()=>t())},followTopic:function(e,t){o.a.create("InterestFollowResource",e).callCreate().then(()=>t())},newsHubPinHide:function(e,t){o.a.create("NewsHubPinFeedbackResource",e).callUpdate().then(()=>t())},promotedComplaint:function(e,t){o.a.create("PinFeedbackResource",e).callUpdate().then(()=>t())},relatedPinHide:function(e,t){o.a.create("RelatedPinFeedbackResource",e).callUpdate().then(()=>t())},reportPin:function(e,t){t()},unfollowBoard:function(e,t){o.a.create("BoardFollowResource",e).callDelete().then(()=>t())},unfollowPinner:function(e,t){o.a.create("UserFollowResource",e).callDelete().then(()=>t())},unfollowTopic:function(e,t){o.a.create("InterestFollowResource",e).callDelete().then(()=>t())},unrelatedSearchPin:function(e,t){o.a.create("SearchPinFeedbackResource",e).callUpdate().then(()=>t())}},r=["complaint","relatedPinHide","unrelatedSearchPin","promotedComplaint","newsHubPinHide","unfollowBoard","unfollowPinner","unfollowTopic"];function s(e,t,n=i){const o=a[e];return o?o(t,n):n()}},"fMq/":function(e,t,n){var o=n("q1tI"),i=n("Ye/N"),a=n("n6mq");function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=16,l=32,c=4;class d extends o.Component{constructor(...e){super(...e),r(this,"state",{isHovering:!1}),r(this,"handleMouseEnter",e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)}),r(this,"handleMouseLeave",e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)})}render(){const{forwardedRef:e,icon:t,onClick:n,onMouseDown:r,onMouseUp:d,selected:u,style:p,text:h,x:m,y:f,zIndex:g,backdropDiameter:y=l,dotDiameter:b=s}=this.props,{isHovering:v}=this.state,E=v?y+c:y,w={zIndex:g,position:"absolute",top:f-E/2,left:m-E/2,outline:"none"},_={backgroundColor:"rgba(0, 0, 0, 0.1)",width:E,height:E,border:"none",borderRadius:E,cursor:n?"pointer":"default"},O={backgroundColor:"#fff",boxShadow:u?"0 0 0 3px #e60023":"none",width:b,height:b,border:"none",borderRadius:b,position:"absolute",top:(E-b)/2,left:(E-b)/2,padding:0,display:"flex",alignItems:"center",justifyContent:"center"};return o.createElement("div",{onClick:n,onKeyPress:n,onMouseDown:r,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:d,ref:e,role:"button",style:w,tabIndex:"0"},o.createElement("div",{style:{..._,...p}},o.createElement("div",{style:O},!!h&&o.createElement(a.K,{align:"center",color:"darkGray",inline:!0,size:"xs",weight:"bold"},h),t&&o.createElement(a.n,{accessibilityLabel:i.a._("Tag anchor","accessibility label for an anchor for an object in a pin"),color:"red",icon:t,size:b/2,inline:!0}))))}}t.a=o.forwardRef((e,t)=>o.createElement(d,{...e,forwardedRef:t}))},fbhf:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.dumpClassLists=function(){0};var o={},i={};t.add=function(e,t){return n=e.classList,a="html"==e.nodeName.toLowerCase()?o:i,void t.split(" ").forEach((function(e){!function(e,t){e[t]||(e[t]=0),e[t]+=1}(a,e),n.add(e)}));var n,a},t.remove=function(e,t){return n=e.classList,a="html"==e.nodeName.toLowerCase()?o:i,void t.split(" ").forEach((function(e){!function(e,t){e[t]&&(e[t]-=1)}(a,e),0===a[e]&&n.remove(e)}));var n,a}},"gD/Z":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n("1dBE");const{Provider:i,Consumer:a,useHook:r}=Object(o.c)("trackingParametersContext")},hLcf:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("fMq/"),r=n("U4JR");function s({showAnimation:e,auxData:t,index:n,isStela:s,onClick:l,onHover:c,onUnhover:d,spotlightCenter:u}){Object(o.useEffect)(()=>{Object(r.a)(120,{element:1260,...t})},[]);const p=parseFloat((.1*(n+1)).toFixed(2)),h={animation:e?`spotlightDotPop 0.6s ease-out ${p}s both`:"none"};return i.a.createElement(a.a,{x:u.x,y:u.y,onClick:e=>{e&&(e.stopPropagation(),e.preventDefault()),Object(r.a)(101,{element:s?1221:1260,...t}),l(n)},onMouseEnter:e=>{e&&(e.stopPropagation(),e.preventDefault()),c(n)},onMouseLeave:e=>{e&&(e.stopPropagation(),e.preventDefault()),d()},style:h})}var l=n("uhAL");t.a=({showAnimation:e,pinId:t,imageSignature:n,imageSize:o,currentSpotlightIdx:a,spotlightAreas:r,handleSpotlightClick:c,handleSpotlightHover:d,handleSpotlightUnhover:u})=>r.map((r,p)=>{if(p===a)return null;const h=Object(l.e)({cropArea:r,scaledWidth:o.w,scaledHeight:o.h}),m={x:h.x+h.w/2,y:h.y+h.h/2},f={pin_id:t,image_signature:n,visual_objects:JSON.stringify([{x:r.x,y:r.y,w:r.w,h:r.h}])},g=`${m.x}${m.y}`;return i.a.createElement(s,{showAnimation:e,auxData:f,index:p,isStela:!!r.is_stela,key:g,onClick:c,onHover:d,onUnhover:u,spotlightCenter:m})})},jCsw:function(e,t,n){function o(e,t){return e&&e[t]&&e[t].url}n.d(t,"a",(function(){return o}))},joD6:function(e,t,n){var o=n("/MKj");t.a=Object(o.connect)(({viewer:e})=>({viewer:e}))},kVqD:function(e,t,n){n.d(t,"a",(function(){return r}));var o=n("q1tI"),i=n("U4JR"),a=n("gD/Z");function r(e,t){const{componentType:n,contextLogData:r,viewParameter:s,viewType:l}=Object(a.b)();return Object(o.useCallback)(()=>{Object(i.a)(e,{component:n,view:l,viewParameter:s,...r,...t||{}})},[e,n,r,s,l])}},lUXN:function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),i=n.n(o),a=n("0rqB"),r=n("pLLR");function s({activate:e,children:t,isEligible:n,name:o}){return i.a.createElement(r.a,null,r=>i.a.createElement(a.a,{activate:e,activateExperiment:e=>r.experiments.v2ActivateExperiment(e)||"",group:r.experiments.v2GetGroup(o)||"",isEligible:n,name:o},t))}},"mVz+":function(e,t,n){n.d(t,"n",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"h",(function(){return s})),n.d(t,"i",(function(){return l})),n.d(t,"p",(function(){return c})),n.d(t,"o",(function(){return d})),n.d(t,"m",(function(){return u})),n.d(t,"q",(function(){return p})),n.d(t,"j",(function(){return h})),n.d(t,"l",(function(){return m})),n.d(t,"k",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return v})),n.d(t,"r",(function(){return E})),n.d(t,"s",(function(){return w}));const o=171,i=85,a=40,r=20,s=8,l=4,c=106,d=133,u=16,p=5,h=1.25,m=.1,f=10,g=246,y=197,b=206,v=165,E=295,w=236},pQ8y:function(e,t,n){var o=n("wx14"),i=n("zLVn"),a=n("dI71");n("17x9");function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var s=n("q1tI"),l=n.n(s),c=n("i8i4"),d=n.n(c),u=!1,p=n("0PSK"),h="unmounted",m="exited",f="entering",g="entered",y=function(e){function t(t,n){var o;o=e.call(this,t,n)||this;var i,a=n&&!n.isMounting?t.enter:t.appear;return o.appearStatus=null,t.in?a?(i=m,o.appearStatus=f):i=g:i=t.unmountOnExit||t.mountOnEnter?h:m,o.state={status:i},o.nextCallback=null,o}Object(a.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===h?{status:m}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==g&&(t=f):n!==f&&n!==g||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,o=this.props.timeout;return e=t=n=o,null!=o&&"number"!=typeof o&&(e=o.exit,t=o.enter,n=void 0!==o.appear?o.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=d.a.findDOMNode(this);t===f?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===m&&this.setState({status:h})},n.performEnter=function(e,t){var n=this,o=this.props.enter,i=this.context?this.context.isMounting:t,a=this.getTimeouts(),r=i?a.appear:a.enter;!t&&!o||u?this.safeSetState({status:g},(function(){n.props.onEntered(e)})):(this.props.onEnter(e,i),this.safeSetState({status:f},(function(){n.props.onEntering(e,i),n.onTransitionEnd(e,r,(function(){n.safeSetState({status:g},(function(){n.props.onEntered(e,i)}))}))})))},n.performExit=function(e){var t=this,n=this.props.exit,o=this.getTimeouts();n&&!u?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,o.exit,(function(){t.safeSetState({status:m},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:m},(function(){t.props.onExited(e)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(o){n&&(n=!1,t.nextCallback=null,e(o))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t,n){this.setNextCallback(n);var o=null==t&&!this.props.addEndListener;e&&!o?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===h)return null;var t=this.props,n=t.children,o=Object(i.a)(t,["children"]);if(delete o.in,delete o.mountOnEnter,delete o.unmountOnExit,delete o.appear,delete o.enter,delete o.exit,delete o.timeout,delete o.addEndListener,delete o.onEnter,delete o.onEntering,delete o.onEntered,delete o.onExit,delete o.onExiting,delete o.onExited,"function"==typeof n)return l.a.createElement(p.a.Provider,{value:null},n(e,o));var a=l.a.Children.only(n);return l.a.createElement(p.a.Provider,{value:null},l.a.cloneElement(a,o))},t}(l.a.Component);function b(){}y.contextType=p.a,y.propTypes={},y.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:b,onEntering:b,onEntered:b,onExit:b,onExiting:b,onExited:b},y.UNMOUNTED=0,y.EXITED=1,y.ENTERING=2,y.ENTERED=3,y.EXITING=4;var v=y,E=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return o=t,void((n=e).classList?n.classList.remove(o):"string"==typeof n.className?n.className=r(n.className,o):n.setAttribute("class",r(n.className&&n.className.baseVal||"",o)));var n,o}))},w=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){t.removeClasses(e,"exit"),t.addClass(e,n?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var o=n?"appear":"enter";t.addClass(e,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var o=n?"appear":"enter";t.removeClasses(e,o),t.addClass(e,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){t.removeClasses(e,"appear"),t.removeClasses(e,"enter"),t.addClass(e,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){t.addClass(e,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){t.removeClasses(e,"exit"),t.addClass(e,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.getClassNames=function(e){var n=t.props.classNames,o="string"==typeof n,i=o?""+(o&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:o?i+"-active":n[e+"Active"],doneClassName:o?i+"-done":n[e+"Done"]}},t}Object(a.a)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var o=this.getClassNames(t)[n+"ClassName"];"appear"===t&&"done"===n&&(o+=" "+this.getClassNames("enter").doneClassName),"active"===n&&e&&e.scrollTop,this.appliedClasses[t][n]=o,function(e,t){e&&t&&t.split(" ").forEach((function(t){return o=t,void((n=e).classList?n.classList.add(o):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,o)||("string"==typeof n.className?n.className=n.className+" "+o:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+o)));var n,o}))}(e,o)},n.removeClasses=function(e,t){var n=this.appliedClasses[t],o=n.base,i=n.active,a=n.done;this.appliedClasses[t]={},o&&E(e,o),i&&E(e,i),a&&E(e,a)},n.render=function(){var e=this.props,t=(e.classNames,Object(i.a)(e,["classNames"]));return l.a.createElement(v,Object(o.a)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(l.a.Component);w.defaultProps={classNames:""},w.propTypes={};t.a=w},q8wg:function(e,t,n){var o=n("q1tI"),i=n("8wun"),a=n("1u47");t.a=e=>o.createElement(a.a,{...e,timeSpentManager:i.a})},qFS3:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.bodyOpenClassName=t.portalClassName=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n("q1tI"),r=m(a),s=m(n("i8i4")),l=m(n("17x9")),c=m(n("QEso")),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n("Ye7m")),u=n("2zs7"),p=m(u),h=n("VCL8");function m(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=t.portalClassName="ReactModalPortal",y=t.bodyOpenClassName="ReactModal__Body--open",b=void 0!==s.default.createPortal,v=function(){return b?s.default.createPortal:s.default.unstable_renderSubtreeIntoContainer};function E(e){return e()}var w=function(e){function t(){var e,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,l=Array(a),d=0;d<a;d++)l[d]=arguments[d];return n=i=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.removePortal=function(){!b&&s.default.unmountComponentAtNode(i.node),E(i.props.parentSelector).removeChild(i.node)},i.portalRef=function(e){i.portal=e},i.renderPortal=function(e){var n=v()(i,r.default.createElement(c.default,o({defaultStyles:t.defaultStyles},e)),i.node);i.portalRef(n)},f(i,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidMount",value:function(){u.canUseDOM&&(b||(this.node=document.createElement("div")),this.node.className=this.props.portalClassName,E(this.props.parentSelector).appendChild(this.node),!b&&this.renderPortal(this.props))}},{key:"getSnapshotBeforeUpdate",value:function(e){return{prevParent:E(e.parentSelector),nextParent:E(this.props.parentSelector)}}},{key:"componentDidUpdate",value:function(e,t,n){if(u.canUseDOM){var o=this.props,i=o.isOpen,a=o.portalClassName;e.portalClassName!==a&&(this.node.className=a);var r=n.prevParent,s=n.nextParent;s!==r&&(r.removeChild(this.node),s.appendChild(this.node)),(e.isOpen||i)&&!b&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(u.canUseDOM&&this.node&&this.portal){var e=this.portal.state,t=Date.now(),n=e.isOpen&&this.props.closeTimeoutMS&&(e.closesAt||t+this.props.closeTimeoutMS);n?(e.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,n-t)):this.removePortal()}}},{key:"render",value:function(){return u.canUseDOM&&b?(!this.node&&b&&(this.node=document.createElement("div")),v()(r.default.createElement(c.default,o({ref:this.portalRef,defaultStyles:t.defaultStyles},this.props)),this.node)):null}}],[{key:"setAppElement",value:function(e){d.setElement(e)}}]),t}(a.Component);w.propTypes={isOpen:l.default.bool.isRequired,style:l.default.shape({content:l.default.object,overlay:l.default.object}),portalClassName:l.default.string,bodyOpenClassName:l.default.string,htmlOpenClassName:l.default.string,className:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),overlayClassName:l.default.oneOfType([l.default.string,l.default.shape({base:l.default.string.isRequired,afterOpen:l.default.string.isRequired,beforeClose:l.default.string.isRequired})]),appElement:l.default.instanceOf(p.default),onAfterOpen:l.default.func,onRequestClose:l.default.func,closeTimeoutMS:l.default.number,ariaHideApp:l.default.bool,shouldFocusAfterRender:l.default.bool,shouldCloseOnOverlayClick:l.default.bool,shouldReturnFocusAfterClose:l.default.bool,parentSelector:l.default.func,aria:l.default.object,data:l.default.object,role:l.default.string,contentLabel:l.default.string,shouldCloseOnEsc:l.default.bool,overlayRef:l.default.func,contentRef:l.default.func},w.defaultProps={isOpen:!1,portalClassName:g,bodyOpenClassName:y,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,parentSelector:function(){return document.body}},w.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}},(0,h.polyfill)(w),t.default=w},qUSw:function(e,t,n){function o(e,t){return{type:"UPDATE_ACTIVITY_ITEM_COMMENT_COUNT",payload:{increment:t,id:e}}}function i(e){return o(e,!1)}function a(e){return o(e,!0)}n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}))},qYux:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c}));var o=n("q1tI"),i=n.n(o),a=n("1dBE");const{Provider:r,Consumer:s,useHook:l}=Object(a.c)("ContentHeader");class c extends o.Component{constructor(...e){var t,n,o;super(...e),o={isContentHeaderPresent:!1,setIsContentHeaderPresent:e=>{this.setState({isContentHeaderPresent:e})}},(n="state")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o}render(){return i.a.createElement(r,{value:this.state},this.props.children)}}},tMjw:function(e,t,n){var o=n("q1tI"),i=n.n(o),a=n("I7CA"),r=n("vcEN"),s=n("n6mq");const l={SELECTED:"#e60023",NOT_SELECTED:"#efefef"};function c({selected:e=!1}){return i.a.createElement(s.c,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0,dangerouslySetInlineStyle:{__style:{borderWidth:"3px",borderStyle:"solid",borderColor:e?l.SELECTED:l.NOT_SELECTED,borderRadius:d,boxShadow:"inset 0 0 0 3px #fff",zIndex:1}}})}n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));const d=16,u={wrapper:{borderRadius:d,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},promotedPinBorderTreatment:{background:"#EFEFEF",padding:4,borderRadius:20},primaryContentContainer:{marginBottom:"auto"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"},savedOverlay:{backgroundColor:"rgba(0, 0, 0, 0.33)"}};function p({children:e,savedOverlayVisibility:t="none",visualOverlayVisibility:n="none",primaryContent:o,primaryContentVisibility:l="none",secondaryContent:d,secondaryContentVisibility:p="none",accessoryContent:h,accessoryContentVisibility:m="none",actionBar:f,actionBarVisibility:g="none",footer:y,selectionState:b="no-selection",debugContent:v,signalDebuggerContent:E,obscuredPinOverlay:w,showNoPinBorderRadius:_,showPromotedPinBorderTreatment:O}){return i.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:O?u.promotedPinBorderTreatment:{}}},i.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:_?{}:u.wrapper},"data-test-id":"pinWrapper",overflow:"hidden",position:"relative"},"no-selection"!==b&&i.a.createElement(c,{selected:"selected"===b}),i.a.createElement(s.c,{dangerouslySetInlineStyle:{__style:_?{}:u.wrapper},overflow:"hidden",position:"relative"},e,i.a.createElement(r.a,{visibility:n},i.a.createElement(a.a,{additionalStyles:u.visualOverlay})),i.a.createElement(r.a,{visibility:t},i.a.createElement(a.a,{additionalStyles:u.savedOverlay})),h&&i.a.createElement(r.a,{visibility:m},i.a.createElement(a.a,null,h)),d&&i.a.createElement(r.a,{visibility:p},i.a.createElement(a.a,null,d)),o&&i.a.createElement(r.a,{visibility:l},i.a.createElement(a.a,null,o)),f&&i.a.createElement(r.a,{visibility:g},i.a.createElement(a.a,null,i.a.createElement(s.c,{position:"absolute",left:!0,right:!0,bottom:!0},f))),v&&i.a.createElement(a.a,null,v),E),y,w&&i.a.createElement(s.c,null,w)))}},uDSo:function(e,t,n){n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"g",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return d}));const o=424,i=800,a=976,r=508,s=424,l=278,c=640,d=508},uVIr:function(e,t,n){function o(e){return{type:"FEED_ITEMS_ADDED",payload:e}}n.d(t,"a",(function(){return o}))},uXiN:function(e,t,n){n.d(t,"a",(function(){return s}));var o=n("q1tI"),i=n("n6mq");const a="rgb(226, 226, 226)",r="rgb(218, 218, 218)";function s(e){const{active:t=!1,borderRadius:n,children:s,focused:l=!1,hovered:c=!1,shape:d,hoverBgColor:u,bgColor:p="transparent",size:h="lg"}=e,m=t?{backgroundColor:"transparent"===p?"rgba(0, 0, 0, 0.1)":r}:null,f=!c||l||t?null:{backgroundColor:u||("transparent"===p?"rgba(0, 0, 0, 0.06)":a)},g=l?{backgroundColor:"transparent"===p?"rgba(0, 0, 0, 0.06)":a,boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:"0"}:null;let y;if("circle"===d)switch(h){case"xs":y=24;break;case"sm":y=32;break;case"md":y=40;break;case"lg":y=48;break;case"xl":y=56;break;default:y=48}const b=y,v={backgroundColor:{transparent:"transparent",lightGray:"#efefef",white:"#fff",transparentDarkGray:"rgba(51, 51, 51, 0.8)"}[p],...f,...m,...g,...n?{borderRadius:n}:{}};return o.createElement(i.c,{shape:d,dangerouslySetInlineStyle:{__style:v},height:y,width:b},s)}},uhAL:function(e,t,n){function o(e,t,n){return Object.keys(e).reduce((n,o)=>n+Math.abs(e[o]-t[o]),0)<=n}function i({cropArea:{x:e,y:t,w:n,h:o},scaledWidth:i,scaledHeight:a}){return{x:e/i,y:t/a,w:n/i,h:o/a}}function a({cropArea:{x:e,y:t,w:n,h:o},scaledWidth:i,scaledHeight:a}){return{h:Math.floor(o*a),w:Math.floor(n*i),x:Math.floor(e*i),y:Math.floor(t*a)}}function r({cropArea:{x:e,y:t,w:n,h:o},cropSource:i}){let a=[];return e>=0&&t>=0&&n>=0&&o>=0&&(a=a.concat([`x=${e}`,`y=${t}`,`w=${n}`,`h=${o}`])),i&&(a=a.concat(`cropSource=${i}`)),a.length?`?${a.join("&")}`:""}function s({pinId:e,cropArea:t,cropSource:n}){return`/pin/${e}/visual-search/${r({cropArea:t,cropSource:n})}`}function l(e){return e.filter(e=>e.is_stela)}function c(e){return e.filter(e=>!!e.label)}n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return r})),n.d(t,"g",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}))},vcEN:function(e,t,n){n.d(t,"a",(function(){return l}));var o=n("q1tI"),i=n.n(o),a=n("n6mq"),r=n("XLg/");function s(e,t){return{hidden:{opacity:0,transition:t?`opacity ${t}ms ease`:void 0},visible:{opacity:1,transition:e?`opacity ${e}ms ease`:void 0}}}function l({children:e,fadeInDuration:t=0,fadeOutDuration:n=r.a,visibility:o}){return"none"!==o&&e?i.a.createElement(a.c,{dangerouslySetInlineStyle:{__style:s(t,n)[o]}},e):null}},ynlw:function(e,t,n){n.d(t,"a",(function(){return r}));var o=n("63p3"),i=n("Y8Sn");const a=()=>({isCarousel:!1,isGif:!1,isOneTap:!1,isOwnPin:!1,isProduct:!1,isPromoted:!1,isRecipe:!1,isStoryPin:!1,isVideo:!1});function r(e){const{access:t,attribution:n,buyable_product:r,embed:s,is_eligible_for_web_closeup:l,rich_summary:c,story_pin_data_id:d,videos:u}=e,p=a();Object(o.a)(e)&&(p.isCarousel=!0),l&&(p.isOneTap=!0),Object(i.i)(u)&&(p.isVideo=!0);const h=s||n&&n.embed||null;return h&&"gif"===h.type&&(p.isGif=!0),(r||c&&"product"===c.type_name)&&(p.isProduct=!0),c&&"recipe"===c.type_name&&(p.isRecipe=!0),e.promoter&&!e.is_downstream_promotion&&(p.isPromoted=!0),(t||[]).includes("write")&&(p.isOwnPin=!0),d&&(p.isStoryPin=!0),p}},zLLH:function(e,t,n){n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return f}));var o=n("q1tI"),i=n("/MKj"),a=n("ITT5"),r=n("7w6Q"),s=n("17x9"),l=n.n(s),c=n("T+ZI"),d=n("Wer7");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const p="-end-";function h(e={},t){return Object(a.a)("function"==typeof e?e(t):e)}function m(e={},t){return"function"==typeof e?e(t):e}function f(e,t={}){const n=e.key;function a(t){const o={};let i,a,s,l,d={fetching:o,data:o};const u={};function m(e,o,r){return e&&(i=e),o&&(a=o),r&&(s=r),l={...i,dispatch:t,[n]:a,...s}}return function({resources:t,history:n},a){const{fetching:s,data:f}=t,g=!(i&&Object(c.a)(i,a)),y=!(s===d.fetching&&f===d.data);if(!g&&!y&&l)return l;const b=h(e.options,a);if(g&&!y&&l)return m(a);const v=s[e.name]||o,E=d.fetching[e.name]||o,w=f[e.name]||o,_=d.data[e.name]||o;u[e.name]||(0===Object.keys(w).length?r.a.increment("webapp.withResource.no-cache",.05,{resource:e.name,cache_size:0,level:"warn",v:2,xFoundKeys:null,xExpectedKey:b}):b in w?r.a.increment("webapp.withResource.cache-hit",.05,{resource:e.name,cache_size:Object.keys(w).length,level:"success",v:2}):r.a.increment("webapp.withResource.populated-cache-miss",.05,{resource:e.name,cache_size:Object.keys(w).length,level:"error",v:2,xFoundKeys:JSON.stringify(Object.keys(w)),xExpectedKey:b})),u[e.name]=!0;const O=v!==E||w!==_||v[b]!==E[b]||w[b]!==_[b];if(!g&&!O&&l)return l;if(g&&!O&&l)return m(a);d={fetching:s,data:f};const{data:C,error:S,nextBookmark:I,isPrefetch:T,prefetchHasBeenRead:x}=w[b]||{},R=Boolean(v[b]),P=Boolean(w[b]);return m(a,{data:C,error:S,isAtEnd:P&&!R&&I===p,isFetching:R,isLoaded:P,nextBookmark:I,isPrefetch:T,prefetchHasBeenRead:x},{history:n})}}return function(r){class s extends o.Component{constructor(...n){super(...n),u(this,"state",{isRefreshing:!1}),u(this,"optionsKey",h(e.options,this.props)),u(this,"fetchDisabled",e=>!!t.dangerouslyDisableFetch&&t.dangerouslyDisableFetch(e||this.props)),u(this,"loadData",n=>{this.fetchDisabled(n)||n.dispatch(Object(d.a)(e.name,m(e.options,n),t.headers,t.traceLoggerHandlerName))}),u(this,"fetchMore",()=>{const{dispatch:n}=this.props;this.fetchDisabled()||n(Object(d.d)(e.name,m(e.options,this.props),t.headers,t.traceLoggerHandlerName))}),u(this,"refreshData",()=>{this.fetchDisabled()||(this.loadData(this.props),this.setState({isRefreshing:!0}))})}UNSAFE_componentWillMount(){const{dispatch:o,history:i,[n]:a}=this.props;a.isLoaded&&t.enabledRouteRefresh&&i.current&&"POP"!==i.current.action&&!this.fetchDisabled()?this.setState({isRefreshing:!0}):a.isLoaded&&i.current&&"POP"!==i.current.action&&t.acceptPrefetch&&a.isPrefetch&&!a.prefetchHasBeenRead&&!this.fetchDisabled()&&o(Object(d.h)(e.name,m(e.options,this.props)))}componentDidMount(){const{[n]:e}=this.props,{isRefreshing:o}=this.state;!1!==t.allowStale&&e.isLoaded&&!o||this.loadData(this.props)}UNSAFE_componentWillReceiveProps(t){const{[n]:o}=this.props,{isRefreshing:i}=this.state,a=h(e.options,t);a!==this.optionsKey&&(this.loadData(t),this.optionsKey=a),i&&o.data!==t[n].data&&this.setState({isRefreshing:!1})}render(){const{[n]:e}=this.props,{isRefreshing:t}=this.state;return e.fetchMore=this.fetchMore,e.refreshData=this.refreshData,e.isRefreshing=t,o.createElement(r,this.props)}}return u(s,"WrappedComponent",r),u(s,"displayName",`WithResource[${e.name}](${r.displayName||r.name})`),u(s,"propTypes",{dispatch:l.a.func.isRequired,[n]:l.a.shape({data:l.a.any,error:l.a.any,isAtEnd:l.a.bool.isRequired,isFetching:l.a.bool.isRequired,isLoaded:l.a.bool.isRequired})}),Object(i.connectAdvanced)(a)(s)}}}},0,[11,15,"PinBetterSaveCommon","PinRepEditButtonCommon","PinSaveButtonCommon","NuxOneClickSaveButtonCommon","PinPromoteButtonCommon","PinRepSendShareFlyoutButtonCommon","PinRepSendShareLinkButtonCommon"]]);
//# sourceMappingURL=pjs-FlashlightPageDesktop-e2ca743940887287f1bc.mjs.map
